(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1003:function(e,t,n){"use strict";n.d(t,"a",(function(){return at}));var a=n(32),r=n(1),i=n(2),o=n.n(i),c=n(24),s=n(37),l=n(29),u=n(18),d=n(11),h=n.n(d),f=n(160),p=n(977),b=n(13),m=n(14),v=n(67),g=n(15),O=n(17),j=n(9),y=n(42),w=n(3),C=n.n(w),A=n(191),k=n.n(A),S=n(30),R=n(833),E=n(377),N=n(1335),I=n(38),T=n(105),B=n(1191),x=n(1192),Q=n(1193),M=n(1194),_=n(1195),D=n.n(_),P=n(1196),q=n.n(P),L=n(1197),z=n.n(L),U=n(1198),F=n.n(U),H=["preset","type"];function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(j.a)(e);if(t){var r=Object(j.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(O.a)(this,n)}}var Y={answer:[B.a,D.a,"#ffc601"],article:[x.a,q.a,"#ff6084"],pin:[Q.a,z.a,"#25c7c7"],video:[M.a,F.a,"#ff9015"]};function W(e){var t=e.preset,n=e.type,i=Object(a.default)(e,H);if("old"===t){var o=Object(y.a)(Y[n],1)[0];return Object(r.b)(o,Object.assign({},i))}var c=Object(y.a)(Y[n],3),s=c[1],l=c[2];return Object(r.b)("div",{className:"GlobalWrite-iconContainer",css:function(e){return{background:e.colorMod(l).alpha(.12),"&:hover":{background:e.colorMod(l).alpha(.22)}}},children:Object(r.b)("img",{className:"GlobalWrite-icon",src:s,alt:""})})}var G={answer:{id:2744,action:"OpenUrl",elementName:"Answer"},article:{id:2752,action:"OpenUrl",elementName:"Post"},pin:{id:2753,action:"Click",elementName:"Pin"},draft:{id:2750,action:"OpenUrl"}},J=function(e){Object(g.a)(n,e);var t=V(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loadWritePin:!1,showWritePin:!1},e.openWritePin=e.context.authRequired((function(){return e.context.realNameRequired((function(){e.createClickButtonHandler("pin")(),e.setState({loadWritePin:!0,showWritePin:!0})}))()})),e.closeWritePin=function(){e.setState({showWritePin:!1})},e.openUploadVideo=e.context.authRequired((function(){return e.context.realNameRequired((function(){window.open("/zvideo/upload-video")}))()})),e.createClickButtonHandler=function(t){return e.context.realNameRequired((function(){var n=G[t],a=n.action,r=n.elementName,i=n.id;S.a.trackEvent(Object(v.a)(e),k()({id:i,action:a,element_name:r},Boolean),"draft"===t?{link:{url:"https://www.zhihu.com".concat(e.props.creatorQuestionRightPass?"/creator/manage/creation/draft":"/draft")}}:null),"answer"===t?window.open(e.props.currentUser.isOrg?"/organization/question/recommend#recommend":e.props.creatorQuestionRightPass?"/creator/featured-question/invited":"/question/waiting"):"article"===t&&(window.open("//zhuanlan.zhihu.com/write"),S.a.trackEvent(Object(v.a)(e),{id:8038,action:"OpenUrl"},{link:{url:"https://zhuanlan.zhihu.com/write"}}))}))},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentUser,n=e.fillCurrentUserIfNeeded,a=e.laterQuestionsCount,r=e.getLaterQuestionsCount,i=e.imperativeRef,o=e.withComponent;n([o&&"draftCount","organization"===t.userType&&"isOrgCreatepinWhiteUser"].filter(Boolean)),o&&null===a&&r(),i&&(i.current={createClickHandler:this.createClickButtonHandler,openUploadVideo:this.openUploadVideo,openWritePin:this.openWritePin})}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,a=t.laterQuestionsCount,i=t.withComponent,o=t.preset,c=this.state,s=c.loadWritePin,l=c.showWritePin,u=(n||{}).draftCount,d=n&&(!n.isOrg||n.isOrg&&n.isOrgCreatepinWhiteUser);if(!i)return Object(r.b)(r.a,{children:s&&Object(r.b)(N.a,{show:l,onClose:this.closeWritePin})});var f=R.d;return"new"===o&&(f="div"),Object(r.c)(f,{role:"complementary","aria-label":"创作中心卡片",className:h()("GlobalWrite","GlobalWrite--".concat(o)),children:[Object(r.c)("div",{className:"GlobalWrite-navTop",children:[Object(r.c)("a",{className:"GlobalWrite-topItem",target:"_blank",rel:"noopener noreferrer",title:"回答",role:"button",tabIndex:0,onClick:this.createClickButtonHandler("answer"),children:[Object(r.b)(W,{preset:o,type:"answer",className:"GlobalWrite-navIcon"}),Object(r.b)("div",{className:"GlobalWrite-topTitle",children:"回答问题"}),n.isOrg&&Object(r.b)("div",{className:"GlobalWrite-exposeMore",children:"曝光更多"})]}),Object(r.c)("div",{className:"GlobalWrite-topItem",role:"button",tabIndex:0,onClick:function(t){S.a.trackEvent(t.target,{id:8619,action:"Add"}),e.openUploadVideo()},children:[Object(r.b)(W,{preset:o,type:"video",className:"GlobalWrite-navIcon"}),Object(r.b)("div",{className:"GlobalWrite-topTitle",children:"发视频"})]}),Object(r.c)("a",{className:"GlobalWrite-topItem",target:"_blank",rel:"noopener noreferrer",title:"写文章",role:"button",tabIndex:0,onClick:this.createClickButtonHandler("article"),children:[Object(r.b)(W,{preset:o,type:"article",className:"GlobalWrite-navIcon"}),Object(r.b)("div",{className:"GlobalWrite-topTitle",children:"写文章"})]}),d&&Object(r.c)("div",{className:"GlobalWrite-topItem",role:"button",tabIndex:0,onClick:this.openWritePin,children:[Object(r.b)(W,{preset:o,type:"pin",className:"GlobalWrite-navIcon"}),Object(r.b)("div",{className:"GlobalWrite-topTitle",children:"写想法"})]})]}),Object(r.c)("div",{className:"GlobalWrite-navBottom",children:[Object(r.b)("a",{className:"GlobalWrite-answerLater",href:"/question/later",target:"_blank",title:"稍后答","data-za-detail-view-id":5370,children:Object(r.c)("div",{className:"GlobalWrite-navWrapper",children:[Object(r.b)("div",{className:"GlobalWrite-navTitle",children:"稍后答"}),Boolean(a)&&Object(r.b)("div",{className:"GlobalWrite-navNumber",children:Object(E.formatNumber)(a)})]})}),Object(r.b)("a",{className:"GlobalWrite-navDraft",href:this.props.creatorQuestionRightPass?"/creator/manage/creation/draft":"/draft",target:"_blank",rel:"noopener noreferrer",title:"草稿",onClick:this.createClickButtonHandler("draft"),"data-za-not-track-link":!0,children:Object(r.c)("div",{className:"GlobalWrite-navWrapper",children:[Object(r.b)("div",{className:"GlobalWrite-navTitle",children:"草稿箱"}),Boolean(u)&&Object(r.b)("div",{className:"GlobalWrite-navNumber",children:Object(E.formatNumber)(u)})]})})]}),s&&Object(r.b)(N.a,{show:l,onClose:this.closeWritePin})]})}}]),n}(i.Component);J.defaultProps={preset:"old",withComponent:!0},J.contextTypes={authRequired:C.a.func,realNameRequired:C.a.func};var K=Object(c.connect)((function(e){var t;return{currentUser:Object(I.b)(e),laterQuestionsCount:null===(t=e.question)||void 0===t?void 0:t.laterQuestions.count}}),{fillCurrentUserIfNeeded:I.e,getLaterQuestionsCount:T.u})(J),Z=n(104),X=n(806),$=n(21),ee=function(e){return o.a.createElement($.a,e,o.a.createElement("path",{d:"M5.74 4h12.52c.961 0 1.74.775 1.74 1.73V16.27c0 .955-.779 1.73-1.74 1.73h-3.825l-1.658 2.044a1 1 0 0 1-1.554 0l-1.658-2.044H5.74C4.78 18 4 17.224 4 16.27V5.73C4 4.775 4.778 4 5.74 4zM12 16a.976.976 0 0 0 .705-.287.951.951 0 0 0 .295-.712.954.954 0 0 0-.295-.714A.976.976 0 0 0 12 14a.962.962 0 0 0-.705.295A.961.961 0 0 0 11 15c0 .284.098.522.295.713A.975.975 0 0 0 12 16zm1.278-4.924a36.81 36.81 0 0 0 1.023-.975c.19-.193.354-.422.492-.688.138-.266.207-.575.207-.928 0-.448-.12-.864-.363-1.246a2.517 2.517 0 0 0-1.029-.906C13.164 6.111 12.652 6 12.072 6c-.624 0-1.17.133-1.638.399-.468.265-.824.6-1.068 1.005-.244.405-.366.804-.366 1.2 0 .19.077.368.231.531a.747.747 0 0 0 .567.246c.38 0 .638-.234.774-.703.144-.449.32-.788.528-1.019.208-.23.532-.345.972-.345.376 0 .683.114.921.342.238.229.357.51.357.841 0 .17-.039.328-.117.473a1.782 1.782 0 0 1-.288.396c-.114.118-.3.294-.555.526a9.71 9.71 0 0 0-.696.688c-.172.194-.31.418-.414.673a2.391 2.391 0 0 0-.156.906c0 .278.071.488.213.63a.716.716 0 0 0 .525.211c.4 0 .638-.216.714-.648.044-.203.077-.345.099-.426.022-.081.053-.162.093-.243.04-.081.101-.17.183-.268.082-.098.191-.21.327-.34z",fillRule:"evenodd"}))};ee.defaultProps={name:"HelpBubble"};var te=ee,ne=n(2608),ae=function(e){return o.a.createElement($.a,e,o.a.createElement("path",{d:"M19 19.5H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10.5a2 2 0 0 1-2 2zm0-12a.5.5 0 0 0-.5-.5h-13a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h3.75c1 0 1 2 2.75 2s1.75-2 2.75-2h3.75a.5.5 0 0 0 .5-.5v-2z",fillRule:"evenodd"}))};ae.defaultProps={name:"Balance"};var re=ae,ie=function(e){return o.a.createElement($.a,e,o.a.createElement("path",{d:"M21.515 10.131c-1.1.567-1.471.996-1.471 1.869s.388 1.348 1.471 1.869c.356.26.485.429.485.934v2.803c0 .766-.647 1.394-1.471 1.394H3.47C2.663 19 2 18.387 2 17.606v-2.803c0-.26.08-.674.517-.934.615-.2 1.456-.613 1.456-1.869 0-.965-.793-1.578-1.472-1.869-.452-.23-.485-.52-.485-.934V6.394C2.016 5.628 2.663 5 3.487 5H20.53C21.337 5 22 5.613 22 6.394v2.803c0 .398 0 .628-.485.934zM10.5 12c0 .834.672 1.5 1.5 1.5.834 0 1.5-.672 1.5-1.5 0-.834-.672-1.5-1.5-1.5-.834 0-1.5.672-1.5 1.5zm5 0c0 .834.672 1.5 1.5 1.5.834 0 1.5-.672 1.5-1.5 0-.834-.672-1.5-1.5-1.5-.834 0-1.5.672-1.5 1.5zm-10 0c0 .834.672 1.5 1.5 1.5.834 0 1.5-.672 1.5-1.5 0-.834-.672-1.5-1.5-1.5-.834 0-1.5.672-1.5 1.5z"}))};ie.defaultProps={name:"Coupon"};var oe=ie,ce=n(1456),se=n(804),le=n(1457),ue=n(1458),de=n(2609),he=n(2590),fe=n(1459),pe=n(1460),be=n(136),me=Object.assign;var ve=function(e){return o.a.createElement(be.a,me({width:"18",height:"18",viewBox:"0 0 18 18"},e),o.a.createElement("path",{d:"M9 1.5c2.835 0 5.152 2.195 5.247 4.949l.003.176v.253A2.25 2.25 0 0115.75 9v2.25a2.25 2.25 0 01-1.5 2.122v.257c0 .547-.2 1.073-.557 1.482l-.102.109-1.06 1.06a.75.75 0 01-1.124-.99l.063-.07 1.06-1.061a.75.75 0 00.213-.432l.007-.098V13.5H12a.75.75 0 01-.75-.75V7.5a.75.75 0 01.75-.75h.75v-.125C12.75 4.628 11.076 3 9 3 6.98 3 5.34 4.541 5.254 6.464l-.004.286H6a.75.75 0 01.743.648l.007.102v5.25a.75.75 0 01-.648.743L6 13.5H4.5a2.25 2.25 0 01-2.245-2.096l-.005-.154V9c0-.98.626-1.814 1.5-2.122v-.253C3.75 3.79 6.105 1.5 9 1.5z",fillRule:"evenodd"}))},ge=[{key:"star",number:void 0,label:"我的收藏",url:"/collections/mine",icon:X.a,visible:!0},{key:"questionList",number:void 0,label:"我关注的问题",icon:te,visible:!0},{key:"invite",number:void 0,label:"我的邀请",url:"/question/invited",icon:ne.a,visible:!0},{key:"balance",number:void 0,label:"我的余额",url:"/balance",icon:re,visible:!1},{key:"coupon",number:void 0,label:"我的礼券",url:"/coupon",icon:oe,visible:!1},{key:"service",number:void 0,label:"站务中心",url:"/community",icon:ce.a,visible:!0},{key:"help-center",number:void 0,label:"帮助中心",url:"/help-center",icon:ve,visible:!0},{key:"copyright",number:void 0,label:"版权服务中心",url:"/copyright",icon:se.a,visible:!0}],Oe=[{key:"live",number:void 0,label:"Live",url:"/lives",icon:le.a,color:"#ffcf00",visible:!0},{key:"pub",number:void 0,label:"书店",url:"/pub/",icon:ue.a,color:"#43d480",visible:!0},{key:"org",number:void 0,label:"圆桌",url:"/roundtable",icon:de.a,color:"#0066FF",visible:!0},{key:"edit",number:void 0,label:"专栏",url:"//zhuanlan.zhihu.com",icon:he.a,color:"#0f88eb",visible:!0},{key:"infinity",number:void 0,label:"付费咨询",url:"/consult",icon:fe.a,color:"#5478f0",visible:!0},{key:"wiki",number:void 0,label:"百科",url:"/wiki",icon:pe.a,color:"#5868D1",visible:!0}];function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(j.a)(e);if(t){var r=Object(j.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(O.a)(this,n)}}var ye=function(e){Object(g.a)(n,e);var t=je(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleLog=function(e,t,n){var a=Oe.find((function(e){return e.url===n})).label;S.a.trackEvent(e.target,{action:"OpenUrl",element:"Link",name:t,id:2745},{button:{text:a},link:{url:n}})},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.categoryData,a=t.children,i=n.filter((function(e){return e.visible})).map((function(t){var n=t.key,a=t.label,i=t.url,o=t.color,c=t.icon;return Object(r.b)("li",{className:"GlobalSideBar-categoryItem",children:Object(r.c)(Z.a,{preset:"plain",href:i,target:"_blank",title:a,onClick:function(t){return e.handleLog(t,n,i)},style:{color:o},"data-za-not-track-link":!0,children:[Object(r.b)("span",{className:"GlobalSideBar-categoryIcon",children:Object(r.b)(c,{})}),Object(r.b)("span",{className:"GlobalSideBar-categoryLabel",children:a})]})},n)}));return Object(r.c)(R.d,{className:"GlobalSideBar-category",role:"complementary","aria-label":"分类入口",children:[a,Object(r.b)("ul",{className:"GlobalSideBar-categoryList",children:i})]})}}]),n}(i.Component);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(j.a)(e);if(t){var r=Object(j.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(O.a)(this,n)}}var Ce=function(e){Object(g.a)(n,e);var t=we(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).createClickButtonHandler=function(e){return function(t){S.a.trackEvent(t.target,{action:"OpenUrl",id:2746},{button:{text:e}})}},e}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(e){var t=function(e){return e.navData.filter((function(e){return e.visible})).length};this.props.onHeightChange&&t(e)!==t(this.props)&&this.props.onHeightChange()}},{key:"render",value:function(){var e=this,t=this.props.navData.filter((function(e){return e.visible})).map((function(t){var n=t.key,a=t.label,i=t.icon,o=t.url,c=t.number;return Object(r.b)("li",{className:h()("GlobalSideBar-navItem","GlobalSideBar-".concat(n,"Item")),children:Object(r.c)(Z.a,{preset:"plain",to:o,target:"_blank",className:"GlobalSideBar-navLink",activeClassName:"GlobalSideBar-navLink--active",onClick:e.createClickButtonHandler(a),"data-za-not-track-link":!0,children:[Object(r.b)(i,{className:"GlobalSideBar-navIcon",size:18}),Object(r.b)("span",{className:"GlobalSideBar-navText",children:a}),"number"==typeof c&&Object(r.b)("span",{className:"GlobalSideBar-navNumber",children:Object(E.formatNumber)(c)})]})},n)}));return Object(r.b)(R.d,{role:"complementary","aria-label":"更多分类入口",children:Object(r.b)("ul",{className:"GlobalSideBar-navList",children:t})})}}]),n}(i.Component);var Ae=function(e){var t=e.items.filter((function(e){return e.visible}));return t.length?Object(r.b)("div",{className:"GlobalBalance",role:"complementary","aria-label":"余额礼券状态",children:t.map((function(e){return Object(r.b)("a",{className:"GlobalBalance-item",href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.label},e.key)}))}):null},ke=n(1011);var Se=function(e){var t=e.position,n=e.delay,a=e.onLoadBanner,i=e.onHideImage,o=e.onHeightChange;return Object(r.b)(ke.a,{location:t,delay:n,onLoadBanner:a,onHideImage:i,onHeightChange:o,isMobile:!1})},Re=n(916);var Ee=function(e){var t=e.defaultItems,n=e.onHeightChange,a=Object(i.useState)(t.map((function(e){return Object.assign(Object.assign({},e),{},{status:"loading"})}))),o=Object(y.a)(a,2),c=o[0],s=o[1],l=Object(i.useCallback)((function(e,t){s(c.map((function(n){return e(n)?t(n):n})))}),[c]);return Object(r.b)(Re.a,{className:"GlobalSideBar-carouselAD",items:c.filter((function(e){return"hidden"!==e.status})),loopStyle:"startover",resetOffsetWhenItemsLengthChange:!0,renderItem:function(e){var t=e.position,a=e.delay;return Object(r.b)(Se,{position:t,delay:a,onLoadBanner:function(e){l((function(e){return e.position===t}),(function(t){return Object.assign(Object.assign({},t),{},{status:e?"loaded":"hidden"})}))},onHideImage:function(){l((function(e){return e.position===t}),(function(e){return Object.assign(Object.assign({},e),{},{status:"hidden"})}))},onHeightChange:n},t)},interval:5e3,css:{".Carousel-bullets":{bottom:17}},onBulletClick:function(e,t){S.a.trackEvent(null,{id:9512,name:String(t+1)})}})},Ne=n(146);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(j.a)(e);if(t){var r=Object(j.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(O.a)(this,n)}}var Te=function(){return n.e(30).then(n.bind(null,2687))},Be=function(e){Object(g.a)(n,e);var t=Ie(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(r.b)(Ne.a,Object.assign({getComponent:Te},this.props))}}]),n}(i.Component),xe=n(907),Qe={url:"https://www.zhihu.com/knowledge-plan/education?utm_source=global_event_banner",imageUrl:"https://pic4.zhimg.com/80/v2-f37157090d166b6f23fa4e401e76c553_r.png",startTime:1584892800,endTime:1585151999,officePreview:!1,zaCardShowId:8227,zaClickId:8228};var Me=function(){var e=Object(i.useRef)(),t=function(){var e=Qe,t=e.startTime,n=e.endTime,a=e.officePreview,r=Object(xe.a)()&&a||Date.now()>=1e3*t&&Date.now()<=1e3*n;return Object.assign(Object.assign({},e),{},{enable:r})}(),n=t.url,a=t.imageUrl,o=t.zaCardShowId,c=t.zaClickId,s=t.enable;return Object(i.useEffect)((function(){o&&s&&S.a.trackCardShow(null,{id:o})}),[o,s]),s?Object(r.b)(R.d,{css:{display:"flex",flexDirection:"column"},children:Object(r.b)("a",{href:n,target:"_blank",rel:"noopener noreferrer",ref:e,"data-za-detail-view-id":c,css:{fontSize:0},children:Object(r.b)("img",{src:a,width:"100%",alt:""})})}):null},_e=n(380),De=n(396),Pe=n(995);var qe=Object(_e.a)(null)((function(){var e=Object(i.useRef)(),t=Object(c.useDispatch)(),n=function(){var e=Object(c.useSelector)((function(e){var t,n;return null===(t=e.topstory)||void 0===t||null===(n=t.banner)||void 0===n?void 0:n.right})),t=Object(xe.a)();return e&&Object(Pe.a)(e,t)?e:null}();if(Object(i.useEffect)((function(){t(Object(De.g)("right"))}),[t]),Object(i.useEffect)((function(){S.a.trackCardShow(null,{id:8227})}),[n]),!n)return null;var a=n.url,o=n.imageUrl;return Object(r.b)("a",{href:a,target:"_blank",rel:"noopener noreferrer",ref:e,"data-za-detail-view-id":8228,css:{height:"100px",display:"block"},children:Object(r.b)("img",{src:o,width:"100%",height:"100%",css:{objectFit:"cover"},alt:"打开活动页"})})})),Le=n(2578),ze=n(831),Ue=Object.assign;var Fe=function(e){return o.a.createElement(be.a,Ue({width:"24",height:"24",viewBox:"0 0 24 24"},e),o.a.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10 0 1.49-.326 2.902-.91 4.172v4.464a.455.455 0 01-.454.455h-4.464A9.963 9.963 0 0112 22C6.477 22 2 17.523 2 12S6.477 2 12 2zm0 1.818a8.182 8.182 0 103.753 15.454h3.52v-3.52A8.182 8.182 0 0012 3.819zm0 4.546a3.636 3.636 0 110 7.272 3.636 3.636 0 010-7.272z",fillRule:"evenodd"}))},He=n(421),Ve=function(){var e=Object(c.useDispatch)(),t=Object(i.useState)(1),n=Object(y.a)(t,2),a=n[0],o=n[1],s=Object(c.useSelector)((function(e){return e.club.explore.joinedClubs}))||{},l=s.data,u=void 0===l?[]:l,d=s.paging,h=(d=void 0===d?{}:d).totals,f=void 0===h?0:h,p=Math.ceil(f/4);Object(i.useEffect)((function(){e(Object(He.c)(!0,8))}),[e]),Object(i.useEffect)((function(){4*a!==u.length&&a!==p||e(Object(He.c)())}),[u.length,e,a,p]);var b=Object(i.useCallback)((function(e){window.open("/club/".concat(e))}),[]),m=Object(i.useCallback)((function(e){o("left"===e?1===a?1:a-1:a===p?p:a+1)}),[o,p,a]);if(0===u.length)return null;var v=u.slice(4*(a-1),4*a);return Object(r.c)("div",{className:"ClubSliderList",role:"complementary","aria-label":"圈子卡片",children:[Object(r.c)("div",{className:"ClubSliderList-header",children:[Object(r.b)(Fe,{className:"ClubSliderList-icon",size:17}),Object(r.b)("span",{children:"我的圈子"})]}),Object(r.b)("div",{className:"ClubSliderList-list",children:v.map((function(e){return Object(r.c)("div",{role:"button",tabIndex:0,onClick:function(){return b(e.id)},className:"ClubSliderList-item",children:[Object(r.b)("div",{className:"ClubSliderList-img",children:Object(r.b)("img",{src:e.avatar,alt:""})}),Object(r.b)("span",{className:"ClubSliderList-name",children:e.name})]},e.id)}))}),f>0&&Object(r.c)("div",{className:"ClubSliderList-pagination",children:[Object(r.b)("button",{className:"ClubSliderList-arrow",onClick:function(){return m("left")},children:Object(r.b)(Le.a,{center:!0,text:!0})}),Object(r.b)("span",{children:"".concat(a,"/").concat(p)}),Object(r.b)("button",{className:"ClubSliderList-arrow",onClick:function(){return m("right")},children:Object(r.b)(ze.a,{center:!0,text:!0})})]})]})},Ye=n(1015),We=n(952),Ge=n(1201),Je=n(138),Ke=n(1313),Ze=n(376),Xe=n(25),$e=["preset","omit"],et=function(e,t){return e.map((function(e){var n=t.find((function(t){return t.key===e.key}));return n?Object.assign(Object.assign({},e),n):e}))},tt=function(e){return e.topstory&&e.topstory.sidebar},nt=Object(l.createSelector)(tt,I.h,(function(e,t){return et(Oe,[e&&{key:"pub",number:e.latestAddedBookCount},e&&{key:"org",number:e.latestRoundtableCount},{key:"infinity",visible:!t}].filter(Boolean))})),at=Object(s.withRouter)(Object(u.compose)(Object(_e.a)(null),Object(Ze.b)({module:"RightSideBar"}))(Object(i.memo)(rt)));function rt(e){var t=e.preset,n=void 0===t?"old":t,o=e.omit,s=(o=void 0===o?{}:o).noNav,l=o.noWrite,u=o.noClub,d=o.noCreator,b=o.noBanner,m=o.noCategory,v=o.noAd,g=o.noCarouselAd,O=void 0===g||g,j=o.noBalance,y=void 0===j||j,w=o.noFooter,C=o.noAppBanner,A=Object(a.default)(e,$e),k=Object(c.useDispatch)(),S=Object(c.useSelector)(tt),R=Object(c.useSelector)(I.b),E=Object(c.useSelector)(nt),N=Object(Ge.b)(Ge.a.Question),T=function(e,t,n){return et(ge,[e&&{key:"star",number:e.unreadItemCountOfFollowedFavlist},t&&{key:"questionList",url:"/people/".concat(t.urlToken||t.id,"/following/questions"),number:t.followingQuestionCount},{key:"invite",url:n?"/creator/featured-question/invited":"/question/waiting?type=invite"},e&&{key:"balance",visible:!0},e&&{key:"coupon",visible:e.needShowGiftCertificate}].filter(Boolean))}(S,R,N),B=Object(c.useSelector)(I.h),x=Object(i.useRef)(null),Q=!B&&!s;Object(i.useEffect)((function(){!S&&R&&(k(Object(De.f)()),B||k(Object(Je.ub)())),Q&&k(Object(I.e)(["followingQuestionCount"]))}),[]);var M=Object(i.useCallback)((function(){var e,t;null===(e=x.current)||void 0===e||null===(t=e.check)||void 0===t||t.call(e)}),[]),_=We.a;"new"===n&&(_="div");var D=((null==A?void 0:A.location)||"").pathname,P=(void 0===D?"":D).startsWith("/question/waiting")?"QuestionWaiting":"GlobalHomePage";return Object(r.c)(_,{className:h()("GlobalSideBar","GlobalSideBar--".concat(n)),offset:Xe.i+10,ref:x,children:[!l&&B&&Object(r.b)(K,{preset:n,creatorQuestionRightPass:N}),!d&&Object(r.b)(Ke.a,{className:"GlobalSideBar-creator",iconStyle:"small",onHeightChange:M,showWallEProtectLink:"new"!==n,currentUser:R,curBlock:P}),!u&&R&&Object(r.b)(Ve,{}),B&&Object(r.b)(Be,{}),!b&&Object(r.b)(Me,{}),!m&&Object(r.b)(ye,{categoryData:E,children:!B&&Object(r.b)(qe,{})}),!y&&Object(r.b)(Ae,{items:T.filter((function(e){return["balance","coupon"].includes(e.key)}))}),!O&&Object(r.b)(Ee,{defaultItems:[{position:"new_home_up",key:"new_home_up",delay:0},{position:"new_home_bottom",key:"new_home_bottom",delay:1e3}],onHeightChange:M}),!v&&Object(r.b)(Se,{position:"new_home_up",onHeightChange:M}),Q&&Object(r.b)(Ce,{navData:T,onHeightChange:M}),!B&&!v&&Object(r.b)(Se,{position:"new_home_bottom",delay:1e3,onHeightChange:M}),!C&&Object(r.b)(Ye.a,{type:"home"}),!w&&Object(r.b)(f.a,{children:Object(r.b)(p.a,{showHelpCenter:!Q})})]})}},1011:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var a=n(36),r=n.n(a),i=n(19),o=n.n(i),c=n(20),s=n.n(c),l=n(23),u=n.n(l),d=n(16),h=n.n(d),f=n(83),p=n.n(f),b=n(22),m=n.n(b),v=n(2),g=n.n(v),O=n(3),j=n.n(O),y=n(7),w=n(993),C=n(994),A=n(1028),k=n(842),S=n(30),R=n(49),E=n.n(R),N=n(915),I=n(1048),T="https://www.zhihu.com",B={qihoo_pc_js:"".concat(T,"/inner_bottom_360.html"),baidu_pc_js:"u6559262",default:"".concat(T,"/inner_bottom.html")},x={qihoo_pc_js:"".concat(T,"/inner_top_360.html"),baidu_pc_js:"u6559261",default:"".concat(T,"/inner_top.html")},Q={qihoo_pc_js:"".concat(T,"/inner_top_360.html"),baidu_pc_js:"u6559261",default:"".concat(T,"/inner_top.html")},M={qihoo_pc_js:"".concat(T,"/inner_bottom_360.html"),baidu_pc_js:"u6559262",default:"".concat(T,"/inner_bottom.html")},_={qihoo_pc_js:"".concat(T,"/home_top_360.html"),baidu_pc_js:"u6559258",default:"".concat(T,"/home_top.html")},D={qihoo_pc_js:"".concat(T,"/home_bottom_360.html"),baidu_pc_js:"u6559260",default:"".concat(T,"/home_bottom.html")},P="".concat(T,"/home_bottom.html"),q={new_answer_down_sticky:B,new_answer_up:x,new_question_up:Q,new_question_down_sticky:M,new_home_up:_,new_home_bottom:D},L="https://www.zhihu.com/commercial_api/banners_v3/",z={new_home_up:"home_up",new_home_bottom:"home_bottom",new_answer_up:"answer_up",new_answer_down_sticky:"answer_down_sticky",new_question_up:"question_up",new_question_down_sticky:"question_down_sticky"},U=n(887),F=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=u()(this,(e=h()(t)).call.apply(e,[this].concat(r)))).state={item:null},n.getAdsenseSource=function(e){var t=n.props.location,a=n.state.item.template,r=q[t];return r[a||e]||r.default||P},n.trackImpression=function(){var e=n.state.item;if(e){var t=Object(w.a)(e).ad,a=t.impressionTracks,r=t.debugTracks,i={impressionTracks:a,viewTracks:t.viewTracks,debugTracks:r};Object(U.f)(n.card,i)}},n.loadBannerRequest=function(e){var t=e.id,a=e.location,r=e.query,i=e.onLoadBanner;Object(k.l)({id:t,location:a,query:r,url:"".concat(L).concat(z[a])}).then((function(e){i(e),e&&n.setState({item:Object(C.b)({adjson:e},"pccard")})}))},n.load=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=e.delay;clearTimeout(n.loadTimeout),t>0?n.loadTimeout=setTimeout((function(){n.loadBannerRequest(e)}),t):n.loadBannerRequest(e)},n.handleIframeLoad=function(){setTimeout(n.props.onHeightChange,300)},n.handleImageLoad=function(){var e=n.state.item;if(e){n.debugTracks("image_onload"),n.trackImpression();var t=Object(w.a)(e).creative,a=Object(k.e)(t,"asset.landingUrl","");S.a.trackEvent(p()(n),{action:"Load"},{link:{url:a}}),setTimeout(n.props.onHeightChange,300)}},n.debugTracks=function(e){var t=n.state.item;if(t){var a=Object(w.a)(t).ad.debugTracks,r=void 0===a?[]:a,i={et:e},o=E.a.stringify(i);r.map((function(e){return e?Object(k.v)(o?"".concat(e).concat(e.includes("?")?"&":"?").concat(o):e):null}))}},n.handleClose=function(){var e=n.state.item;if(e){var t=Object(w.a)(e).ad.closeTracks,a=void 0===t?[]:t;Object(U.b)(a),n.hideImage()}},n.handleLog=function(e){var t=n.state.item,a=Object(w.a)(t),r=a.ad,i=a.creative,o=r.clickTracks,c=void 0===o?[]:o,s=Object(k.e)(i,"asset.landingUrl","");S.a.trackEvent(e.target,{action:"OpenUrl",url:window.location.href},{link:{url:s}}),Object(U.a)(c)},n.hideImage=function(){var e=n.card.offsetHeight;n.card.style.height="".concat(e,"px"),n.timeout=setTimeout((function(){n.card.classList.add("Pc-card--hidden"),n.card.style.height=0,n.timeout=setTimeout((function(){n.props.onHideImage(),n.props.onHeightChange()}),300)}),17)},n}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.id,a=t.location,r=e.id,i=e.location;n===r&&a===i||(clearTimeout(this.timeout),this.setState({item:null}),this.load(e))}},{key:"render",value:function(){var e=this,t=this.state.item;if(!t)return null;var n=Object(w.a)(t),a=n.ad,r=void 0===a?{displayAdvertisingTag:"",template:""}:a,i=n.creative,o=void 0===i?{asset:{}}:i,c=r.expand.displayAdvertisingTag,s=r.template,l=o.asset,u=l.imgs,d=void 0===u?[]:u,h=l.landingUrl,f=void 0===h?"":h,p={title:"third_ad",className:"Banner-adsense",src:this.getAdsenseSource(s),adId:this.getAdsenseSource(s),scrolling:"no",frameBorder:"0",onLoad:this.handleIframeLoad};return g.a.createElement("div",{className:"Pc-card Card",ref:function(t){e.card=t}},g.a.createElement("a",{className:"Banner-link",href:f,target:"_blank",onClick:this.handleLog},Object(k.k)(s)?g.a.createElement(A.a,{value:p,template:s}):g.a.createElement(g.a.Fragment,null,c&&g.a.createElement("div",{className:"Banner-adTag"},"广告"),g.a.createElement("img",{className:"Banner-image",src:d[0],alt:"广告",onLoad:this.handleImageLoad,onError:function(){return e.debugTracks("image_onerror")},ref:function(t){e.image=t}}))),this.props.isMobile||g.a.createElement("div",{className:"Pc-card-button-close ",onClick:this.handleClose,"data-tooltip":"不再显示","data-tooltip-position":"bottom"},g.a.createElement(I.c,{name:"close",className:"Pc-card-button-close-svg "})))}}]),t}(v.Component);function H(e){return g.a.createElement(N.a,null,g.a.createElement(F,r()({},e,{data:Object(y.camelizeKeys)(e.data)})))}F.propTypes={id:j.a.string,location:j.a.string.isRequired,onLoadBanner:j.a.func,onHideImage:j.a.func,onHeightChange:j.a.func,isMobile:j.a.bool},F.defaultProps={isMobile:!1,onLoadBanner:function(){},onHideImage:function(){},onHeightChange:function(){}}},1015:function(e,t,n){"use strict";var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(2),h=n(833);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var p={unregistered:{url:"http://zhi.hu/BDXoI",qrcode:n(897)},home:{url:"http://zhi.hu/BDXoI",qrcode:n(897)},question:{url:"http://zhi.hu/BDXoI",qrcode:n(897)}},b=function(e){Object(i.a)(n,e);var t=f(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"renderContent",value:function(){var e=this.props.type;return Object(s.b)(h.d,{className:"AppBanner",children:Object(s.b)("a",{className:"AppBanner-link",href:p[e].url,children:Object(s.c)("div",{className:"AppBanner-layout",children:[Object(s.b)("img",{className:"AppBanner-qrcode",src:p[e].qrcode,alt:"QR Code of Downloading Zhihu App"}),Object(s.c)("div",{className:"AppBanner-content",children:[Object(s.b)("div",{className:"AppBanner-title",children:"下载知乎客户端"}),Object(s.b)("div",{className:"AppBanner-description",children:"与世界分享知识、经验和见解"})]})]})})})}},{key:"render",value:function(){return this.context.currentUser?null:this.renderContent()}}]),n}(d.Component);b.contextTypes={currentUser:u.a.object},b.propTypes={type:u.a.oneOf(Object.keys(p)),getSidebar:u.a.func},b.defaultProps={type:"unregistered",getSidebar:function(){return null}};t.a=b},1016:function(e,t,n){"use strict";var a=n(32),r=n(13),i=n(14),o=n(15),c=n(17),s=n(9),l=n(1),u=n(3),d=n.n(u),h=n(2),f=n(11),p=n.n(f),b=n(31),m=n(76),v=n.n(m),g=["className","disabled"];function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var j=function(e){Object(o.a)(n,e);var t=O(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).clearTimer=function(){a.timer&&window.clearInterval(a.timer)},a.handleClick=function(e){a.state.isCounting||a.startTiming(e)},a.state={countDownTime:e.countDownTime,isCounting:!1},a.isInitialState=!0,a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.startAtOnce&&this.startTiming()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.interceptTime,a=t.reStartTime,r=e.interceptTime,i=e.reStartTime;n!==r&&this.resetTiming(),a!==i&&(this.resetTiming(),this.startTiming())}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"resetTiming",value:function(){this.clearTimer(),this.setState({countDownTime:this.props.countDownTime,isCounting:!1})}},{key:"startTiming",value:function(e){var t=this,n=this.props,a=n.event,r=n.countDownEndEvent,i=null,o=function(){t.isInitialState=!1,t.setState({isCounting:!0}),t.timer=setInterval((function(){var e=t.state.countDownTime;e<=0?(r&&r(),t.resetTiming()):t.setState({countDownTime:e-1})}),1e3)};"function"==typeof a&&(i=a(e,o)),!1!==i&&o()}},{key:"renderText",value:function(){var e=this.props,t=e.initialText,n=e.resetText,a=e.countingText,r=this.state,i=r.countDownTime;return r.isCounting?a({count:i}):this.isInitialState?t:n||t}},{key:"render",value:function(){var e=v()(this.props,["initialText","resetText","countingText","startAtOnce","countDownTime","event","interceptTime","countDownEndEvent","reStartTime"]),t=e.className,n=e.disabled,r=Object(a.default)(e,g),i=this.state.isCounting;return Object(l.b)(b.c,Object.assign(Object.assign({className:p()("CountingDownButton",t,{"is-counting":i})},r),{},{onClick:this.handleClick,disabled:n||i,children:this.renderText()}))}}]),n}(h.Component);j.propTypes={countDownTime:d.a.number,startAtOnce:d.a.bool,initialText:d.a.string.isRequired,resetText:d.a.string,countingText:d.a.func.isRequired,event:d.a.func,countDownEndEvent:d.a.func,interceptTime:d.a.number,reStartTime:d.a.number},j.defaultProps={countDownTime:60,startAtOnce:!1,interceptTime:-1,reStartTime:-1};t.a=j},1021:function(e,t,n){"use strict";var a=n(1),r=n(94),i=n(68),o=n.n(i);t.a=function(e){return o()((function(t){var n=Object(r.i)().trackEvent;return Object(a.b)(e,Object.assign({trackEvent:n},t))}),e)}},1028:function(e,t,n){"use strict";var a=n(36),r=n.n(a),i=n(48),o=n.n(i),c=n(2),s=n.n(c);var l={baidu_pc_js:function(e){var t=e.value,n=void 0===t?{}:t,a=n.className,r=n.adId,i=n.onLoad,l=Object(c.useState)("_".concat(Math.random().toString(36).slice(2))),u=o()(l,1)[0];function d(){var e;(e=document.getElementById("baidu-ad-js"))||((e=document.createElement("script")).setAttribute("src","//cpro.baidustatic.com/cpro/ui/cm.js"),e.setAttribute("defer","defer"),e.setAttribute("id","baidu-ad-js"),document.body.appendChild(e)),window.slotbydup=window.slotbydup||[],window.slotbydup.push({id:r,container:u,async:!0}),i&&i()}return Object(c.useEffect)((function(){d()}),[d]),s.a.createElement("div",{id:u,className:"".concat(u," ").concat(a)})},goole_pc_js:function(e){var t=e.value;return s.a.createElement("iframe",r()({},t,{title:"google广告"}))},maozhua_pc_js:function(e){var t=e.value,n=void 0===t?{}:t;return s.a.createElement("iframe",r()({},n,{title:"猫爪广告"}))},ruoying_pc_js:function(e){var t=e.value,n=void 0===t?{}:t;return s.a.createElement("iframe",r()({},n,{title:"若影广告"}))}};t.a=function(e){var t=e.template,n=l[t];return s.a.createElement(n,e)}},1048:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n(951),r=(n(935),n(36)),i=n.n(r),o=n(2),c=n.n(o);n(894),n(896);n(895);n(969),n(970),n(971),n(972);function s(e){return c.a.createElement("svg",i()({xmlns:"http://www.w3.org/2000/svg"},e,{viewBox:"0 0 12 10"}),c.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(-2 -3)"},c.a.createElement("rect",{width:"16",height:"16"}),c.a.createElement("rect",{width:"12",height:"2",x:"2",y:"3",fill:"#9FADC7",fillRule:"nonzero",rx:"1"}),c.a.createElement("rect",{width:"12",height:"2",x:"2",y:"7",fill:"#9FADC7",fillRule:"nonzero",rx:"1"}),c.a.createElement("rect",{width:"7",height:"2",x:"2",y:"11",fill:"#9FADC7",fillRule:"nonzero",rx:"1"})))}function l(e){return c.a.createElement("svg",i()({xmlns:"http://www.w3.org/2000/svg"},e,{viewBox:"0 0 12 12"}),c.a.createElement("path",{fill:"#9FADC7",d:"M3,2.66666667 L13,2.66666667 C13.5522847,2.66666667 14,3.11438192 14,3.66666667 L14,12.6600825 C14,13.2123673 13.5522847,13.6600825 13,13.6600825 C12.7827311,13.6600825 12.5713728,13.5893212 12.3979007,13.4585037 L8.60209931,10.596043 C8.24569125,10.3272712 7.75430875,10.3272712 7.39790069,10.596043 L3.60209931,13.4585037 C3.16114346,13.791034 2.53410906,13.7031377 2.2015788,13.2621819 C2.07076131,13.0887097 2,12.8773515 2,12.6600825 L2,3.66666667 C2,3.11438192 2.44771525,2.66666667 3,2.66666667 Z",transform:"translate(-2 -2)"}))}n(936),n(937),n(938),t.c=a.a},1051:function(e,t,n){"use strict";var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(2),h=n(24),f=n(11),p=n.n(f),b=n(2593),m=n(31),v=n(844),g=n(255),O=n(67),j=n(821),y=n(30),w=n(26),C=n(1133),A=n(25);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var S=function(e){Object(i.a)(n,e);var t=k(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={modalShown:!1},e.handleSendMessage=function(){var t=e.props,n=t.onModalOpen,a=t.user.allowMessage,r=t.dispatch,i=t.doNotCheckAllowMessageSetting;a||void 0===a&&i?(e.setState({modalShown:!0}),n&&n()):r(Object(w.h)(A.U.blocked,"red")),y.a.trackEvent(Object(O.a)(e),{action:"Message",element:"Button",is_intent:!0})},e.handleCloseModal=function(){var t=e.props.onModalClose;e.setState({modalShown:!1}),t&&t()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.preset,a=e.color,r=e.icon,i=e.label,o=e.className,c=e.tooltip,l=e.tooltipPreset,u=this.state.modalShown,d="3d198a56310c02c4a83efb9f4a4c027e"===t.id;return Object(s.c)(s.a,{children:[Object(s.b)(m.c,{preset:n,color:a,className:o,icon:r,label:i,onClick:this.context.authRequired(this.handleSendMessage,d?A.W.serviceAccountMessage:A.W.message),"data-tooltip":c,"data-tooltip-preset":l}),Object(s.b)(C.a,{memberHashId:t.id,handleCloseModal:this.handleCloseModal,isModalShow:u})]})}}]),n}(d.Component);S.propTypes={onModalOpen:u.a.func,onModalClose:u.a.func},S.defaultProps={preset:"outline",color:"grey",icon:j.a,label:"发私信",doNotCheckAllowMessageSetting:!1},S.contextTypes={authRequired:u.a.func};var R=Object(h.connect)()(S),E=n(124);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var I=function(e){Object(i.a)(n,e);var t=N(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={reportModalShown:!1},e.handleShieldUser=function(){var t=e.props,n=t.user.urlToken,a=t.updateUserBlocking,r=t.showNotification;a(n,!1).then((function(){return r("屏蔽已取消")}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.user,r=a.urlToken,i=a.isBlocking,o=a.isOrg,c=t.canShowMutualFollowStatus,l=t.className,u=t.buttonClassName,d=t.onModalOpen,h=t.onModalClose,f=this.context.authRequired,O=this.state.reportModalShown,j=p()("MemberButtonGroup",l);return i?Object(s.c)("div",{className:j,children:[Object(s.c)(m.c,{className:u,preset:"primary",color:"red",onClick:this.handleShieldUser,children:[Object(s.b)(b.a,{center:!0,text:!0})," 已屏蔽"]}),!o&&Object(s.c)(m.c,{className:u,onClick:f((function(){e.setState({reportModalShown:!0}),d&&d()}),A.W.report),children:["举报用户",Object(s.b)(g.a,{shown:O,onClose:function(){e.setState({reportModalShown:!1}),h&&h()},type:"member",urlToken:r,zaEnabled:!0})]})]}):Object(s.c)("div",{className:j,children:[Object(s.b)(v.a,{id:r,type:n.type,gender:n.gender,isFollowing:n.isFollowing,isFollowed:n.isFollowed,canShowMutualFollowStatus:c,className:u,preset:v.a.PRESETS.primary}),Object(s.b)(R,{user:n,className:u,onModalOpen:d,onModalClose:h})]})}}]),n}(d.Component);I.contextTypes={authRequired:u.a.func},I.propTypes={user:u.a.object.isRequired,buttonClassName:u.a.string,onModalOpen:u.a.func,onModalClose:u.a.func};t.a=Object(h.connect)(null,{updateUserBlocking:E.n,showNotification:w.h})(I)},1056:function(e,t,n){"use strict";var a=n(1165),r=n.n(a),i=(n(35),"c3cef7c66a1843f8b3a9e6a1e3160e20");"".concat("z_").concat("c0"),"".concat("SZYUpkoc0tvY").concat("Xh0V2E2UTB").concat("UID096dwe");t.a=function(e,t){var n=Date.now(),a=new r.a("SHA-1","TEXT");return a.setHMACKey("d1b964811afb40118a12068ff74a12f4","TEXT"),a.update(e),a.update(i),a.update("com.zhihu.web"),a.update(String(n)),Object.assign({clientId:i,grantType:e,timestamp:n,source:"com.zhihu.web",signature:a.getHMAC("HEX")},t)}},1086:function(e,t,n){"use strict";var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(2),h=n.n(d),f=n(18),p=n(24),b=n(37),m=n(123),v=n(11),g=n.n(v),O=n(30),j=n(388),y=n(188),w=n(386),C=n(39),A=n.n(C),k=n(1021),S=n(136),R=Object.assign;var E=function(e){return h.a.createElement(S.a,R({width:"116",height:"116",viewBox:"0 0 116 116"},e),h.a.createElement("path",{d:"M58 106c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm0-5c23.748 0 43-19.252 43-43S81.748 15 58 15 15 34.252 15 58s19.252 43 43 43zm-7.495-32.502L80.113 38.89a3.017 3.017 0 014.262-.017c1.184 1.176 1.17 3.075-.015 4.26l-31.71 31.71c-1.183 1.182-3.096 1.194-4.27.02l-12.52-12.52a2.997 2.997 0 01-.008-4.24 2.996 2.996 0 014.242.008L50.507 68.5z"}))},N=Object.assign;var I=function(e){return h.a.createElement(S.a,N({width:"116",height:"116",viewBox:"0 0 116 116"},e),h.a.createElement("path",{d:"M58 106c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm0-5c23.748 0 43-19.252 43-43S81.748 15 58 15 15 34.252 15 58s19.252 43 43 43zm-4-19c0-2.21 1.795-4 4-4 2.21 0 4 1.795 4 4 0 2.21-1.795 4-4 4-2.21 0-4-1.795-4-4zm1-48.993A3.006 3.006 0 0158 30c1.657 0 3 1.334 3 3.007v36.986A3.006 3.006 0 0158 73c-1.657 0-3-1.334-3-3.007V33.007z",fillRule:"evenodd"}))},T=Object.assign;var B=function(e){return h.a.createElement(S.a,T({width:"52",height:"52",fill:"none"},e),h.a.createElement("mask",{id:"id-320414155-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},h.a.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),h.a.createElement("g",{mask:"url(#id-320414155-a)"},h.a.createElement("path",{fill:"#06F",d:"M0 0l52 52V0H0z"}),h.a.createElement("path",{fill:"#fff",d:"M22.125 4h13.75A4.125 4.125 0 0140 8.125v27.75A4.125 4.125 0 0135.875 40h-13.75A4.125 4.125 0 0118 35.875V8.125A4.125 4.125 0 0122.125 4zm6.938 34.222c1.139 0 2.062-.945 2.062-2.11 0-1.167-.923-2.112-2.063-2.112-1.139 0-2.062.945-2.062 2.111 0 1.166.923 2.111 2.063 2.111zM21 8.333v24h16v-24H21z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{fill:"#fff",d:"M46.996 15.482L39 19.064l-7.996-3.582A1.6 1.6 0 0132.6 14h12.8a1.6 1.6 0 011.596 1.482zM47 16.646V24.4a1.6 1.6 0 01-1.6 1.6H32.6a1.6 1.6 0 01-1.6-1.6v-7.754l8 3.584 8-3.584z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{fill:"#06F",d:"M31 15.483v1.17l8 3.577 8-3.577v-1.17l-8 3.581-8-3.581z"})))};function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var Q={1:"a",2:"b",3:"c"};var M=function(e){Object(i.a)(n,e);var t=x(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).cancelCheckQrcodeScanStatus=function(){r.timer&&window.clearInterval(r.timer)},r.checkQrcodeScanStatus=function(e){var t=r.props,n=t.checkQrcodeScanStatus,a=t.trackEvent,i=t.isSignPage;r.timer=setInterval((function(){n({token:e}).then((function(e){var t;null!==(t=e.payload)&&void 0!==t&&t.accessToken&&!i&&(null==a||a({block:"qrcode_loginSuccess"}))}))}),2e3)},r.handleChangestatus=function(e,t){r.setState({status:e}),"init"!==e||t||r.getToken()},r.handleChangeLoginType=function(){var e=r.props.onChangeType;r.cancelCheckQrcodeScanStatus(),e()},r.initTips=function(){var e=r.props,t=e.guideType,n=e.isInSignPage,a=e.isBlockType,i=r.state.enableSwitchGuide,o=!(n&&["2","3"].includes(t)||a),c=i?7300:1e3;i&&(r.showSwitchGuideTimeout=setTimeout((function(){r.setState({showSwitchGuide:!0}),r.hideSwitchGuideTimeout=setTimeout((function(){r.setState({showSwitchGuide:!1})}),3e3)}),1e3)),o&&(r.showTipsTimeout=setTimeout((function(){r.setState({showTips:!0}),r.hideTipsTimeout=setTimeout((function(){r.setState({showTips:!1})}),5e3)}),c))},r.state={type:"password",status:"init",errorMessage:"",showTips:!1,showSwitchGuide:!1,enableSwitchGuide:r.props.isInSignPage&&["1","2","3"].includes(r.props.guideType),guideTypeSymbol:Q[r.props.guideType]||"d"},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.isInSignPage,t=this.state.guideTypeSymbol;e&&O.a.trackCardShow(null,{id:9214,name:t}),this.getToken().then(this.initTips)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.qrcodeLoginToken,a=t.qrcodeLoginScanStatus,r=e.qrcodeLoginToken,i=e.qrcodeLoginScanStatus,o=e.qrcodeLoginError,c=e.qrcodeLoginReturnNewToken;""!==r&&n!==r?(this.cancelCheckQrcodeScanStatus(),"init"!==this.state.status&&this.handleChangestatus("init",!0),this.checkQrcodeScanStatus(r)):a!==i?2!==i&&this.handleChangestatus(1===i?"success":"init",c||1===a&&0===i):o&&o.code&&(this.cancelCheckQrcodeScanStatus(),40321===o.code&&this.setState({status:"error",errorMessage:o.message}))}},{key:"componentWillUnmount",value:function(){this.cancelCheckQrcodeScanStatus(),clearTimeout(this.showTipsTimeout),clearTimeout(this.hideTipsTimeout),clearTimeout(this.showSwitchGuideTimeout),clearTimeout(this.hideSwitchGuideTimeout)}},{key:"getToken",value:function(){return this.props.getQrcodeLoginToken()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.qrcodeLoginToken,r=t.guideType,i=t.isInSignPage,o=t.showSwitchTypeIcon,c=t.isBlockType,l=this.state,u=l.status,h=l.errorMessage,f=l.showTips,p=l.showSwitchGuide,b=l.enableSwitchGuide,v=l.guideTypeSymbol,O=null;return O="init"===u?Object(s.c)("div",{className:"Qrcode-content",children:[Object(s.b)("div",{className:g()("Qrcode-img",{"Qrcode-img--hover":f}),children:a?Object(s.c)(s.a,{children:[Object(s.b)("img",{className:"Qrcode-qrcode",width:"150",height:"150",src:"//".concat(A.a.wwwHost,"/api/v3/account/api/login/qrcode/").concat(a,"/image").concat(i?"?utm_campaign=internal&utm_medium=qr&utm_source=login&utm_term=force_launch&utm_content=qrscan".concat(v):""),alt:"二维码"}),Object(s.b)("img",{alt:"使用手机知乎 APP，打开我的页面，点击左上角扫一扫，可以扫描本页的二维码",className:"Qrcode-tips",src:"https://pic1.zhimg.com/80/v2-3ca9dfefdc7ab9034c123abd69a57ae0.png"})]}):Object(s.b)(j.a,{count:3})}),"3"===r?Object(s.c)("p",{children:["使用"," ",Object(s.b)("a",{href:"https://www.zhihu.com/app/",target:"_blank",rel:"noopener noreferrer",children:"知乎 App"})," ","| 微信 扫一扫登录"]}):Object(s.c)("div",{className:"Qrcode-guide-message",children:[c&&Object(s.b)("div",{className:"Qrcode-title",children:"扫码登录"}),Object(s.c)("p",{children:["打开",Object(s.c)("a",{href:"https://www.zhihu.com/app/",target:"_blank",rel:"noopener noreferrer",children:[" ","知乎 App"]})]}),Object(s.b)("p",{children:"在「我的」页面顶部打开扫一扫"}),Object(s.b)("p",{children:"如扫码异常请下载最新版客户端"})]})]}):"success"===u?Object(s.c)(d.Fragment,{children:[Object(s.c)("div",{className:"Qrcode-content Qrcode-success",children:[Object(s.b)("div",{className:"Qrcode-scanResultStaus",children:Object(s.b)(E,{fill:"#2db370",size:58})}),Object(s.b)("p",{className:"Qrcode-scanResultTips",children:"扫描成功"}),Object(s.b)("p",{children:"请在手机上「确认登录」"})]}),Object(s.b)("div",{className:"Qrcode-cutButton",children:Object(s.b)("span",{role:"button",tabIndex:0,onClick:function(){return e.handleChangestatus("init")},children:"返回二维码"})})]}):Object(s.c)("div",{className:"Qrcode-content Qrcode-failure",children:[Object(s.b)("div",{className:g()({"Qrcode-scanResultStaus":c}),children:Object(s.b)(I,{fill:"#ffaa00",size:58})}),c&&Object(s.b)("p",{className:"Qrcode-scanResultTips",children:"扫描失败"}),Object(s.b)("p",{children:h})]}),Object(s.c)("div",{className:g()("Qrcode-container",n),children:[b&&Object(s.b)(m.Box,{color:"GBL01A",fontSize:"14px",height:"40px",width:"260px",mt:"-24px",mx:"auto",mb:"15px",css:function(e){return{textAlign:"center",lineHeight:"40px",backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.1),borderRadius:"20px",borderTopRightRadius:"0",transformOrigin:"top right",transform:"scale(".concat(p?"1":"0",")"),opacity:p?"1":"0",transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1), opacity 300ms linear"}},children:"点击使用手机号、帐号密码登录"}),Object(s.b)("div",{className:"Qrcode-title",children:"扫码登录"}),O,o&&Object(s.b)(B,{onClick:this.handleChangeLoginType})]})}}]),n}(d.Component);M.propTypes={type:u.a.string,isShowPasswordLogin:u.a.bool,onChangeType:u.a.func,getQrcodeLoginToken:u.a.func,checkQrcodeScanStatus:u.a.func,isInSignPage:u.a.bool,showSwitchTypeIcon:u.a.bool,isBlockType:u.a.bool},M.defaultProps={qrcodeLoginToken:"",qrcodeLoginScanStatus:"",onChangeType:function(){},showSwitchTypeIcon:!0,isBlockType:!1};t.a=Object(f.compose)(b.withRouter,k.a,Object(p.connect)((function(e,t){var n=e.login;return{qrcodeLoginToken:n.qrcodeLoginToken,qrcodeLoginTokenExpires:n.qrcodeLoginTokenExpires,qrcodeLoginScanStatus:n.qrcodeLoginScanStatus,qrcodeLoginError:n.qrcodeLoginError,qrcodeLoginReturnNewToken:n.qrcodeLoginReturnNewToken,edition:Object(y.b)(e),guideType:Object(y.a)(e,"web_login"),isSignPage:["/signin","/signup"].includes(t.router.location.pathname)}}),{getQrcodeLoginToken:w.c,checkQrcodeScanStatus:w.a}))(M)},1089:function(e,t,n){"use strict";var a=n(2),r=n(37),i=Object(a.createContext)({}),o=n(118);t.a=Object(r.withRouter)((function(e){var t=e.to,n=e.router,r=Object(a.useContext)(i);return r.url||(r.url=t),Object(a.useEffect)((function(){Object(o.isAbsoluteUrl)(t)?window.location.replace(t):n.replace(t)}),[n,t]),null}))},1110:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),r=n.n(a),i=n(136),o=Object.assign;var c=function(e){return r.a.createElement(i.a,o({width:"52",height:"60",fill:"none",viewBox:"0 0 52 60"},e),r.a.createElement("path",{fill:"#121212",d:"M28.052 54.284c-1.881 0-3.76.015-5.638 0a2.041 2.041 0 00-1.36.464 607.935 607.935 0 01-5.391 4.22 4.752 4.752 0 01-.834.539 1.566 1.566 0 01-2.15-1.844c.287-.885.573-1.764.893-2.631.19-.504.184-.716-.46-.816-2.357-.361-4.407-1.312-5.856-3.307a9.136 9.136 0 01-1.526-3.58c-.117-.572-.286-.546-.781-.38-.75.255-.94.681-.722 1.391.05.187.07.38.057.573a1.186 1.186 0 01-.967 1.237 1.146 1.146 0 01-1.395-.707c-.137-.31-.226-.501-.632-.49a1.21 1.21 0 01-1.203-.842c-.226-.555.017-.993.404-1.334.286-.263.286-.427.08-.75a1.229 1.229 0 01.286-1.718 1.175 1.175 0 011.652.243c.352.419.65.413 1.16.272 1.577-.438 2.368-1.305 2.388-3.04.017-1.486.415-2.96.592-4.447.19-1.577-.12-3.132-.309-4.687-.246-2.004-.572-4.008-.89-5.99-.163-1.067.527-1.755 1.589-1.574 1.343.223 1.325.22 1.506-1.146.269-2.027.54-4.051.859-6.07a1.323 1.323 0 00-.627-1.491c-2.374-1.638-3.568-4.052-4.06-6.835-.556-3.083.779-5.463 3.035-7.41C10.008.188 12.73-.199 15.592.082c1.612.138 3.19.556 4.66 1.234a6.373 6.373 0 012.577 2.072c.364.525.773.65 1.366.648 5.234-.02 10.465 0 15.696 0 2.13 0 4.097.495 5.775 1.875 2.448 2.004 3.341 4.644 3.07 7.73a2.295 2.295 0 01-.05.287c-.211 1.145-.252 1.987.86 2.975a5.4 5.4 0 01.463 7.381 16.1 16.1 0 01-2.64 2.694 1.59 1.59 0 00-.658 1.114c-.724 5.225-1.52 10.44-2.176 15.673-.647 5.191-4.089 9.18-9.08 10.307a13.87 13.87 0 01-3.192.238h-4.208l-.003-.026z"}),r.a.createElement("path",{fill:"#FEFEFE",d:"M14.872 57.128c.53-1.552.971-2.9 1.452-4.232.163-.453 0-.53-.4-.533-.86 0-1.719-.023-2.578-.083-1.614-.114-2.949-.839-4.094-1.95a1.63 1.63 0 01-.51-1.325c.055-1.117.075-2.236.075-3.353a.736.736 0 01.59-.83c.615-.178 1.216-.407 1.82-.622.53-.186.77-.572.61-1.114-.171-.572-.644-.638-1.145-.492-.386.109-.767.252-1.145.372-.484.155-.722 0-.71-.535.023-1.068 0-2.139.029-3.21.06-3.533-.396-7.02-.931-10.502-.023-.14-.052-.286-.066-.42-.054-.642.103-.791.727-.636 1.315.32 2.64.604 3.934.999 2.005.613 3.995.438 5.97-.12 2.365-.67 4.558-1.767 6.769-2.812a1.245 1.245 0 00.724-1.145c.086-1.257.192-2.514.286-3.768.058-.733.22-.86.897-.573 1.95.753 3.902 1.5 5.838 2.29.838.349 1.774.38 2.634.09 2.075-.67 4.017-1.695 6.02-2.537.894-.367.923-.367 1.29.55.638 1.586 1.245 3.183 1.923 4.755.23.533.095.833-.317 1.145a45.216 45.216 0 01-5.492 3.57c-1 .556-1.06.682-.859 1.822 1.005 5.483 1.46 11.026 1.867 16.575a1.45 1.45 0 01-.527 1.302c-1.958 1.793-4.263 2.577-6.903 2.577-3.722-.034-7.421 0-11.132 0a1.72 1.72 0 00-1.2.45c-1.723 1.414-3.516 2.78-5.446 4.295z"}),r.a.createElement("path",{fill:"#06F",d:"M38.851 18.987a3.811 3.811 0 00-.048-.438c-.34-1.406.043-2.505 1.23-3.401.702-.53.734-1.111.353-1.684-.38-.573-.936-.687-1.74-.286-.287.146-.359.086-.427-.19a1.897 1.897 0 00-.255-.572 1.123 1.123 0 00-1.369-.49 1.194 1.194 0 00-.83 1.275c.028.253.073.505.135.753-.439-.06-.828-.287-1.26-.104a1.189 1.189 0 00-.81.911 1.042 1.042 0 00.498 1.168c.47.286.962.513 1.457.745a.658.658 0 01.472.624c.03.784.092 1.569.16 2.348a.552.552 0 01-.392.65 3.398 3.398 0 01-2.811.06c-2.274-.96-4.581-1.821-6.892-2.712-1.165-.452-1.844-.034-1.955 1.206-.138 1.514-.287 3.029-.375 4.55a.97.97 0 01-.613.936c-2.156.996-4.312 2.004-6.671 2.436a7.73 7.73 0 01-3.25-.071c-.902-.212-1.792-.479-2.697-.668-.432-.088-.527-.286-.47-.681.338-2.306.664-4.612.977-6.918.051-.386.22-.5.572-.403a2.817 2.817 0 001.55-.029c.59-.157.981.055 1.394.438a9.752 9.752 0 003.85 2.22c.994.285 1.492-.133 1.298-1.146-.172-.885-.315-1.778-.533-2.654a1.199 1.199 0 01.4-1.312 21.19 21.19 0 003.31-4.008c.986-1.526 1.518-3.17 1.146-5.005-.1-.5.074-.607.541-.607 5.016.014 10.036 0 15.052.014 2.05 0 3.89.573 5.322 2.14 1.55 1.703 1.781 3.721 1.604 5.926-.115 1.412-.627 2.15-2.079 2.577-1.786.521-3.453 1.451-5.17 2.204a1.43 1.43 0 01-.674.198z"}),r.a.createElement("path",{fill:"#FEFEFE",d:"M17.928 18.369c-1.045-.361-1.773-1.045-2.506-1.718-.38-.35-.821-.573-1.354-.47-2.256.484-3.862-.704-5.28-2.167-1.775-1.835-2.64-4.112-2.27-6.646.395-2.7 3.238-5.193 5.987-5.471 2.206-.249 4.44.04 6.51.842 3.396 1.328 4.53 4.612 2.65 7.73a18.546 18.546 0 01-3.723 4.387 1.19 1.19 0 00-.441 1.371c.183.673.278 1.377.427 2.142z"}),r.a.createElement("path",{fill:"#06F",d:"M42.013 45.892a154.544 154.544 0 00-.917-9.388 72.47 72.47 0 00-.632-4.157.701.701 0 01.389-.86c1.01-.623 2.004-1.273 3.012-1.906.175-.109.355-.355.555-.238.2.118.106.433.078.653a1194.67 1194.67 0 01-.825 5.927c-.435 3.008-.877 6.017-1.326 9.027a1.65 1.65 0 01-.334.942z"}),r.a.createElement("path",{fill:"#B7B7B6",d:"M45.351 20.628c-.286-.287-.424-.47-.364-.719 0-.037.155-.089.166-.074.159.232.229.513.198.793z"}),r.a.createElement("path",{fill:"#121212",d:"M25.105 32.77c.029 1.146-.587 1.776-1.718 1.801-1.13.026-1.958-.738-1.966-1.872-.01-1.134.835-1.835 2.164-1.855 1.08-.015 1.477.503 1.52 1.926z"}),r.a.createElement("path",{fill:"#444",d:"M14.326 6.69c.206-.165.42-.318.644-.458a.965.965 0 011.414.352c.454.783.784 1.63.98 2.514.12.455-.212.518-.516.59-.303.071-.627.134-.722-.318-.111-.533-.206-1.074-.369-1.595-.094-.306-.157-.787-.676-.621-.475.149-.572.498-.372.962.22.527.375 1.076.59 1.603.26.641-.24.747-.621.873s-.9.407-1.117-.286a39.818 39.818 0 01-1.076-4.28c-.118-.573.312-.665.701-.782.39-.117.69-.054.807.418.086.346.09.719.333 1.028zm-3.207 4.217l1.145-.426c.23-.08.427-.058.53.197a.384.384 0 01-.057.452.385.385 0 01-.132.092c-.83.41-1.704.722-2.606.93-.535.113-.81-.285-.63-.858.264-.836.573-1.655.88-2.508-.398-.092-.74.114-1.094.2-.223.054-.43.089-.544-.172a.425.425 0 01.215-.601 5.775 5.775 0 012.56-.504c.497.023.66.407.506.885-.235.71-.478 1.426-.773 2.313zm7.753-1.852c-.346.051-.55-.115-.658-.467-.18-.573-.287-1.145-.427-1.718-.183-.716.25-.887.75-1.034.553-.163.684.255.822.645.137.39.303.859.452 1.271.301.845-.003 1.277-.939 1.303z"}),r.a.createElement("path",{fill:"#4A4B4A",d:"M18.045 3.666a.925.925 0 01.899.925.873.873 0 01-.934.893.86.86 0 01-.89-.901c.034-.582.39-.848.925-.917z"}))}},1118:function(e,t,n){"use strict";var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(2),h=n(123),f=n(182),p=n(377),b=n(2620),m=n(839),v=n(854),g=n(851),O=n(844),j=n(847),y=n(855),w=n(376);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var A=function(e){Object(i.a)(n,e);var t=C(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.favlist,r=t.favlist,i=r.id,o=r.type,c=r.title,l=r.updatedTime,u=r.answerCount,d=r.followerCount,w=r.isFollowing,C=r.isPublic,A=r.creator,k=void 0===A?{}:A,S=r.commentCount,R=t.status,E=t.action,N=t.lastreadTouchable,I=t.zaInfos,T=I.follow,B=I.options,x=t.renderOptions,Q=this.state,M=Q.commentsShown,_=Q.commentsAutoFocus,D=Q.commentPattern,P="/collection/".concat(i),q=Object(s.b)("a",{href:P,target:"_blank",rel:"noopener noreferrer",children:c});if(n===m.c.plain)return Object(s.b)(m.e,{data:a,link:P,title:q});var L={id:i,type:o};return n===m.c.default?Object(s.b)(m.e,{data:a,link:P,title:Object(s.c)(h.Flex,{alignItems:"center",children:[q,!C&&Object(s.b)(h.Text,{color:"GBL05A",ml:".3em",children:Object(s.b)(b.a,{center:!0,size:18})})]}),meta:R||Object(s.c)(m.d,{children:["".concat(Object(f.toDateString)(l)," 更新"),"".concat(Object(p.formatNumber)(u)," 条内容"),"".concat(Object(p.formatNumber)(d)," 人关注")]}),extra:E}):Object(s.c)(m.e,{data:a,link:P,onRef:function(t){e.contentItem=t},title:q,lastreadTouchable:N,children:[Object(s.c)(m.b,{children:[Object(s.c)("div",{children:[Object(s.b)("span",{children:"关注数："}),Object(p.formatNumber)(d)]}),Object(s.c)("div",{children:[Object(s.b)("span",{children:"最后更新于："}),Object(f.toDateString)(l)]}),Object(s.c)("div",{children:[Object(s.b)("span",{children:"作者："}),Object(s.b)(y.a,{user:k})]})]},"favlist-item-cells"),Object(s.c)(m.a,{children:[Object(s.b)(O.a,Object.assign(Object.assign({},L),{},{isFollowing:w,zaId:T})),Object(s.b)(v.a,{onClick:this.handleCommentsShown,commentsShown:M,count:S}),Object(s.b)(j.a,Object.assign(Object.assign({},L),{},{title:c,authorName:k&&k.name})),x&&x((function(){return e.contentItem}),B)]},"favlist-item-actions"),Object(s.b)(g.a,{parent:a,commentPattern:D,shown:M,autoFocus:_,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);A.propTypes={preset:u.a.oneOf(Object.values(m.c)),zaInfos:u.a.shape({follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},A.defaultProps={preset:m.c.default,zaInfos:{}},t.a=Object(w.b)((function(e){var t=e.favlist,n=e.trackCardShow,a=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:a}}))(A)},1130:function(e,t,n){"use strict";var a=n(32),r=n(13),i=n(14),o=n(15),c=n(17),s=n(9),l=n(1),u=n(2),d=n(11),h=n.n(d),f=["className","alt"];function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var b=function(e){Object(o.a)(n,e);var t=p(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.alt,r=Object(a.default)(e,f);return Object(l.b)("img",Object.assign({className:h()("ImageAlias",t),alt:n},r))}}]),n}(u.Component);t.a=b},1135:function(e,t,n){"use strict";var a=n(32),r=n(13),i=n(14),o=n(15),c=n(17),s=n(9),l=n(1),u=n(2),d=n(11),h=n.n(d),f=n(37),p=n(31),b=["to","className","children"];function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(o.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.className,r=e.children,i=Object(a.default)(e,b),o=h()("QuestionMainAction",n);return t?Object(l.b)(f.Link,Object.assign(Object.assign({to:t,className:o},i),{},{children:r})):Object(l.b)(p.c,Object.assign(Object.assign({className:o},i),{},{children:r}))}}]),n}(u.Component);t.a=v},1165:function(e,t,n){"use strict";var a;!function(r){function i(e,t,n){var a,r,i,o,c,b,m,v,g,O=0,j=[],y=0,w=!1,C=[],A=[],k=!1,S=!1,R=-1;if(a=(n=n||{}).encoding||"UTF8",(g=n.numRounds||1)!==parseInt(g,10)||1>g)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)c=512,b=L,m=z,o=160,v=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(b=function(t,n){return U(t,n,e)},m=function(t,n,a,r){var i,o;if("SHA-224"===e||"SHA-256"===e)i=15+(n+65>>>9<<4),o=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");i=31+(n+129>>>10<<5),o=32}for(;t.length<=i;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=a,t[i]=4294967295&n,t[i-1]=n/4294967296|0,a=t.length,n=0;n<a;n+=o)r=U(t.slice(n,n+o),r,e);if("SHA-224"===e)t=[r[0],r[1],r[2],r[3],r[4],r[5],r[6]];else if("SHA-256"===e)t=r;else if("SHA-384"===e)t=[r[0].a,r[0].b,r[1].a,r[1].b,r[2].a,r[2].b,r[3].a,r[3].b,r[4].a,r[4].b,r[5].a,r[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[r[0].a,r[0].b,r[1].a,r[1].b,r[2].a,r[2].b,r[3].a,r[3].b,r[4].a,r[4].b,r[5].a,r[5].b,r[6].a,r[6].b,r[7].a,r[7].b]}return t},v=function(e){return e.slice()},"SHA-224"===e)c=512,o=224;else if("SHA-256"===e)c=512,o=256;else if("SHA-384"===e)c=1024,o=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");c=1024,o=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var E=6;if(b=F,v=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},R=1,"SHA3-224"===e)c=1152,o=224;else if("SHA3-256"===e)c=1088,o=256;else if("SHA3-384"===e)c=832,o=384;else if("SHA3-512"===e)c=576,o=512;else if("SHAKE128"===e)c=1344,o=-1,E=31,S=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");c=1088,o=-1,E=31,S=!0}m=function(e,t,n,a,r){var i,o=E,s=[],l=(n=c)>>>5,u=0,d=t>>>5;for(i=0;i<d&&t>=n;i+=l)a=F(e.slice(i,i+l),a),t-=n;for(e=e.slice(i),t%=n;e.length<l;)e.push(0);for(e[(i=t>>>3)>>2]^=o<<i%4*8,e[l-1]^=2147483648,a=F(e,a);32*s.length<r&&(e=a[u%5][u/5|0],s.push(e.b),!(32*s.length>=r));)s.push(e.a),0==64*(u+=1)%n&&(F(null,a),u=0);return s}}i=p(t,a,R),r=q(e),this.setHMACKey=function(t,n,i){var s;if(!0===w)throw Error("HMAC key already set");if(!0===k)throw Error("Cannot set HMAC key after calling update");if(!0===S)throw Error("SHAKE is not supported for HMAC");for(t=(n=p(n,a=(i||{}).encoding||"UTF8",R)(t)).binLen,n=n.value,i=(s=c>>>3)/4-1,s<t/8&&(n=m(n,t,0,q(e),o));n.length<=i;)n.push(0);for(t=0;t<=i;t+=1)C[t]=909522486^n[t],A[t]=1549556828^n[t];r=b(C,r),O=c,w=!0},this.update=function(e){var t,n,a,o=0,s=c>>>5;for(e=(t=i(e,j,y)).binLen,n=t.value,t=e>>>5,a=0;a<t;a+=s)o+c<=e&&(r=b(n.slice(a,a+s),r),o+=c);O+=o,j=n.slice(o>>>5),y=e%c,k=!0},this.getHash=function(t,n){var a,i,c,p;if(!0===w)throw Error("Cannot call getHash after setting HMAC key");if(c=f(n),!0===S){if(-1===c.shakeLen)throw Error("shakeLen must be specified in options");o=c.shakeLen}switch(t){case"HEX":a=function(e){return s(e,o,R,c)};break;case"B64":a=function(e){return l(e,o,R,c)};break;case"BYTES":a=function(e){return u(e,o,R)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}a=function(e){return d(e,o,R)};break;case"UINT8ARRAY":try{i=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}a=function(e){return h(e,o,R)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(p=m(j.slice(),y,O,v(r),o),i=1;i<g;i+=1)!0===S&&0!=o%32&&(p[p.length-1]&=16777215>>>24-o%32),p=m(p,o,0,q(e),o);return a(p)},this.getHMAC=function(t,n){var a,i,p,g;if(!1===w)throw Error("Cannot call getHMAC without first setting HMAC key");switch(p=f(n),t){case"HEX":a=function(e){return s(e,o,R,p)};break;case"B64":a=function(e){return l(e,o,R,p)};break;case"BYTES":a=function(e){return u(e,o,R)};break;case"ARRAYBUFFER":try{a=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}a=function(e){return d(e,o,R)};break;case"UINT8ARRAY":try{a=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}a=function(e){return h(e,o,R)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return i=m(j.slice(),y,O,v(r),o),g=b(A,q(e)),a(g=m(i,o,c,g,o))}}function o(e,t){this.a=e,this.b=t}function c(e,t,n,a){var r,i,o,c,s;for(t=t||[0],i=(n=n||0)>>>3,s=-1===a?3:0,r=0;r<e.length;r+=1)o=(c=r+i)>>>2,t.length<=o&&t.push(0),t[o]|=e[r]<<8*(s+c%4*a);return{value:t,binLen:8*e.length+n}}function s(e,t,n,a){var r,i,o,c="";for(t/=8,o=-1===n?3:0,r=0;r<t;r+=1)i=e[r>>>2]>>>8*(o+r%4*n),c+="0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i);return a.outputUpper?c.toUpperCase():c}function l(e,t,n,a){var r,i,o,c,s="",l=t/8;for(c=-1===n?3:0,r=0;r<l;r+=3)for(i=r+1<l?e[r+1>>>2]:0,o=r+2<l?e[r+2>>>2]:0,o=(e[r>>>2]>>>8*(c+r%4*n)&255)<<16|(i>>>8*(c+(r+1)%4*n)&255)<<8|o>>>8*(c+(r+2)%4*n)&255,i=0;4>i;i+=1)s+=8*r+6*i<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-i)&63):a.b64Pad;return s}function u(e,t,n){var a,r,i,o="";for(t/=8,i=-1===n?3:0,a=0;a<t;a+=1)r=e[a>>>2]>>>8*(i+a%4*n)&255,o+=String.fromCharCode(r);return o}function d(e,t,n){t/=8;var a,r,i,o=new ArrayBuffer(t);for(i=new Uint8Array(o),r=-1===n?3:0,a=0;a<t;a+=1)i[a]=e[a>>>2]>>>8*(r+a%4*n)&255;return o}function h(e,t,n){t/=8;var a,r,i=new Uint8Array(t);for(r=-1===n?3:0,a=0;a<t;a+=1)i[a]=e[a>>>2]>>>8*(r+a%4*n)&255;return i}function f(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function p(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,a){var r,i,o,c,s,l,u=e.length;if(0!=u%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],s=(a=a||0)>>>3,l=-1===n?3:0,r=0;r<u;r+=2){if(i=parseInt(e.substr(r,2),16),isNaN(i))throw Error("String of HEX type contains invalid characters");for(o=(c=(r>>>1)+s)>>>2;t.length<=o;)t.push(0);t[o]|=i<<8*(l+c%4*n)}return{value:t,binLen:4*u+a}};break;case"TEXT":e=function(e,a,r){var i,o,c,s,l,u,d,h,f=0;if(a=a||[0],l=(r=r||0)>>>3,"UTF8"===t)for(h=-1===n?3:0,c=0;c<e.length;c+=1)for(o=[],128>(i=e.charCodeAt(c))?o.push(i):2048>i?(o.push(192|i>>>6),o.push(128|63&i)):55296>i||57344<=i?o.push(224|i>>>12,128|i>>>6&63,128|63&i):(c+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(c)),o.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),s=0;s<o.length;s+=1){for(u=(d=f+l)>>>2;a.length<=u;)a.push(0);a[u]|=o[s]<<8*(h+d%4*n),f+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(h=-1===n?2:0,o="UTF16LE"===t&&1!==n||"UTF16LE"!==t&&1===n,c=0;c<e.length;c+=1){for(i=e.charCodeAt(c),!0===o&&(i=(s=255&i)<<8|i>>>8),u=(d=f+l)>>>2;a.length<=u;)a.push(0);a[u]|=i<<8*(h+d%4*n),f+=2}return{value:a,binLen:8*f+r}};break;case"B64":e=function(e,t,a){var r,i,o,c,s,l,u,d,h=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(i=e.indexOf("="),e=e.replace(/\=/g,""),-1!==i&&i<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],l=(a=a||0)>>>3,d=-1===n?3:0,i=0;i<e.length;i+=4){for(s=e.substr(i,4),o=c=0;o<s.length;o+=1)c|=(r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(s.charAt(o)))<<18-6*o;for(o=0;o<s.length-1;o+=1){for(r=(u=h+l)>>>2;t.length<=r;)t.push(0);t[r]|=(c>>>16-8*o&255)<<8*(d+u%4*n),h+=1}}return{value:t,binLen:8*h+a}};break;case"BYTES":e=function(e,t,a){var r,i,o,c,s,l;for(t=t||[0],o=(a=a||0)>>>3,l=-1===n?3:0,i=0;i<e.length;i+=1)r=e.charCodeAt(i),c=(s=i+o)>>>2,t.length<=c&&t.push(0),t[c]|=r<<8*(l+s%4*n);return{value:t,binLen:8*e.length+a}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,a){return c(new Uint8Array(e),t,a,n)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,a){return c(e,t,a,n)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function b(e,t){return e<<t|e>>>32-t}function m(e,t){return 32<t?(t-=32,new o(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new o(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function v(e,t){return e>>>t|e<<32-t}function g(e,t){var n=null;n=new o(e.a,e.b);return 32>=t?new o(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new o(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function O(e,t){return 32>=t?new o(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new o(0,e.a>>>t-32)}function j(e,t,n){return e&t^~e&n}function y(e,t,n){return new o(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function w(e,t,n){return e&t^e&n^t&n}function C(e,t,n){return new o(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function A(e){return v(e,2)^v(e,13)^v(e,22)}function k(e){var t=g(e,28),n=g(e,34);return e=g(e,39),new o(t.a^n.a^e.a,t.b^n.b^e.b)}function S(e){return v(e,6)^v(e,11)^v(e,25)}function R(e){var t=g(e,14),n=g(e,18);return e=g(e,41),new o(t.a^n.a^e.a,t.b^n.b^e.b)}function E(e){return v(e,7)^v(e,18)^e>>>3}function N(e){var t=g(e,1),n=g(e,8);return e=O(e,7),new o(t.a^n.a^e.a,t.b^n.b^e.b)}function I(e){return v(e,17)^v(e,19)^e>>>10}function T(e){var t=g(e,19),n=g(e,61);return e=O(e,6),new o(t.a^n.a^e.a,t.b^n.b^e.b)}function B(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function x(e,t,n,a){var r=(65535&e)+(65535&t)+(65535&n)+(65535&a);return((e>>>16)+(t>>>16)+(n>>>16)+(a>>>16)+(r>>>16)&65535)<<16|65535&r}function Q(e,t,n,a,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&a)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(a>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function M(e,t){var n,a,r;return n=(65535&e.b)+(65535&t.b),r=(65535&(a=(e.b>>>16)+(t.b>>>16)+(n>>>16)))<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(a>>>16),new o((65535&(a=(e.a>>>16)+(t.a>>>16)+(n>>>16)))<<16|65535&n,r)}function _(e,t,n,a){var r,i,c;return r=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&a.b),c=(65535&(i=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(a.b>>>16)+(r>>>16)))<<16|65535&r,r=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&a.a)+(i>>>16),new o((65535&(i=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(a.a>>>16)+(r>>>16)))<<16|65535&r,c)}function D(e,t,n,a,r){var i,c,s;return i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&a.b)+(65535&r.b),s=(65535&(c=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(a.b>>>16)+(r.b>>>16)+(i>>>16)))<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&a.a)+(65535&r.a)+(c>>>16),new o((65535&(c=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(a.a>>>16)+(r.a>>>16)+(i>>>16)))<<16|65535&i,s)}function P(e,t){return new o(e.a^t.a,e.b^t.b)}function q(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new o(3418070365,n[0]),new o(1654270250,n[1]),new o(2438529370,n[2]),new o(355462360,n[3]),new o(1731405415,n[4]),new o(41048885895,n[5]),new o(3675008525,n[6]),new o(1203062813,n[7])];break;case"SHA-512":n=[new o(t[0],4089235720),new o(t[1],2227873595),new o(t[2],4271175723),new o(t[3],1595750129),new o(t[4],2917565137),new o(t[5],725511199),new o(t[6],4215389547),new o(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new o(0,0),new o(0,0),new o(0,0),new o(0,0),new o(0,0)]}return n}function L(e,t){var n,a,r,i,o,c,s,l=[];for(n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],s=0;80>s;s+=1)l[s]=16>s?e[s]:b(l[s-3]^l[s-8]^l[s-14]^l[s-16],1),c=20>s?Q(b(n,5),a&r^~a&i,o,1518500249,l[s]):40>s?Q(b(n,5),a^r^i,o,1859775393,l[s]):60>s?Q(b(n,5),w(a,r,i),o,2400959708,l[s]):Q(b(n,5),a^r^i,o,3395469782,l[s]),o=i,i=r,r=b(a,30),a=n,n=c;return t[0]=B(n,t[0]),t[1]=B(a,t[1]),t[2]=B(r,t[2]),t[3]=B(i,t[3]),t[4]=B(o,t[4]),t}function z(e,t,n,a){var r;for(r=15+(t+65>>>9<<4);e.length<=r;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[r]=4294967295&t,e[r-1]=t/4294967296|0,t=e.length,r=0;r<t;r+=16)a=L(e.slice(r,r+16),a);return a}function U(e,t,n){var a,r,i,c,s,l,u,d,h,f,p,b,m,v,g,O,P,q,L,z,U,F,Y,W=[];if("SHA-224"===n||"SHA-256"===n)f=64,b=1,F=Number,m=B,v=x,g=Q,O=E,P=I,q=A,L=S,U=w,z=j,Y=H;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");f=80,b=2,F=o,m=M,v=_,g=D,O=N,P=T,q=k,L=R,U=C,z=y,Y=V}for(n=t[0],a=t[1],r=t[2],i=t[3],c=t[4],s=t[5],l=t[6],u=t[7],p=0;p<f;p+=1)16>p?(h=p*b,d=e.length<=h?0:e[h],h=e.length<=h+1?0:e[h+1],W[p]=new F(d,h)):W[p]=v(P(W[p-2]),W[p-7],O(W[p-15]),W[p-16]),d=g(u,L(c),z(c,s,l),Y[p],W[p]),h=m(q(n),U(n,a,r)),u=l,l=s,s=c,c=m(i,d),i=r,r=a,a=n,n=m(d,h);return t[0]=m(n,t[0]),t[1]=m(a,t[1]),t[2]=m(r,t[2]),t[3]=m(i,t[3]),t[4]=m(c,t[4]),t[5]=m(s,t[5]),t[6]=m(l,t[6]),t[7]=m(u,t[7]),t}function F(e,t){var n,a,r,i,c=[],s=[];if(null!==e)for(a=0;a<e.length;a+=2)t[(a>>>1)%5][(a>>>1)/5|0]=P(t[(a>>>1)%5][(a>>>1)/5|0],new o(e[a+1],e[a]));for(n=0;24>n;n+=1){for(i=q("SHA3-"),a=0;5>a;a+=1){r=t[a][0];var l=t[a][1],u=t[a][2],d=t[a][3],h=t[a][4];c[a]=new o(r.a^l.a^u.a^d.a^h.a,r.b^l.b^u.b^d.b^h.b)}for(a=0;5>a;a+=1)s[a]=P(c[(a+4)%5],m(c[(a+1)%5],1));for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)t[a][r]=P(t[a][r],s[a]);for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)i[r][(2*a+3*r)%5]=m(t[a][r],Y[a][r]);for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)t[a][r]=P(i[a][r],new o(~i[(a+1)%5][r].a&i[(a+2)%5][r].a,~i[(a+1)%5][r].b&i[(a+2)%5][r].b));t[0][0]=P(t[0][0],W[n])}return t}var H,V,Y,W;V=[new o((H=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new o(H[1],602891725),new o(H[2],3964484399),new o(H[3],2173295548),new o(H[4],4081628472),new o(H[5],3053834265),new o(H[6],2937671579),new o(H[7],3664609560),new o(H[8],2734883394),new o(H[9],1164996542),new o(H[10],1323610764),new o(H[11],3590304994),new o(H[12],4068182383),new o(H[13],991336113),new o(H[14],633803317),new o(H[15],3479774868),new o(H[16],2666613458),new o(H[17],944711139),new o(H[18],2341262773),new o(H[19],2007800933),new o(H[20],1495990901),new o(H[21],1856431235),new o(H[22],3175218132),new o(H[23],2198950837),new o(H[24],3999719339),new o(H[25],766784016),new o(H[26],2566594879),new o(H[27],3203337956),new o(H[28],1034457026),new o(H[29],2466948901),new o(H[30],3758326383),new o(H[31],168717936),new o(H[32],1188179964),new o(H[33],1546045734),new o(H[34],1522805485),new o(H[35],2643833823),new o(H[36],2343527390),new o(H[37],1014477480),new o(H[38],1206759142),new o(H[39],344077627),new o(H[40],1290863460),new o(H[41],3158454273),new o(H[42],3505952657),new o(H[43],106217008),new o(H[44],3606008344),new o(H[45],1432725776),new o(H[46],1467031594),new o(H[47],851169720),new o(H[48],3100823752),new o(H[49],1363258195),new o(H[50],3750685593),new o(H[51],3785050280),new o(H[52],3318307427),new o(H[53],3812723403),new o(H[54],2003034995),new o(H[55],3602036899),new o(H[56],1575990012),new o(H[57],1125592928),new o(H[58],2716904306),new o(H[59],442776044),new o(H[60],593698344),new o(H[61],3733110249),new o(H[62],2999351573),new o(H[63],3815920427),new o(3391569614,3928383900),new o(3515267271,566280711),new o(3940187606,3454069534),new o(4118630271,4000239992),new o(116418474,1914138554),new o(174292421,2731055270),new o(289380356,3203993006),new o(460393269,320620315),new o(685471733,587496836),new o(852142971,1086792851),new o(1017036298,365543100),new o(1126000580,2618297676),new o(1288033470,3409855158),new o(1501505948,4234509866),new o(1607167915,987167468),new o(1816402316,1246189591)],W=[new o(0,1),new o(0,32898),new o(2147483648,32906),new o(2147483648,2147516416),new o(0,32907),new o(0,2147483649),new o(2147483648,2147516545),new o(2147483648,32777),new o(0,138),new o(0,136),new o(0,2147516425),new o(0,2147483658),new o(0,2147516555),new o(2147483648,139),new o(2147483648,32905),new o(2147483648,32771),new o(2147483648,32770),new o(2147483648,128),new o(0,32778),new o(2147483648,2147483658),new o(2147483648,2147516545),new o(2147483648,32896),new o(0,2147483649),new o(2147483648,2147516424)],Y=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0===(a=function(){return i}.call(t,n,t,e))||(e.exports=a)}()},1209:function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var a=n(42),r=n(1),i=n(2),o=n(247),c=n.n(o),s=Object(i.createContext)([!0,c.a,c.a]);s.displayName="DisplayPriorityContext";var l=function(){return Object(i.useContext)(s)},u=function(e){var t=e.children,n=e.readyStatus,a=e.shownStatus,o=e.index,c=e.setReadyStatusList,l=Object(i.useRef)(n);Object(i.useEffect)((function(){l.current=n}),[n]);var u=Object(i.useCallback)((function(){"pending"===l.current&&c((function(e){return e.map((function(e,t){return t===o?"resolved":e}))}))}),[c,o]),d=Object(i.useCallback)((function(){"pending"===l.current&&c((function(e){return e.map((function(e,t){return t===o?"rejected":e}))}))}),[c,o]),h=Object(i.useMemo)((function(){return[a,u,d]}),[a,u,d]);return Object(r.b)(s.Provider,{value:h,children:t})};t.a=function(e){var t=e.children,n=Object(i.useState)((function(){return i.Children.map(t,(function(){return"pending"}))})),o=Object(a.a)(n,2),c=o[0],s=o[1],l=Object(i.useMemo)((function(){var e=!1;return c.map((function(t){return!e&&("rejected"!==t&&(e=!0,"pending"!==t))}))}),[c]);return Object(r.b)(r.a,{children:i.Children.map(t,(function(e,t){return Object(r.b)(u,{readyStatus:c[t],shownStatus:l[t],index:t,setReadyStatusList:s,children:e},t)}))})}},1217:function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=s(n(1481)),i=s(n(2)),o=s(n(3)),c=(s(n(1482)),n(1483));function s(e){return e&&e.__esModule?e:{default:e}}o.default.any,o.default.func,o.default.node;var l=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)?i.keysToEnter.push(e):i.setState((function(t){var n=a({},t.children);return delete n[e],{children:n}}))},i.childRefs=Object.create(null),i.state={children:(0,c.getChildMapping)(n.children)},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,c.getChildMapping)(e.children),n=this.state.children;for(var a in this.setState({children:(0,c.mergeChildMappings)(n,t)}),t){var r=n&&n.hasOwnProperty(a);!t[a]||r||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(var i in n){var o=t&&t.hasOwnProperty(i);!n[i]||o||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var a=e.state.children[n];if(a){var o="string"!=typeof a.ref,c=e.props.childFactory(a),s=function(t){e.childRefs[n]=t};c===a&&o&&(s=(0,r.default)(a.ref,s)),t.push(i.default.cloneElement(c,{key:n,ref:s}))}};for(var o in this.state.children)n(o);var c=a({},this.props);return delete c.transitionLeave,delete c.transitionName,delete c.transitionAppear,delete c.transitionEnter,delete c.childFactory,delete c.transitionLeaveTimeout,delete c.transitionEnterTimeout,delete c.transitionAppearTimeout,delete c.component,i.default.createElement(this.props.component,c,t)},t}(i.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(e){return e}},t.default=l,e.exports=t.default},1220:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=a,e.exports=t.default},1221:function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};r(n(2));var a=r(n(3));function r(e){return e&&e.__esModule?e:{default:e}}t.nameShape=a.default.oneOfType([a.default.string,a.default.shape({enter:a.default.string,leave:a.default.string,active:a.default.string}),a.default.shape({enter:a.default.string,enterActive:a.default.string,leave:a.default.string,leaveActive:a.default.string,appear:a.default.string,appearActive:a.default.string})])},1312:function(e,t,n){"use strict";var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(2),h=n.n(d),f=n(18),p=n(24),b=n(37),m=n(54),v=n(42),g=n(73),O=n(94),j=n(868),y=n(30),w=n(386),C=n(26),A=n(31),k=n(2578),S=function(e){var t=e.onBack,n=e.data,a=n.phoneNo,r=n.code,i=n.targetNo,o=e.onSubmit;return Object(s.c)("div",{className:"SMSIdentify",children:[Object(s.c)("div",{className:"SMSIdentify-back",role:"button",tabIndex:0,onClick:t,children:[Object(s.b)(k.a,{fill:"#8590a6",size:36,center:!0}),"返回"]}),Object(s.b)("div",{className:"SMSIdentify-title",children:"身份验证"}),Object(s.c)("div",{className:"SMSIdentify-tip",children:["请用手机号 ",a.slice(0,-8),"****",a.slice(-4)," 发送短信"]}),Object(s.c)("div",{className:"SMSIdentify-content",children:[Object(s.c)("div",{children:["短信内容",Object(s.b)("span",{children:r})]}),Object(s.c)("div",{children:["发送到号码",Object(s.b)("span",{children:i})]})]}),Object(s.b)("div",{className:"SMSIdentify-submitTip",children:"发送完成后，请点击下方按钮进行校验"}),Object(s.b)(A.c,{className:"SMSIdentify-submit",preset:"primary",color:"blue",onClick:o,children:"我已发送"})]})},R=Object(p.connect)(null,{getSMSIdentify:w.d,postSMSIdentify:w.e,showNotification:C.h})((function(e){var t=e.getSMSIdentify,n=e.postSMSIdentify,a=e.showNotification,r=e.onBack,i=e.phoneNo,o=Object(d.useState)({code:"",phoneNo:"",targetNo:""}),c=Object(v.a)(o,2),l=c[0],u=c[1];Object(d.useEffect)((function(){y.a.trackCardShow(null,{id:5935})}),[]),Object(d.useEffect)((function(){i&&t(i).then((function(e){var t=e.payload;t&&u(t)})).catch((function(e){var t=e.payload;t&&u(t)}))}),[t,i]);var h=S;return Object(s.b)(h,{onBack:r,onSubmit:function(){y.a.trackEvent(null,{id:23456}),n(i).then((function(e){var t=e.payload;y.a.trackEvent(null,{id:6729,action:"Click",name:t.success?"通过":"失败"}),t.success?r():a("没有收到短信，请稍后重试","red")}))},data:l})})),E=function(e){var t=e.captcha,n=t.captchaValidationMessage,a=t.captchaNeeded,r=t.captchaValidated,i=t.v2,o=e.login,c=o.loginConfirmSucceeded,s=o.loginConfirmError,l=o.sendDigitsError,u=o.needSMSIdentify,d=o.loginUnregisteredError,h=e.register;return{loginConfirmSucceeded:c,loginConfirmError:s,sendDigitsError:l,loginUnregisteredError:d,captchaValidationMessage:n,captchaNeeded:a,captchaValidated:r,registerValidateErrors:h.registerValidateErrors,registerConfirmError:h.registerConfirmError,registerConfirmSucceeded:h.registerConfirmSucceeded,needSMSIdentify:u,captchaV2:i}},N=n(859),I=n(1086),T=n(11),B=n.n(T),x=n(136),Q=Object.assign;var M=function(e){return h.a.createElement(x.a,Q({width:"52",height:"52",fill:"none",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),h.a.createElement("mask",{id:"id-3757926926-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},h.a.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),h.a.createElement("g",{mask:"url(#id-3757926926-a)"},h.a.createElement("path",{fill:"#06F",d:"M0 0h48a4 4 0 014 4v48L0 0z"}),h.a.createElement("path",{fill:"url(#pattern0)",d:"M0 0h52v52H0z"})),h.a.createElement("defs",null,h.a.createElement("pattern",{id:"pattern0",width:"1",height:"1",patternContentUnits:"objectBoundingBox"},h.a.createElement("use",{transform:"scale(.00216)",xlinkHref:"#image0"})),h.a.createElement("image",{id:"image0",width:"463",height:"463",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAc8AAAHPCAYAAAA1eFErAAAABGdBTUEAALGOfPtRkwAAGNxJREFUeAHt3UGOG0cSBdDRgAdwA7wrr2Ce1QR4BI0JDHPhhToNfVZFZjxtugylIyNeVOuDK/7448+/fv7Hn/YCz9s1YvB1f0TqVC2SckrOt7M57+SbolZS4L/JYmoRIECAAIEOAsKzw5bNSIAAAQJRAeEZ5VSMAAECBDoICM8OWzYjAQIECEQFhGeUUzECBAgQ6CAgPDts2YwECBAgEBUQnlFOxQgQIECgg4Dw7LBlMxIgQIBAVEB4RjkVI0CAAIEOAsKzw5bNSIAAAQJRAeEZ5VSMAAECBDoICM8OWzYjAQIECEQFhGeUUzECBAgQ6CAgPDts2YwECBAgEBUQnlFOxQgQIECgg4Dw7LBlMxIgQIBAVEB4RjkVI0CAAIEOAsKzw5bNSIAAAQJRgUuy2vN2TZZT6xuBr/vjmxPH/3XFdyDplKqVdErVSs32eut27in5W5VySva0c63kO+6T585vitkIECBA4CMCwvMjrIoSIECAwM4CwnPn7ZqNAAECBD4iIDw/wqooAQIECOwsIDx33q7ZCBAgQOAjAsLzI6yKEiBAgMDOAsJz5+2ajQABAgQ+IiA8P8KqKAECBAjsLCA8d96u2QgQIEDgIwLC8yOsihIgQIDAzgLCc+ftmo0AAQIEPiIgPD/CqigBAgQI7CwgPHfertkIECBA4CMCwvMjrIoSIECAwM4CwnPn7ZqNAAECBD4iIDw/wqooAQIECOwsIDx33q7ZCBAgQOAjApePVP3Noslv+/7NVj7yv+/87fEVd5f0Ts2XqvORF1TR5QR2f5+Sv8Op5frkmZJUhwABAgTaCAjPNqs2KAECBAikBIRnSlIdAgQIEGgjIDzbrNqgBAgQIJASEJ4pSXUIECBAoI2A8GyzaoMSIECAQEpAeKYk1SFAgACBNgLCs82qDUqAAAECKQHhmZJUhwABAgTaCAjPNqs2KAECBAikBIRnSlIdAgQIEGgjIDzbrNqgBAgQIJASEJ4pSXUIECBAoI2A8GyzaoMSIECAQEpAeKYk1SFAgACBNgLCs82qDUqAAAECKQHhmZJUhwABAgTaCAjPNqs2KAECBAikBC6pQuoQeAk8b1cQEwIVnb7uj4nOjz1S0elYAbdVFfDJs+pm9EWAAAECZQWEZ9nVaIwAAQIEqgoIz6qb0RcBAgQIlBUQnmVXozECBAgQqCogPKtuRl8ECBAgUFZAeJZdjcYIECBAoKqA8Ky6GX0RIECAQFkB4Vl2NRojQIAAgaoCwrPqZvRFgAABAmUFhGfZ1WiMAAECBKoKCM+qm9EXAQIECJQVEJ5lV6MxAgQIEKgqIDyrbkZfBAgQIFBWQHiWXY3GCBAgQKCqgPCsuhl9ESBAgEBZAeFZdjUaI0CAAIGqAsKz6mb0RYAAAQJlBS5lO9NYe4Gv+yNi8LxdI3VeRVK1UrPFBgvOluxJLQJVBXzyrLoZfREgQIBAWQHhWXY1GiNAgACBqgLCs+pm9EWAAAECZQWEZ9nVaIwAAQIEqgoIz6qb0RcBAgQIlBUQnmVXozECBAgQqCogPKtuRl8ECBAgUFZAeJZdjcYIECBAoKqA8Ky6GX0RIECAQFkB4Vl2NRojQIAAgaoCwrPqZvRFgAABAmUFhGfZ1WiMAAECBKoKCM+qm9EXAQIECJQVEJ5lV6MxAgQIEKgqIDyrbkZfBAgQIFBWQHiWXY3GCBAgQKCqgPCsuhl9ESBAgEBZAeFZdjUaI0CAAIGqApeKjT1v14pt6WlC4Ov+mDh17JGKPR0rMHdb0in1O1yxpznNY0+lvI/teu3bfPJce3+6J0CAAIETBITnCeiuJECAAIG1BYTn2vvTPQECBAicICA8T0B3JQECBAisLSA8196f7gkQIEDgBAHheQK6KwkQIEBgbQHhufb+dE+AAAECJwgIzxPQXUmAAAECawsIz7X3p3sCBAgQOEFAeJ6A7koCBAgQWFtAeK69P90TIECAwAkCwvMEdFcSIECAwNoCwnPt/emeAAECBE4QEJ4noLuSAAECBNYWEJ5r70/3BAgQIHCCgPA8Ad2VBAgQILC2gPBce3+6J0CAAIETBC7JO5Pf+p7sS601BZ63a6Tx5Hupp8hKFPm/QPLdhHqsgE+ex3q7jQABAgQ2EBCeGyzRCAQIECBwrIDwPNbbbQQIECCwgYDw3GCJRiBAgACBYwWE57HebiNAgACBDQSE5wZLNAIBAgQIHCsgPI/1dhsBAgQIbCAgPDdYohEIECBA4FgB4Xmst9sIECBAYAMB4bnBEo1AgAABAscKCM9jvd1GgAABAhsICM8NlmgEAgQIEDhWQHge6+02AgQIENhAQHhusEQjECBAgMCxAsLzWG+3ESBAgMAGAsJzgyUagQABAgSOFRCex3q7jQABAgQ2EBCeGyzRCAQIECBwrMCPn3//OfZKtxGYE/i6P+YOfnPqebt+c2L+r1M9zd/4/cnkfN/fNneC05yTU+sK+OS57u50ToAAAQInCQjPk+BdS4AAAQLrCgjPdXencwIECBA4SUB4ngTvWgIECBBYV0B4rrs7nRMgQIDASQLC8yR41xIgQIDAugLCc93d6ZwAAQIEThIQnifBu5YAAQIE1hUQnuvuTucECBAgcJKA8DwJ3rUECBAgsK6A8Fx3dzonQIAAgZMEhOdJ8K4lQIAAgXUFhOe6u9M5AQIECJwkIDxPgnctAQIECKwrIDzX3Z3OCRAgQOAkAeF5ErxrCRAgQGBdAeG57u50ToAAAQInCVyS3/ie+kb7ij2dtJ9fXpt0+uVF/+IvU+/Av7iy/dGK70H7pUwCpHZX8fcuNduLMjVfsiefPCdfcscIECBAgMBbQHi+JfwkQIAAAQKTAsJzEsoxAgQIECDwFhCebwk/CRAgQIDApIDwnIRyjAABAgQIvAWE51vCTwIECBAgMCkgPCehHCNAgAABAm8B4fmW8JMAAQIECEwKCM9JKMcIECBAgMBbQHi+JfwkQIAAAQKTAsJzEsoxAgQIECDwFhCebwk/CRAgQIDApIDwnIRyjAABAgQIvAWE51vCTwIECBAgMCkgPCehHCNAgAABAm8B4fmW8JMAAQIECEwKCM9JKMcIECBAgMBbQHi+JfwkQIAAAQKTApfJc8se+7o/Ir0/b9dInWSRij0l50vVSr0Dr34qmqfmS86W6in1DiTr7Dzbyyk13+7vk0+eyd8qtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghcAl+W3fLcQCQ6a+qT3QSrxE8n1K1Up6p2qlZnstMFkr/kL8ZsHkbKnd/eZIbf73pHfqPUj25JNnm1fZoAQIECCQEhCeKUl1CBAgQKCNgPBss2qDEiBAgEBKQHimJNUhQIAAgTYCwrPNqg1KgAABAikB4ZmSVIcAAQIE2ggIzzarNigBAgQIpASEZ0pSHQIECBBoIyA826zaoAQIECCQEhCeKUl1CBAgQKCNgPBss2qDEiBAgEBKQHimJNUhQIAAgTYCwrPNqg1KgAABAikB4ZmSVIcAAQIE2ggIzzarNigBAgQIpASEZ0pSHQIECBBoIyA826zaoAQIECCQEhCeKUl1CBAgQKCNwOXr/mgz7G6DPm/X2EgV34NUT0mnFHhqtlQ/rzoVnZLz7VzL+zS33eQ77pPnnLlTBAgQIEBgCAjPQeGBAAECBAjMCQjPOSenCBAgQIDAEBCeg8IDAQIECBCYExCec05OESBAgACBISA8B4UHAgQIECAwJyA855ycIkCAAAECQ0B4DgoPBAgQIEBgTkB4zjk5RYAAAQIEhoDwHBQeCBAgQIDAnIDwnHNyigABAgQIDAHhOSg8ECBAgACBOQHhOefkFAECBAgQGALCc1B4IECAAAECcwLCc87JKQIECBAgMASE56DwQIAAAQIE5gSE55yTUwQIECBAYAhckt+sXfHbzMekhR5S5rznlpp0Su1urnOnkgKp3SXfp9R8qdlS/VStk9ydT55Vt6wvAgQIECgrIDzLrkZjBAgQIFBVQHhW3Yy+CBAgQKCsgPAsuxqNESBAgEBVAeFZdTP6IkCAAIGyAsKz7Go0RoAAAQJVBYRn1c3oiwABAgTKCgjPsqvRGAECBAhUFRCeVTejLwIECBAoKyA8y65GYwQIECBQVUB4Vt2MvggQIECgrIDwLLsajREgQIBAVQHhWXUz+iJAgACBsgLCs+xqNEaAAAECVQWEZ9XN6IsAAQIEygoIz7Kr0RgBAgQIVBUQnlU3oy8CBAgQKCsgPMuuRmMECBAgUFXgUrGx5+0aa+vr/ojVqlYo6ZSaraJ3RaeU96vO7vMlrarVsru5jVT8d8Unz7ndOUWAAAECBIaA8BwUHggQIECAwJyA8JxzcooAAQIECAwB4TkoPBAgQIAAgTkB4Tnn5BQBAgQIEBgCwnNQeCBAgAABAnMCwnPOySkCBAgQIDAEhOeg8ECAAAECBOYEhOeck1MECBAgQGAICM9B4YEAAQIECMwJCM85J6cIECBAgMAQEJ6DwgMBAgQIEJgTEJ5zTk4RIECAAIEhIDwHhQcCBAgQIDAnIDznnJwiQIAAAQJDQHgOCg8ECBAgQGBOQHjOOTlFgAABAgSGwI8//vzr5/ivDR9S39Re8ZvMK64r5f2araJ5ar6Ks+3+PlWcz3swt5WKv3c+ec7tzikCBAgQIDAEhOeg8ECAAAECBOYEhOeck1MECBAgQGAICM9B4YEAAQIECMwJCM85J6cIECBAgMAQEJ6DwgMBAgQIEJgTEJ5zTk4RIECAAIEhIDwHhQcCBAgQIDAnIDznnJwiQIAAAQJDQHgOCg8ECBAgQGBOQHjOOTlFgAABAgSGgPAcFB4IECBAgMCcgPCcc3KKAAECBAgMAeE5KDwQIECAAIE5AeE55+QUAQIECBAYAsJzUHggQIAAAQJzAsJzzskpAgQIECAwBITnoPBAgAABAgTmBH78/PvP3NE1T33dH+Uaf96u5Xra2anibMkXIPU+JZ1SPSWdUrWSTqmedvZOGaXr+OSZFlWPAAECBLYXEJ7br9iABAgQIJAWEJ5pUfUIECBAYHsB4bn9ig1IgAABAmkB4ZkWVY8AAQIEthcQntuv2IAECBAgkBYQnmlR9QgQIEBgewHhuf2KDUiAAAECaQHhmRZVjwABAgS2FxCe26/YgAQIECCQFhCeaVH1CBAgQGB7AeG5/YoNSIAAAQJpAeGZFlWPAAECBLYXEJ7br9iABAgQIJAWEJ5pUfUIECBAYHsB4bn9ig1IgAABAmkB4ZkWVY8AAQIEthf48ceff/2sNmXFb0Wv+O3xyb2lzDkltzJXa3fzOQWnUgKpfwtS/bzqpN7x5Gw+eSY3rBYBAgQItBAQni3WbEgCBAgQSAoIz6SmWgQIECDQQkB4tlizIQkQIEAgKSA8k5pqESBAgEALAeHZYs2GJECAAIGkgPBMaqpFgAABAi0EhGeLNRuSAAECBJICwjOpqRYBAgQItBAQni3WbEgCBAgQSAoIz6SmWgQIECDQQkB4tlizIQkQIEAgKSA8k5pqESBAgEALAeHZYs2GJECAAIGkgPBMaqpFgAABAi0EhGeLNRuSAAECBJICwjOpqRYBAgQItBAQni3WbEgCBAgQSApcnrdrst62tTitu1q7W3d3yc53fg++7o8kVaRWsqfU7pI9+eQZeU0UIUCAAIFOAsKz07bNSoAAAQIRAeEZYVSEAAECBDoJCM9O2zYrAQIECEQEhGeEURECBAgQ6CQgPDtt26wECBAgEBEQnhFGRQgQIECgk4Dw7LRtsxIgQIBAREB4RhgVIUCAAIFOAsKz07bNSoAAAQIRAeEZYVSEAAECBDoJCM9O2zYrAQIECEQEhGeEURECBAgQ6CQgPDtt26wECBAgEBEQnhFGRQgQIECgk4Dw7LRtsxIgQIBAREB4RhgVIUCAAIFOApfkN2t3gttt1tQ3te/m8s95Ur8vSe9krX/Oe/Z/p7yTcyR7qri71HwVZ0u+Bz55JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJgUuy2PN2TZZT6xuBr/vjmxPH/3XFdyDptPN8ydmS5se/xb++Men065vO+duK81V8n3zyPOf9dCsBAgQILCwgPBdentYJECBA4BwB4XmOu1sJECBAYGEB4bnw8rROgAABAucICM9z3N1KgAABAgsLCM+Fl6d1AgQIEDhHQHie4+5WAgQIEFhYQHguvDytEyBAgMA5AsLzHHe3EiBAgMDCAsJz4eVpnQABAgTOERCe57i7lQABAgQWFhCeCy9P6wQIECBwjoDwPMfdrQQIECCwsIDwXHh5WidAgACBcwSE5znubiVAgACBhQWE58LL0zoBAgQInCMgPM9xdysBAgQILCxwqdh7xW8NTzpV/Kb25HypWhXfg4o9pbx3r2N3cxtOOe3+75xPnnPvk1MECBAgQGAICM9B4YEAAQIECMwJCM85J6cIECBAgMAQEJ6DwgMBAgQIEJgTEJ5zTk4RIECAAIEhIDwHhQcCBAgQIDAnIDznnJwiQIAAAQJDQHgOCg8ECBAgQGBOQHjOOTlFgAABAgSGgPAcFB4IECBAgMCcgPCcc3KKAAECBAgMAeE5KDwQIECAAIE5AeE55+QUAQIECBAYAsJzUHggQIAAAQJzAsJzzskpAgQIECAwBITnoPBAgAABAgTmBITnnJNTBAgQIEBgCAjPQeGBAAECBAjMCVzmjjlFYF2B5+1arvmv+yPWU8X5Uj3t7pScL/ZChQpVnC31Xr6IfPIMvSjKECBAgEAfAeHZZ9cmJUCAAIGQgPAMQSpDgAABAn0EhGefXZuUAAECBEICwjMEqQwBAgQI9BEQnn12bVICBAgQCAkIzxCkMgQIECDQR0B49tm1SQkQIEAgJCA8Q5DKECBAgEAfAeHZZ9cmJUCAAIGQgPAMQSpDgAABAn0EhGefXZuUAAECBEICwjMEqQwBAgQI9BEQnn12bVICBAgQCAkIzxCkMgQIECDQR0B49tm1SQkQIEAgJCA8Q5DKECBAgEAfgUufUU16hEDy2+OT3/p+xOxn3ZE0P2uGI+5NOSXfy1St1GyvPaR6Su40NV+qzms2nzyTG1aLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFhGdSUy0CBAgQaCEgPFus2ZAECBAgkBQQnklNtQgQIECghYDwbLFmQxIgQIBAUkB4JjXVIkCAAIEWAsKzxZoNSYAAAQJJAeGZ1FSLAAECBFoICM8WazYkAQIECCQFLsliqVrP2zVVSp2DBXbf3df9cbDo99elzHee7aWYmi9V5/vNOvEWSL3j73qJnz55JhTVIECAAIFWAsKz1boNS4AAAQIJAeGZUFSDAAECBFoJCM9W6zYsAQIECCQEhGdCUQ0CBAgQaCUgPFut27AECBAgkBAQnglFNQgQIECglYDwbLVuwxIgQIBAQkB4JhTVIECAAIFWAsKz1boNS4AAAQIJAeGZUFSDAAECBFoJCM9W6zYsAQIECCQEhGdCUQ0CBAgQaCUgPFut27AECBAgkBAQnglFNQgQIECglYDwbLVuwxIgQIBAQkB4JhTVIECAAIFWApfktL5hPam5Zq3kO1Dx2+Mr9pQ0T711KafkbKmeUkZV66TMK3qnZnvtzifPqm+wvggQIECgrIDwLLsajREgQIBAVQHhWXUz+iJAgACBsgLCs+xqNEaAAAECVQWEZ9XN6IsAAQIEygoIz7Kr0RgBAgQIVBUQnlU3oy8CBAgQKCsgPMuuRmMECBAgUFVAeFbdjL4IECBAoKyA8Cy7Go0RIECAQFUB4Vl1M/oiQIAAgbICwrPsajRGgAABAlUFhGfVzeiLAAECBMoKCM+yq9EYAQIECFQVEJ5VN6MvAgQIECgrIDzLrkZjBAgQIFBVQHhW3Yy+CBAgQKCsgPAsuxqNESBAgEBVgf8BFD9n1bBqeo4AAAAASUVORK5CYII="})))},_=function(e){var t=e.type,n=e.showSwitchTypeIcon,a=Object(d.useContext)(N.c).handleChangeType;return Object(s.c)("div",{className:"SignFlow-tabs",children:[Object(s.b)("div",{className:B()("SignFlow-tab",{"SignFlow-tab--active":"digits"===t}),role:"button",tabIndex:0,onClick:function(){"digits"!==t&&a("digits")},children:"免密码登录"}),Object(s.b)("div",{className:B()("SignFlow-tab",{"SignFlow-tab--active":"password"===t}),role:"button",tabIndex:0,onClick:function(){"password"!==t&&a("password")},children:"密码登录"}),n&&Object(s.b)("div",{role:"button",tabIndex:0,"aria-label":"二维码图片",className:"SignFlow-qrcodeTab",onClick:function(){a("qrcode")},children:Object(s.b)(M,{})})]})};_.propTypes={showSwitchTypeIcon:u.a.bool},_.defaultProps={showSwitchTypeIcon:!0};var D=_,P=n(883),q=function(e){var t=e.type,n=e.isOversea,a=e.supportedCountriesShown,r=e.selectedCountry,i=e.username,o=e.usernameServerError,c=e.customErrorInputMap,l=(c=void 0===c?{}:c).username,u=Object(d.useContext)(N.c).handleChange;return Object(s.b)(P.a,{type:"digits"===t||a?"digits":"password",supportedCountriesShown:"digits"===t||n,onChange:function(e){return u("username",e)},onSelect:function(e){return u("selectedCountry",e)},defaultSelectedCountry:r,manualValidateError:o||l,defaultValue:i})},L=n(0),z=n(891),U=n(890),F=function(e){var t=e.handleRegister,n=Object(d.useContext)(N.c),a=Object(p.useDispatch)(),r=n.fullnameError,i=n.password,o=n.passwordServerError,c=n.submitDisabled,l=n.setState,u=Object(g.c)((function(e){return function(t){return l(Object(L.a)({},e,t))}}));return Object(s.c)(j.b,{className:"SignFlow-setting",onSubmit:t,children:[Object(s.c)("div",{role:"button",tabIndex:0,className:"SignFlow-back",onClick:function(){return a(w.f.apply(void 0,arguments))},children:[Object(s.b)(k.a,{center:!0,size:28,fill:"#8590a6"}),"返回"]}),Object(s.b)("div",{className:"SignFlow-settingTitle",children:"设置用户名和密码"}),Object(s.b)(z.a,{name:"fullname",placeholder:"用户名",onChange:u("fullname"),manualValidateError:r}),Object(s.b)(U.a,{onChange:u("password"),defaultValue:i,placeholderPrefix:"8 位数字或字母",defaultType:"text",manualValidateError:o}),Object(s.b)(A.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:c,children:"进入知乎"})]},"setting")},H=n(966),V=function(e){var t=e.type,n=e.smsInputInterceptTime,a=e.digitsServerError,r=e.smsType,i=e.reStartTime,o=e.passwordServerError,c=e.password,l=Object(d.useContext)(N.c),u=l.handleSendDigits,h=l.setState,f=Object(g.c)((function(){h({smsBackUpDisplay:!0})})),p=Object(g.c)((function(e){return h({digits:e})})),b=Object(g.c)((function(e){return h({password:e})}));return Object(s.c)(s.a,{children:["digits"===t&&Object(s.b)(s.a,{children:Object(s.b)(H.a,{countDownEvent:u,countDownEndEvent:f,interceptTime:n,manualValidateError:a,smsType:r,reStartTime:i,onChange:p})}),"password"===t&&Object(s.b)(s.a,{children:Object(s.b)(U.a,{onChange:b,manualValidateError:o,defaultValue:c})})]})},Y=n(25),W=function(e){var t=e.smsBackUpName,n=e.smsBackUpDisplay,a=e.isOverSea,r=e.smsType,i=e.type,o=Object(d.useContext)(N.c),c=o.handleChangeType,l=o.setState,u=Object(g.c)((function(){y.a.trackEvent(event.currentTarget,{id:4947}),y.a.trackEvent(void 0,{action:"Click",element:"Button",element_name:"ResetPassword"}),window.open("".concat(Y.E,"/account/password_reset"),"_blank")})),h=Object(g.c)((function(e){y.a.trackEvent(e.currentTarget,{id:4941}),l({smsType:"text"===r?"voice":"text",smsBackUpName:"text"===r?"短信":"语音",reStartTime:Date.now()})}));return Object(s.c)("div",{className:"Login-options",children:[Object(s.b)(A.c,{preset:"plain",className:"Login-switchType",onClick:function(){"digits"!==i&&c(a?"email":"oversea")},children:"digits"!==i&&(a?"邮箱帐号登录":"海外手机号登录")}),Object(s.b)(A.c,{preset:"plain",className:"Login-cannotLogin",onClick:"digits"===i?h:u,children:"digits"===i?n&&"接收".concat(t,"验证码"):"忘记密码？"})]})},G=function(e){var t=e.type,n=e.submitDisabled;return Object(s.c)(s.a,{children:[Object(s.c)(A.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:n,children:["password"===t?"":"注册/","登录"]}),Object(s.b)("div",{className:"SignContainer-tip",children:Object(s.b)("div",{children:Object(s.c)("div",{children:["未注册手机验证后自动登录，注册即代表同意",Object(s.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms",children:"《知乎协议》"}),Object(s.b)("a",{href:"https://www.zhihu.com/term/privacy",children:"《隐私保护指引》"})]})})})]})},J=n(125),K=n(1339),Z=n(49),X=n.n(Z),$=n(130),ee=n(870),te=n(986);function ne(e,t){var n,a=e.onReady,r=e.onVerify,i=e.onClose,o=Object(p.useSelector)((function(e){return e.captcha})).v2,c=Object(d.useRef)(null),l=Object(ee.a)(),u=null==o||null===(n=o.script)||void 0===n?void 0:n[1],h=Object(d.useRef)(null),f=Object(d.useRef)(),b=Object(d.useRef)(),m=Object(d.useState)("init"),O=Object(v.a)(m,2),j=O[0],y=O[1];Object(d.useEffect)((function(){if(null!=o&&o.script){var e=u?X.a.parse(null==u?void 0:u.split("?")[1]).captchaId:"0";return h.current&&h.current!==e?(l.confirm("页面将自动刷新，请在刷新后重试",{title:"验证码已过期",ok:"刷新"}).then((function(){location.reload()})).catch((function(){c.current&&clearTimeout(c.current)})),c.current=setTimeout((function(){location.reload()}),5e3)):h.current=e,function(){c.current&&clearTimeout(c.current)}}}),[o,u,l]),Object(d.useImperativeHandle)(t,(function(){return{get required(){return Boolean(o)},get ready(){return Boolean(b.current)},get type(){var e;return(null===(e=b.current)||void 0===e?void 0:e.type)||"vendor"},show:function(){var e;null===(e=b.current)||void 0===e||e.show()},close:function(){var e;return null===(e=b.current)||void 0===e?void 0:e.close()},refresh:function(){var e;return null===(e=b.current)||void 0===e?void 0:e.refresh()}}}));var w=Object(g.c)((function(e){var t;if(null!==(t=e.script)&&void 0!==t&&t.length){y("loading");var n=e.script.map((function(e){return function(){return Object($.loadScript)(e)}}));Object(te.b)(n).then((function(){return y("mount"),window.ZS_CAP.init({element:f.current,callback:function(e){null==r||r(e)},onClose:i})})).then((function(e){b.current=e,y("ready"),null==a||a()})).catch((function(e){var t;return null===(t=window.Raven)||void 0===t?void 0:t.captureException(e)}))}else y("bypass")}));return Object(d.useEffect)((function(){o&&"init"===j&&w(o)}),[o,j,w]),o?Object(s.b)("div",{ref:f}):null}var ae=h.a.memo(h.a.forwardRef(ne)),re=function(e){var t=e.type,n=e.captchaV2,a=Object(p.useDispatch)();return Object(g.c)((function(){"qrcode"!==t&&(n&&a(Object(J.h)()),a(Object(J.d)("captcha_sign_in")))}))},ie=function(e){var t=e.type,n=e.captchaV2Ref,a=e.onVerify,r=e.lastSubmittedTimestamp,i=Object(p.useDispatch)(),o=Object(d.useContext)(N.c),c=o.continueActionRef,l=o.captchaV2,u=re({type:t,captchaV2:l});Object(d.useEffect)((function(){u()}),[u]);return Object(d.useEffect)((function(){var e;r&&(-1!==r&&(console.log("captcha refresh!"),null===(e=n.current)||void 0===e||e.refresh()))}),[r,n]),Object(s.b)(ae,{ref:n,onVerify:function(e){if(e instanceof Error)return i(Object(C.h)(e.message||"验证失败","red"));if(null==e||!e.type||null==e||!e.result)return i(Object(C.h)("错误的验证方式","red"));var t=e.result;i(Object(J.g)(JSON.stringify(t),!0,"captcha_sign_in")).then((function(e){var t,n=e.payload;null!=n&&n.success&&(null==a||a({result:"success"}),c&&(null===(t=c.current)||void 0===t||t.call(c)))})).catch((function(e){if(null==a||a({result:"fail"}),120001!==e.payload.code)throw i(Object(C.h)(Object(K.b)(e),"red")),e;i(Object(C.h)("页面已过期，请刷新页面重试","red"))})).finally((function(){c&&(c.current=null)}))},onClose:function(){var e;r||(console.log("captcha refresh!"),null===(e=n.current)||void 0===e||e.refresh())}})},oe=n(947),ce=function(e){var t=e.props,n=e.setState,a=e.state,r=t.onChangeType,i=t.type,o=t.captchaV2,c=Object(p.useDispatch)(),s=a.username,l=re({props:t});return Object(g.c)((function(e){c(Object(w.f)()),r(e),"qrcode"!==e&&"password"!==e||y.a.trackEvent(null,{action:"Click",name:"qrcode"===e?"使用二维码登录":"使用密码登录"},{account:{type:"Zhihu"}}),"qrcode"!==e&&(n({username:"password"===i&&Object(oe.a)(s)?"":s,smsBackUpDisplay:!0}),o||l())}))},se=function(e){var t=e.loginConfirmError,n=e.sendDigitsError,a=e.registerValidateErrors,r=Object(p.useDispatch)(),i=t||{},o=i.username,c=i.password,s=i.digits,l=i.captcha,u=i.undefined,d=i.validateDigitsError,h=a||{},f=h.fullname,b=(f=void 0===f?{}:f).message,m=h.password,v=(m=void 0===m?{}:m).message,g=n||{},O=g.username,j=g.undefined;return(u||j)&&r(Object(C.h)(u||j,"red")),{usernameServerError:O||o,passwordServerError:c||v,digitsServerError:s||d,captchaServerError:l,fullnameError:b}},le=function(e){var t=e.setState,n=Object(p.useDispatch)();return Object(g.c)((function(e,a){n(Object(w.f)()),t(Object(L.a)({},e,a))}))},ue=function(e){var t=e.state,n=t.selectedCountry.code,a=t.username;return Object(g.c)((function(){return"+86"!==n||/^\d{11}$/.test(a)}))},de=n(382),he=n(1056);function fe(e,t){if(!e)return{};var n,a=e=e.trim(),r=Object(oe.a)(e);if(!r){var i={hasCode:(n=e).startsWith("+")||n.startsWith("00"),parsedPhoneNo:n.startsWith("00")?"+".concat(n.slice(2)):n};a=i.hasCode?i.parsedPhoneNo:"".concat(t).concat(e)}return{value:a,isEmail:r}}var pe=function(e){var t=e.props,n=e.setState,a=e.runBeforeResetValidateResult,r=e.runBeforeCheckCaptcha,i=e.testPhoneNo,o=e.continueActionRef,c=e.selectedCountry,s=e.captcha,l=e.customErrorInputMap,u=e.username,d=e.trackLoginSuccess,h=t.type,f=t.isOverSea,b=t.nextUrl,m=Object(p.useDispatch)();return Object(g.c)((function(e){y.a.trackEvent(void 0,{id:4948}),a((function(){if("digits"!==h&&!f||i()){var t=function(){var t=Object(de.c)(b),a=t.utm_source,r=t.utm_medium,i=Object.assign(Object.assign({},e),{},{username:fe(e.username,c.code).value,captcha:s,utmSource:a,refSource:r});n({lastSubmittedTimestamp:Date.now()}),m(Object(w.h)(Object(he.a)(h,i))).then((function(e){var t;null!==(t=e.payload)&&void 0!==t&&t.accessToken&&(null==d||d())}))};o.current=t,r().then((function(e){e&&t()})).finally((function(){return n({submitDisabled:!1})}))}else n({customErrorInputMap:Object.assign(Object.assign({},l),{},{username:u?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))}))},be=function(e){var t=e.customErrorInputMap,n=e.smsType,a=e.selectedCountry.code,r=e.username,i=e.testPhoneNo,o=e.captchaV2Ref,c=e.runBeforeResetValidateResult,s=e.setState,l=e.captchaNeeded,u=e.continueActionRef,d=Object(p.useDispatch)();return Object(g.c)((function(e,h){return c((function(){var e;if(i()){var c=fe(r,a).value,f=function(){d(Object(w.j)({username:c,smsType:n,type:"login"})),s({smsBackUpDisplay:!1})};if(!r||l){if(l&&null!==(e=o.current)&&void 0!==e&&e.required){o.current.show();return u.current=function(){f(),h()},!1}s({customErrorInputMap:Object.assign(Object.assign({},t),{},{username:r?"":"请输入手机号"})})}else f()}else s({customErrorInputMap:Object.assign(Object.assign({},t),{},{username:r?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}),!l)}))},me={username:null,password:null,captcha:null,digits:null},ve=function(e){var t=e.setState,n=Object(p.useDispatch)();return Object(g.c)((function(e,a){return n(Object(w.f)()),t({customErrorInputMap:Object.assign({},me),validationResult:{needsRefresh:!1,timestamp:Date.now()}},e),a}))},ge=function(e){var t=e.props,n=e.captchaV2Ref,a=t.captchaValidated,r=t.captchaNeeded;return Object(g.c)((function(){var e;if(!a&&r&&(null!==(e=n.current)&&void 0!==e&&e.required))return n.current.show(),Promise.resolve(!1);return Promise.resolve(!0)}))},Oe=n(420),je=function(e){var t=e.registerConfirmSucceeded,n=e.loginConfirmSucceeded,a=e.sendDigitsError,r=e.nextUrl,i=e.username,o=e.isInSignPage,c=e.loginConfirmError,s=e.captchaValidationMessage,l=e.setState,u=e.loginUnregisteredError,h=e.loginBindWechatError,f=e.type,b=Object(p.useDispatch)();Object(d.useEffect)((function(){!c||u||h||(b(Object(J.i)(f)),b(Object(J.d)()))}),[c,u,h,l,b,f]),Object(d.useEffect)((function(){if(s){var e=s?{smsInputInterceptTime:Date.now()}:{};l(Object.assign({captchaValidated:!1,captchaNeeded:!0},e))}}),[s,l]),Object(d.useEffect)((function(){(n||t)&&(Object(Oe.b)(i),r?location.href=r:o?location.href="/":location.reload())}),[n,t]),Object(d.useEffect)((function(){if(a||!1===n){var e=a?{smsInputInterceptTime:Date.now()}:{};l(Object.assign(Object.assign({},e),{},{captchaValidated:!1,captchaNeeded:!0}))}}),[a,n]),Object(d.useEffect)((function(){(s||a&&null===c)&&l({smsBackUpDisplay:!0})}),[s,a])},ye="UPDATE_STATE",we=function(e){return{smsType:"text",smsBackUpName:"语音",smsBackUpDisplay:!0,reStartTime:-1,supportedCountriesShown:!1,selectedCountry:e.selectedCountry,username:e.username,password:e.password,fullname:"",customErrorInputMap:Object.assign({},me),submitDisabled:!1,lastSubmittedTimestamp:-1}},Ce=function(e,t){var n=t.type,a=t.callback;if(n===ye){var r=t.payload;return a&&a(e),Object.assign(Object.assign({},e),r)}return e},Ae=n(401),ke=function(e){var t=e.props,n=e.captchaV2Ref,a=e.continueActionRef,r=e.setState,i=e.selectedCountry.code,o=e.username,c=e.fullname,s=e.digits,l=e.password,u=Object(p.useDispatch)(),d=ge({props:t,captchaV2Ref:n});return Object(g.c)((function(){var e=function(){u(Object(Ae.f)({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(i).concat(o),fullname:c,digits:s,password:l}))};a&&(a.current=e),r({submitDisabled:!0}),d().then((function(t){return t&&e()})).finally((function(){return r({submitDisabled:!1})}))}))},Se=function(e){var t=e.isInSignPage,n=e.type,a=e.isOversea,r=e.needSMSIdentify,i=e.captchaV2,o=e.registerConfirmSucceeded,c=e.loginConfirmSucceeded,l=e.nextUrl,u=e.captchaNeeded,h=e.loginUnregisteredError,f=e.loginConfirmError,b=e.captchaValidationMessage,m=e.showSwitchTypeIcon,y=e.isSignPage,C=e.selectClassName,A=Object(p.useDispatch)().dispatch,k=Object(d.useReducer)(Ce,e,we),S=Object(v.a)(k,2),E=S[0],T=S[1],B=E.selectedCountry,x=E.username,Q=E.supportedCountriesShown,M=E.customErrorInputMap,_=E.smsInputInterceptTime,P=E.smsType,L=E.reStartTime,z=E.password,U=E.smsBackUpDisplay,H=E.smsBackUpName,Y=E.submitDisabled,J=E.captcha,K=E.fullname,Z=E.digits,X=E.lastSubmittedTimestamp,$=Object(d.useRef)(null),ee=Object(d.useRef)(null),te=Object(d.useRef)(null),ne=Object(O.i)().trackEvent,ae=Object(g.c)((function(){y||ne({block:"".concat(n,"_loginSuccess")})})),re=Object(g.c)((function(e,t){return T({type:ye,payload:e,callback:t})})),oe=ce({props:e,state:E,setState:re,rootRef:te}),de=se(e),he=de.usernameServerError,fe=de.digitsServerError,me=de.passwordServerError,Oe=le({setState:re}),Ae=ue({state:E}),Se=ve({setState:re}),Re=be({customErrorInputMap:M,smsType:P,selectedCountry:B,username:x,runBeforeResetValidateResult:Se,testPhoneNo:Ae,setState:re,captchaNeeded:u,captchaV2Ref:ee,continueActionRef:$}),Ee=ge({props:e,captchaV2Ref:ee}),Ne=pe({props:e,selectedCountry:B,captcha:J,setState:re,runBeforeResetValidateResult:Se,runBeforeCheckCaptcha:Ee,testPhoneNo:Ae,continueActionRef:$,customErrorInputMap:M,username:x,trackLoginSuccess:ae});je({registerConfirmSucceeded:o,loginConfirmSucceeded:c,nextUrl:l,username:x,isInSignPage:t,loginConfirmError:f,captchaValidationMessage:b,setState:re,loginUnregisteredError:h});var Ie=ke({props:e,captchaV2Ref:ee,continueActionRef:$,setState:re,selectedCountry:B,username:x,fullname:K,digits:Z,password:z}),Te=null;if("qrcode"===n){var Be=Object(s.b)(I.a,{ref:te,isInSignPage:t,className:"SignInQrcode",onChangeType:function(){return oe("password")},showSwitchTypeIcon:m,trackLoginSuccess:ae});Te=y?Be:Object(s.b)(O.e,{zaType:"Popup",zaBlock:n,children:Be},n)}else{if(r)return Object(s.b)(R,{ref:te,onBack:function(){return A(Object(w.f)())},phoneNo:"".concat(B.code).concat(x)});if(h&&"digits"==n)Te=Object(s.b)(F,{handleRegister:Ie,setState:re});else{var xe=Object(s.c)(j.b,{className:"SignFlow Login-content",onSubmit:Ne,children:[Object(s.b)(D,{type:n,showSwitchTypeIcon:m}),Object(s.b)(q,{type:n,isOversea:a,supportedCountriesShown:Q,selectedCountry:B,username:x,usernameServerError:he,customErrorInputMap:M}),Object(s.b)(V,{type:n,smsInputInterceptTime:_,digitsServerError:fe,smsType:P,reStartTime:L,passwordServerError:me,password:z}),Object(s.b)(W,{type:n,isOverSea:a,smsBackUpName:H,smsBackUpDisplay:U,smsType:P}),Object(s.b)(ie,{type:n,captchaV2Ref:ee,lastSubmittedTimestamp:X}),Object(s.b)(G,{submitDisabled:Y,type:n})]});Te=y?Object(s.b)(O.e,{zaType:"Popup",zaBlock:n,children:xe},n):xe}}return Object(s.b)(N.b,{handleChangeType:oe,setState:re,dispatch:T,selectClassName:C,handleChange:Oe,testPhoneNo:Ae,handleSendDigits:Re,continueActionRef:$,captchaNeeded:u,captchaV2:i,children:Te})};Se.propTypes={validateAndLogin:u.a.func,resetLoginValidateResult:u.a.func,validateSendDigits:u.a.func,loginConfirmSucceeded:u.a.bool,loginConfirmError:u.a.object,selectClassName:u.a.string,sendDigitsError:u.a.object,captchaValidationMessage:u.a.string,captchaNeeded:u.a.bool,selectedCountry:u.a.object,username:u.a.string,password:u.a.string,type:u.a.oneOf(["password","digits","qrcode"]),onChangeType:u.a.func,isInSignPage:u.a.bool,showSwitchTypeIcon:u.a.bool},Se.defaultProps={selectedCountry:{name:"中国",code:"+86"},username:"",password:""};var Re=Object(p.connect)(E)(Se),Ee=n(221);function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var Ie=function(e){Object(i.a)(n,e);var t=Ne(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={type:e.props.showQrcodeFirst?"qrcode":"digits",isOversea:!1,passwordType:"email"},e.handleSwitchLoginType=function(t){"email"!==t&&"oversea"!==t?e.setState({type:t}):e.setState({type:"password",isOversea:"oversea"===t,passwordType:t})},e}return Object(r.a)(n,[{key:"renderNotification",value:function(){var e=this.props,t=e.notification,n=e.account,a=n.isAppealed,r=n.spamLevel,i=a||r?Y.K:Y.J,o=null;return o=6===r?Object.assign(Object.assign({},t),{},{theme:"red"}):t,Object(s.b)(Ee.a,{notification:o.global,delay:i,className:"AppHeader-notification"})}},{key:"render",value:function(){var e=this.props,t=e.nextUrl,n=e.isInSignPage,a=e.showSwitchTypeIcon,r=e.isSignPage,i=e.selectClassName,o=void 0===i?"Select-popoverTarget":i,c=this.state,l=c.type,u=c.isOversea;return Object(s.c)(s.a,{children:[Object(s.b)(Re,{type:l,isInSignPage:n,isOversea:u,onChangeType:this.handleSwitchLoginType,nextUrl:t,showSwitchTypeIcon:a,isSignPage:r,selectClassName:o}),this.renderNotification()]})}}]),n}(d.Component);Ie.propTypes={nextUrl:u.a.string,isInSignPage:u.a.bool,showSwitchTypeIcon:u.a.bool,selectClassName:u.a.string};var Te=Object(f.compose)(b.withRouter,Object(p.connect)((function(e,t){return{showQrcodeFirst:t.showQrcodeFirst||t.isInSignPage&&["1","2","3"].includes(Object(m.a)(e,"web_login"))||!t.isInSignPage&&"1"===Object(m.a)(e,"PC_login"),notification:e.notification,account:e.account,isSignPage:["/signin","/signup"].includes(t.router.location.pathname)}})))(Ie);t.a=Te},1315:function(e,t,n){"use strict";var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(2),u=n(24),d=n(42),h=n(67),f=n(3),p=n.n(f),b=n(11),m=n.n(b),v=n(96),g=n.n(v),O=n(30),j=n(184),y=n(31),w=n(139),C=n(813),A=n(833),k=n(872),S=n(140),R=n(388),E=n(376),N=n(861),I=n(1135),T=n(37),B=n(94),x=n(377),Q=n(384),M=n(931),_=n(939);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var P=function(e,t){return e&&e.replace(new RegExp(null==t?void 0:t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),(function(e){return"<em>".concat(e,"</em>")}))},q=function(e){Object(i.a)(n,e);var t=D(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={mounted:!1},e.handleInvite=function(){var t=e.props,n=t.user.urlToken,a=t.onInvite;O.a.trackEvent(Object(h.a)(e),{id:3314}),a(n)},e.getContainer=function(){return document.querySelector(".Modal-content .QuestionInvitation-content")},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contributionsCount,a=e.topic,r=e.isInvited,i=e.keyword,o=e.reason,c=t.name,l=Object.assign(Object.assign({},t),{},{name:Object(s.b)(Q.a,{inline:!0,html:P(c,i)})}),u=Object(s.b)(_.a,{user:l,status:o||(n?Object(s.c)("div",{children:["在话题 ",Object(s.b)(M.a,{topic:a})," 下有 ",Object(s.c)(T.Link,{to:"/people/".concat(t.urlToken,"/answers/topic/").concat(a.id),children:[Object(x.formatNumber)(n)," 个回答"]})]}):Object(s.b)(Q.a,{html:t.headline})),action:Object(s.b)(B.a,{as:y.c,zaText:!0,zaType:"Button",zaAction:"Invite",color:r?void 0:"blue",disabled:r,onClick:this.handleInvite,children:r?"已邀请":"邀请回答"}),meta:null}),d={module:"UserItem",index:this.props.index,content:{member_hash_id:t.id},view:{id:i?4436:4437},extra:{search:{raw_query:i||""}},trackCardShow:!0};return this.state.mounted?Object(s.b)(E.a,Object.assign(Object.assign({getContainer:this.getContainer},d),{},{children:u})):u}}]),n}(l.Component),L=n(839),z=n(34);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var F=function(e){Object(i.a)(n,e);var t=U(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleClick=function(){var t=e.props,n=t.questionId,a=t.closeAutoInvite,r=t.openAutoInvite;return"close"===t.item.status?(O.a.trackEvent(null,{id:3313}),r(n)):a(n)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.item,t=void 0===e?{}:e,n=t.avatar,a=t.description,r=t.status,i=t.title,o="close"===r;return Object(s.b)(L.e,{data:t,image:Object(s.b)(j.a,{size:38,url:n}),title:i,meta:Object(s.b)(L.d,{children:a}),className:"AutoInviteItem-wrapper--desktop",extra:Object(s.b)(y.c,{preset:"link",className:o?"AutoInviteItem-button--closed":"AutoInviteItem-button--open",onClick:this.handleClick,children:o?"开启邀请":"已开启"})})}}]),n}(l.Component);F.propTypes={questionId:p.a.number.isRequired,item:p.a.object};var H=Object(u.connect)(null,{openAutoInvite:z.V,closeAutoInvite:z.d})(F),V=n(1131);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var W=function(e){var t=e.user;return Object(s.b)("div",{className:"InviteeItem",children:Object(s.c)("div",{className:"InviteeItem-content",children:[Object(s.b)(j.a,{url:t.avatarUrl,size:32,className:"InviteeItem-image"}),Object(s.b)("h4",{className:"InviteeItem-title",children:t.name})]})})},G=function(e){Object(i.a)(n,e);var t=Y(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={expanded:!1,keyword:null},e.onChange=g()((function(t){e.props.onChange(t)}),300),e.handleChange=function(t){var n=t.target.value;e.setState({keyword:n}),n&&e.onChange(n)},e.handleExpand=function(){O.a.trackEvent(Object(h.a)(e),{action:"LoadMore",element:"Button"}),e.setState({expanded:!0})},e.handleInvite=function(t){var n=e.state.keyword;return(0,e.props.onInvite)(t,n)},e}return Object(r.a)(n,[{key:"renderHeader",value:function(){var e=this.props,t=e.invitees,n=(e.expandCount,Object(s.b)(w.a,{className:"QuestionInvitation-input",placeholder:"搜索你想邀请的人",onChange:this.handleChange,after:Object(s.b)(C.a,{size:18,fill:"grey"}),"data-tooltip":"也可以搜索职业、公司等资料","data-tooltip-position":"bottom"})),a=[t.length?Object(s.c)("span",{children:["你已邀请 ",Object(s.b)(S.a,{toggler:Object(s.c)(y.c,{className:"Invitees-toggler",preset:"plain",children:[Object(s.b)("span",{className:"Invitees-togglerUsers",children:t.slice(0,2).map((function(e,t){return Object(s.c)("span",{children:[0===t?"":"、",Object(s.b)("span",{children:e.name})]},t)}))}),t.length>2&&" 等 ".concat(t.length," 人")]}),toggleEvent:"hover",targetClassName:"Invitees-popover",arrowed:!0,children:Object(s.b)("div",{className:"Invitees",children:t.map((function(e){return Object(s.b)(W,{user:e},e.urlToken)}))})})]}):Object(s.b)("h2",{className:"QuestionInvitation-title",children:"你可以邀请下面用户，快速获得回答"}),n],r=Object(d.a)(a,2),i=r[0],o=r[1];return Object(s.b)(V.a,{header:i,options:o})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,a=t.isDrained,r=t.items,i=t.searchItems,o=t.expandCount,c=t.autoInvitationItem,l=t.question,u=(l=void 0===l?{}:l).id,d=this.state,h=d.expanded,f=d.keyword,p=f?i:r,b=Boolean((void 0===o||o>0)&&!f&&p.length&&c&&c.status),v=b?o-1:o,g=!v||h,O=o?A.d:"div";return Object(s.c)(O,{className:"QuestionInvitation",children:[this.renderHeader(),n?Object(s.b)("div",{className:m()("QuestionInvitation-content","QuestionInvitation-content--centered"),children:Object(s.b)(R.a,{})}):Object(s.c)("div",{className:m()("QuestionInvitation-content",{"QuestionInvitation-content--centered":!p.length}),children:[p.length?Object(s.b)(E.a,{module:"UserList",children:Object(s.c)(k.b,{children:[b&&Object(s.b)(H,{questionId:u,item:c}),(g?p:p.slice(0,v)).map((function(t){return Object(s.b)(k.a,{className:m()({"List-item--mobile":!1}),children:Object(s.b)(q,Object.assign(Object.assign({},t),{},{keyword:f,onInvite:e.handleInvite}))},t.user.urlToken)}))]})}):Object(s.c)(N.k,{children:[Object(s.b)(N.f,{}),Object(s.b)("div",{children:a?"没有可以邀请的人":"没有找到你想邀请的人"})]}),p.length>v&&!g&&Object(s.b)(I.a,{onClick:this.handleExpand,children:"更多推荐结果"})]})]})}}]),n}(l.Component);G.propTypes={expandCount:p.a.number,items:p.a.array,searchItems:p.a.array,onInvite:p.a.func.isRequired};var J=Object(E.b)({module:"InvitationFrame"})(G),K=n(105);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var X=function(e){Object(i.a)(n,e);var t=Z(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleChange=function(t){var n=e.props,a=n.question.id;(0,n.loadItems)(a,"invitationCandidates",{keyword:t})},e.handleInvite=function(t,n){e.props.updateInvitation(e.props.question.id,t,n?"search":"normal")},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,a=t.status,r=(a=void 0===a?{}:a).isLocked,i=a.isClose,o=a.isEvaluate,c=a.isSuggest,s=e.loadItems,l=e.loadAutoInvitation;e.isDrained||r||i||o||c||(s(n,"invitationCandidates"),s(n,"invitees"),l(n))}},{key:"render",value:function(){var e=this.props.question.status,t=e.isLocked,n=e.isClose,a=e.isEvaluate,r=e.isSuggest;return t||n||a||r?null:Object(s.b)(J,Object.assign({onChange:this.handleChange,onInvite:this.handleInvite},this.props))}}]),n}(l.Component);t.a=Object(u.connect)((function(e,t){var n=t.question.id,a=e.entities,r=a.users,i=a.topics,o=e.question,c=o.invitationCandidates,s=o.invitees,l=o.autoInvitation,u=function(e){var t=e.member,n=e.isInvited,a=e.topicContributions,o=e.reason,c=a&&a.sort((function(e,t){return t.contributionsCount-e.contributionsCount}))[0]||{},s=c.topic,l=c.contributionsCount;return{user:r[t],topic:i[s],isInvited:n,contributionsCount:l,reason:o}},d=c[n]||{isFetching:!1,isDrained:!1,items:[],searchItems:[]},h=d.isFetching,f=d.isDrained,p=d.items,b=d.searchItems,m=(s[n]||{items:[]}).items;return{isFetching:h,isDrained:f,items:p.map(u),searchItems:b.map(u),invitees:m.map((function(e){return r[e]})),autoInvitationItem:l[n]}}),{loadItems:K.R,updateInvitation:K.mb,loadAutoInvitation:K.G})(X)},1318:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var a=n(0),r=n(13),i=n(14),o=n(67),c=n(15),s=n(17),l=n(9),u=n(1),d=n(2),h=n(18),f=n(24),p=n(11),b=n.n(p),m=n(30),v=n(382),g=n(31),O=n(2578),j=n(376),y=n(25),w=n(401),C=n(125),A=n(868),k=n(925),S=n(883),R=n(966),E=n(890),N=n(891),I=n(39),T=n.n(I);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var x={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},Q=function(e){Object(c.a)(n,e);var t=B(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).handleCountDownEndEvent=function(){i.setState({smsBackUpDisplay:!0})},i.handleChange=function(e){return function(t){i.setState(Object(a.a)({},e,t))}},i.testPhoneNo=function(){var e=i.state,t=e.selectedCountry.code,n=e.phoneNo;return"+86"!==t||/^\d{11}$/.test(n)},i.handleBackUpDigits=function(){i.setState({smsType:"text"===i.state.smsType?"voice":"text",reStartTime:Date.now()})},i.sendDigits=function(){var e=i.props,t=e.sendDigits,n=e.validateRegisterForm;(0,e.resetRegisterValidateResult)();var a=i.state,r=a.phoneNo,o=a.selectedCountry,c=a.smsType,s="".concat(o.code).concat(r);n({phoneNo:s}).then((function(e){if(e.payload.success)return i.setState({smsBackUpDisplay:!1}),void t(s,c);i.setState({smsInputInterceptTime:Date.now()})}))},i.runBeforeCheckCaptcha=function(e){var t=i.state.captcha,n=i.props,a=n.captchaNeeded,r=n.checkCaptcha;if(!i.captchaValidated&&a)return t?void r(t,i.captchaIsChinese?"cn":"en").then((function(t){t.payload.success&&(i.captchaValidated=!0,e())})):void i.setState({validationResult:{message:i.captchaIsChinese?"请点击图中倒立的文字":"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});e()},i.runBeforeResetValidateResult=function(e){i.props.resetRegisterValidateResult(),i.setState({customErrorInputMap:Object.assign({},x),validationResult:{needsRefresh:!1,timestamp:Date.now()}},(function(){e()}))},i.handleSendDigits=function(){m.a.trackEvent(Object(o.a)(i),{id:4940}),i.runBeforeResetValidateResult((function(){var e=i.state.phoneNo;i.testPhoneNo()?i.runBeforeResetValidateResult((function(){i.runBeforeCheckCaptcha((function(){i.sendDigits()}))})):i.setState({customErrorInputMap:Object.assign(Object.assign({},i.state.customErrorInputMap),{},{phoneNoError:e?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))},i.parseErrorMessages=function(){var e=i.props,t=e.registerValidateErrors,n=void 0===t?{}:t,a=e.onChangeToSigin,r=n.phoneNo,o=void 0===r?{}:r,c=n.fullname,s=void 0===c?{}:c,l=n.password,d=void 0===l?{}:l,h=n.username,f=void 0===h?"":h,p=o.code,b=o.message;return{phoneNoError:p===y.s?Object(u.c)("span",{children:["该手机号已注册 · ",Object(u.b)(g.c,{preset:"plain",style:{color:"#3f3f3f"},onClick:function(){a()},children:"直接登录"})]}):b,fullnameError:s.message,passwordError:d.message,usernameError:f}},i.handlePhoneNumberFormSubmit=function(e){m.a.trackEvent(Object(o.a)(i),{id:4942}),i.runBeforeCheckCaptcha((function(){i.runBeforeResetValidateResult((function(){var t=e.digits,n=i.props,a=n.validateDigits,r=n.onSetShowHeader,o=i.state,c=o.phoneNo,s=o.selectedCountry;c&&t&&a("".concat(s.code).concat(c),t).then((function(e){e.payload.success?i.setState({digitsValidated:!0},(function(){r(!1)})):i.setState({customErrorInputMap:Object.assign(Object.assign({},i.state.customErrorInputMap),{},{digitsError:"验证码填写错误"})})}))}))}))},i.handleSetNameFormSubmit=function(e){i.runBeforeCheckCaptcha((function(){i.runBeforeResetValidateResult((function(){var t=i.state,n=t.phoneNo,a=t.digits,r=t.password,o=t.fullname,c=t.selectedCountry,s=i.props,l=s.confirmRegister,u=s.validateRegister,d=s.nextUrl,h={phoneNo:"".concat(c.code).concat(n),password:r,digits:a,fullname:o},f=Object(v.c)(d),p=f.utm_source,b=f.utm_medium;u(h).then((function(t){t.payload.success&&l({phoneNo:"".concat(c.code).concat(n),digits:a,password:r,fullname:o||e.fullname,registerType:"phone_digits",source:"com.zhihu.web",utmSource:p,refSource:b})}))}))}))},i.state={fullname:"",password:"",captcha:"",phoneNo:"",digits:"",smsType:"text",digitsValidated:!1,smsBackUpDisplay:!0,selectedCountry:{name:"中国",code:"+86"},validationResult:{},customErrorInputMap:Object.assign({},x),smsInputInterceptTime:-1,reStartTime:Date.now()},i.captchaIsChinese=Math.random()<.5,i}return Object(i.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.captchaValidationMessage,a=t.registerConfirmSucceeded,r=t.sendDigitsError,i=t.isInSignPage,o=t.nextUrl,c=e.captchaValidationMessage,s=e.registerConfirmSucceeded,l=e.sendDigitsError;if(!a&&s){var u=this.state,d=u.selectedCountry.code,h=u.phoneNo;return m.a.trackEvent(this,{action:"StatusReport",id:234},{status:{result:"Success",event:{action:"SignUp",element:"Button"}},account:{phone:"".concat(d).concat(h),type:"Zhihu"}}),void(o?location.href=o:i?location.href="/":location.reload())}if(!r&&l||a!==s&&!1===s){var f={};!r&&l&&(f={smsInputInterceptTime:Date.now(),smsBackUpDisplay:!0},this.captchaValidated=!1),this.setState(Object.assign(Object.assign({},f),{},{validationResult:{message:r,needsRefresh:!0,timestamp:Date.now()}}))}!n&&c&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:c,needsRefresh:Boolean(c),timestamp:Date.now()}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.phoneNo,a=t.smsType,r=t.password,i=t.reStartTime,o=t.digitsValidated,c=t.validationResult,s=t.smsBackUpDisplay,l=t.customErrorInputMap,h=t.smsInputInterceptTime,f=this.props,p=f.sendDigitsError,v=f.onSetShowHeader,j=this.parseErrorMessages(),y=j.phoneNoError,w=j.fullnameError,C=j.passwordError,I=j.usernameError,B=l.phoneNoError,x=l.digitsError;return Object(u.b)("div",{className:"Register",children:o?Object(u.c)("div",{className:"Register-padName",children:[Object(u.c)("div",{className:"Register-padNameHeader",children:[Object(u.b)(g.c,{onClick:function(){e.setState({digitsValidated:!1},(function(){v(!0)}))},children:Object(u.b)(O.a,{size:30})}),Object(u.b)("span",{className:"Register-padNameTitle",children:"设置用户名和密码"})]}),Object(u.c)(A.b,{onSubmit:this.handleSetNameFormSubmit,children:[Object(u.b)(N.a,{name:"fullname",placeholder:"用户名",onChange:this.handleChange("fullname"),manualValidateError:w}),Object(u.b)(E.a,{defaultValue:r,onChange:this.handleChange("password"),manualValidateError:C}),Object(u.b)(g.c,{className:"Register-getIn",type:"submit",preset:"primary",color:"blue",children:"进入知乎"})]})]}):Object(u.b)(d.Fragment,{children:Object(u.c)("div",{className:"Register-content",children:[Object(u.c)(A.b,{onSubmit:this.handlePhoneNumberFormSubmit,children:[Object(u.b)(S.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:y||B||I}),Object(u.b)(k.a,{className:"SignFlow-captchaContainer Register-captcha",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:Boolean(n),onUpdateInput:this.handleChange("captcha"),validationResult:c}),Object(u.c)("div",{className:"Register-SMSInput",children:[Object(u.b)(R.a,{smsType:a,reStartTime:i,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:h,manualValidateError:x||p}),Object(u.b)("div",{className:b()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!s}),children:Object(u.c)("span",{role:"button",tabIndex:0,onClick:this.handleBackUpDigits,children:["接收","text"===a?"语音":"短信","验证码"]})})]}),Object(u.b)(g.c,{className:"Register-submitButton",preset:"primary",color:"blue",type:"submit",children:"注册"})]}),Object(u.c)("div",{className:"Register-footer",children:[Object(u.c)("span",{className:"Register-declaration",children:["注册即代表同意",Object(u.b)("a",{href:"//".concat(T.a.wwwHost,"/term/zhihu-terms"),children:"《知乎协议》"}),Object(u.b)("a",{href:"//".concat(T.a.wwwHost,"/term/privacy"),children:"《隐私保护指引》"})]}),Object(u.b)("a",{className:"Register-org",href:"//".concat(T.a.wwwHost,"/org/signup"),onClick:function(e){return m.a.trackEvent(e.currentTarget,{id:4943})},children:"注册机构号"})]})]})})})}}]),n}(d.Component),M=(Object(h.compose)(Object(j.b)((function(){return{module:"SignUpForm",view:{id:233},trackCardShow:!0}})),Object(f.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register;return{captchaNeeded:n,sendDigitsError:r.sendDigitsError,registerValidateErrors:r.registerValidateErrors,captchaValidationMessage:a,registerConfirmSucceeded:r.registerConfirmSucceeded}}),{sendDigits:w.e,checkCaptcha:C.b,validateDigits:w.g,confirmRegister:w.a,validateRegister:w.h,validateRegisterForm:w.i,resetRegisterValidateResult:w.d}))(Q),n(981),n(192)),_=n.n(M),D=n(386),P=n(26),q=n(1056);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var z={phoneNoError:null,fullnameError:null,digitsError:null},U=function(e){Object(c.a)(n,e);var t=L(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={fullname:e.props.defaultFullname||"",avatarPath:"",phoneNo:"",digits:"",captcha:"",isRegister:null,smsBackUpDisplay:!0,smsType:"text",selectedCountry:{name:"中国",code:"+86"},smsInputInterceptTime:-1,reStartTime:-1,customErrorInputMap:Object.assign({},z),validationResult:{}},e.captchaIsChinese=Math.random()<.5,e.getSocialInfo=function(t){var n=t||e.props,a=n.getSocialInfo,r=n.socialType;r&&a(r).then((function(t){var n=t.payload,a=n.name,r=n.profileImageUrl;e.setState({avatarPath:r.split("/").reverse()[0],fullname:a})}))},e.testPhoneNo=function(){var t=e.state,n=t.selectedCountry.code,a=t.phoneNo;return"+86"!==n||/^\d{11}$/.test(a)},e.handleChange=function(t){return function(n){e.setState(Object(a.a)({},t,n))}},e.handleBackUpDigits=function(){e.setState({smsType:"text"===e.state.smsType?"voice":"text",reStartTime:Date.now()})},e.handleCountDownEndEvent=function(){e.setState({smsBackUpDisplay:!0})},e.parseServerError=function(t){var n=t||e.props,a=n.showNotification,r=n.registerValidateErrors,i=n.loginConfirmError,o=n.registerConfirmError,c=n.sendDigitsError,s=i||{},l=s.username,u=s.password,d=s.digits,h=s.captcha,f=o||{},p=f.username,b=f.password,m=f.digits,v=f.undefined;v&&a(v,"red");var g=c||{},O=g.username,j=g.captcha,y=(r||{}).fullname;return{usernameServerError:l||O,passwordServerError:u||b,digitsServerError:d||m,captchaServerError:h||j,fullnameServerError:(y=void 0===y?{}:y).message||p}},e.runBeforeCheckCaptcha=function(t){var n=e.state.captcha,a=e.props,r=a.captchaNeeded,i=a.checkCaptcha;if(!e.captchaValidated&&r)return n?void i(n,e.captchaIsChinese?"cn":"en").then((function(n){n.payload.success&&(e.captchaValidated=!0,t())})):void e.setState({validationResult:{message:e.captchaIsChinese?"请点击图中倒立的文字":"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},e.runBeforeResetValidateResult=function(t){e.setState({customErrorInputMap:Object.assign({},z),validationResult:{needsRefresh:!1,timestamp:Date.now()}},(function(){t()}))},e.handleSendDigits=function(){var t=e.state.phoneNo;t&&e.testPhoneNo()?e.runBeforeCheckCaptcha((function(){e.runBeforeCheckCaptcha(e.sendDigits)})):e.setState({customErrorInputMap:Object.assign(Object.assign({},e.state.customErrorInputMap),{},{phoneNoError:t?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})},e.sendDigits=function(){var t=e.state,n=t.selectedCountry,a=t.phoneNo,r=t.smsType,i=e.props.sendLoginDigits;e.props.validateRegisterForm({phoneNo:"".concat(n.code).concat(a)}).then((function(t){var o=t.payload;e.setState({smsBackUpDisplay:!1,isRegister:!(o.phoneNo&&o.phoneNo.code===y.s)}),i("".concat(n.code).concat(a),r)}))},e.handleSumbit=function(){e.runBeforeCheckCaptcha((function(){e.runBeforeResetValidateResult((function(){var t=e.state,n=t.selectedCountry,a=t.phoneNo,r=t.digits,i=t.isRegister,o=t.fullname,c=t.avatarPath,s=e.props,l=s.validateAndLogin,u=s.validateAndRegister,d=s.nextUrl,h=s.socialType,f=Object(v.c)(d),p=f.utm_source,b=f.utm_medium;i?u(Object.assign(Object.assign({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(n.code).concat(a),fullname:o,digits:r,refSource:b,utmSource:p},c&&{avatarPath:c}),h&&{socialRegisterType:h})):l(Object(q.a)("digits",{username:"".concat(n.code).concat(a),digits:r,refSource:b,utmSource:p}))}))}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){if(_.a.get("atoken")){this.getSocialInfo();var e=_.a.get("accountcallback");if(!this.state.fullname&&e){var t=JSON.parse(decodeURIComponent(e));this.setState({fullname:t.fullname})}}else this.props.onResetRegister()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.nextUrl,a=t.socialType,r=t.defaultFullname,i=t.sendDigitsError,o=t.loginConfirmError,c=t.loginConfirmSucceeded,s=t.registerConfirmSucceeded,l=t.captchaValidationMessage,u=e.socialType,d=e.defaultFullname,h=e.sendDigitsError,f=e.loginConfirmError,p=e.loginConfirmSucceeded,b=e.registerConfirmSucceeded,m=e.captchaValidationMessage;if(!a&&u&&this.getSocialInfo(e),r!==d&&this.setState({fullname:d}),!c&&p||!s&&b)n?location.href=n:location.reload();else{if(!o&&f&&f.validateDigitsError&&this.setState({customErrorInputMap:Object.assign(Object.assign({},this.state.customErrorInputMap),{},{digitsError:f.validateDigitsError}),smsInputInterceptTime:Date.now()}),!i&&h){var v=this.parseServerError(e).captchaServerError;this.setState({validationResult:{message:v,needsRefresh:!0,timestamp:Date.now()},smsInputInterceptTime:Date.now()})}!l&&m&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:m,needsRefresh:Boolean(m),timestamp:Date.now()}})}}},{key:"render",value:function(){var e=this.state,t=e.smsInputInterceptTime,n=e.customErrorInputMap,a=e.smsBackUpDisplay,r=e.validationResult,i=e.reStartTime,o=e.isRegister,c=e.phoneNo,s=e.smsType,l=e.fullname,d=this.props.onResetRegister,h=n.phoneNoError,f=n.digitsError,p=this.parseServerError(),m=p.usernameServerError,v=p.fullnameServerError,j=p.digitsServerError;return Object(u.c)(A.b,{className:"Register-content",onSubmit:this.handleSumbit,children:[Object(u.b)("div",{className:"Register-socialHeader",children:Object(u.c)("div",{className:"Register-socialTitle",children:[Object(u.b)(g.c,{onClick:d,children:Object(u.b)(O.a,{size:30})}),"绑定手机号"]})},"header"),Object(u.b)(N.a,{className:b()("Register-socialName",{"Register-hiddenSocialName":!o}),name:"fullname",placeholder:"用户名",value:l,onChange:this.handleChange("fullname"),manualValidateError:v,validations:[]},"fullname"),Object(u.b)(S.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:h||m}),Object(u.b)(k.a,{className:"SignFlow-captchaContainer",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:Boolean(c),onUpdateInput:this.handleChange("captcha"),validationResult:r}),Object(u.b)(R.a,{smsType:s,reStartTime:i,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:t,manualValidateError:f||j}),Object(u.b)("div",{className:b()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!a}),children:Object(u.c)("span",{role:"button",tabIndex:0,onClick:this.handleBackUpDigits,children:["接收","text"===s?"语音":"短信","验证码"]})}),Object(u.b)(g.c,{className:"Register-submitButton",type:"submit",preset:"primary",color:"blue",children:"进入知乎"})]})}}]),n}(d.Component),F=Object(f.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register,i=r.registerConfirmError,o=r.registerValidateErrors,c=r.registerConfirmSucceeded,s=e.login,l=s.loginConfirmSucceeded,u=s.validateDigitsError,d=s.loginConfirmError;return{captchaNeeded:n,sendDigitsError:s.sendDigitsError,registerConfirmError:i,registerValidateErrors:o,captchaValidationMessage:a,registerConfirmSucceeded:c,loginConfirmSucceeded:l,validateDigitsError:u,loginConfirmError:d}}),{showNotification:P.h,checkCaptcha:C.b,validateDigits:D.i,sendLoginDigits:D.g,validateAndLogin:D.h,validateAndRegister:w.f,getSocialInfo:w.c,validateRegisterForm:w.i,resetLoginValidateResult:D.f,resetRegisterValidateResult:w.d})(U)},1320:function(e,t,n){"use strict";var a=n(1),r=n(2),i=n.n(r),o=n(136),c=Object.assign;var s=function(e){return i.a.createElement(o.a,c({viewBox:"0 0 15 15"},e),i.a.createElement("g",{fill:"#ffab2e",fillRule:"evenodd"},i.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},l=Object.assign;var u=function(e){return i.a.createElement(o.a,l({width:"15",height:"15",viewBox:"0 0 15 15"},e),i.a.createElement("g",{fillRule:"evenodd"},i.a.createElement("path",{fill:"#d7d8d9",d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i.a.createElement("path",{fill:"#ffab2e",d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},d=Object.assign;var h=function(e){return i.a.createElement(o.a,d({viewBox:"0 0 15 15"},e),i.a.createElement("g",{fill:"#d7d8d9",fillRule:"evenodd"},i.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return Object(a.b)("div",{className:"Rating",children:Array.from({length:5}).map((function(e,t){var r=function(e,t){return t>=e+1?s:t>=e+.5?u:h}(t,n);return Object(a.b)(r,{size:15},t)}))})}},1328:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(2),h=n(18),f=n(37),p=n(192),b=n.n(p),m=n(382),v=n(2579),g=n(2580),O=n(2581),j=n(31),y=n(30),w=n(378),C=n(1021),A={sina:"Weibo",qq:"QQ",wechat:"Wechat"};var k=n(420);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var R="/oauth/account_callback",E={qqconn:"/oauth/redirect/login/qqconn?next=",sina:"/oauth/redirect/login/sina?next=",wechat:"/oauth/redirect/login/wechat?next="};function N(e){return"sina"!==e||!/WindowsWechat/.test(navigator.userAgent)}var I=function(e){Object(i.a)(n,e);var t=S(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).accountCallback=function(t){var n=e.props,a=n.onRegister,r=n.nextUrl,i=t.login,o=t.type,c=t.fullname;i?(Object(k.b)(e.clickedServiceName),e.handleLogSocialLoginSuccess(),r?location.href=r:location.reload()):a({bySocial:!0,socialType:o,fullname:c})},e.handleBuildSocialAuthLink=function(t){e.clickedServiceName=t,e.handleLogSingleSocialButtonClick(t);var n=E[t],a=Object(m.c)(),r=a.utm_source,i=a.utm_medium;N(t)?(e.ready(),window.open("https://www.zhihu.com".concat(n).concat(R).concat(r?"&utm_source=".concat(r):"","&ref_source=").concat(i),"_blank","top=200,left=400,width=600,height=550,directories=no,menubar=no,toolbar=no")):location.href="https://www.zhihu.com".concat(n).concat(R,"&from=").concat(encodeURIComponent(e.parseNextInfoFromUrl()))},e.handleEntranceButtonClick=function(t){e.props.onEntranceButtonClick&&e.props.onEntranceButtonClick(t),e.handleLogSocialLogin(),e.setState((function(e){return{socialButtonExpanded:!e.socialButtonExpanded}}))},e.parseNextInfoFromUrl=function(){var t=e.props.router.location.query.next,n="/";if(t)try{n=decodeURIComponent(t)}catch(e){n=unescape(t)}return n},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){if(document.referrer.startsWith("https://www.zhihu.com/oauth/callback/sina")){var e=b.a.get("atoken"),t=b.a.get("accountcallback");if(e&&t){var n=JSON.parse(decodeURIComponent(t));if(!n)return;var a=n.fullname,r=n.type;(0,this.props.onRegister)({fullname:a,socialType:r})}}}},{key:"componentWillUnmount",value:function(){this.unready()}},{key:"ready",value:function(){window.NWEB={accountCallback:this.accountCallback},this.domain=document.domain,document.domain="zhihu.com"}},{key:"unready",value:function(){if(window.NWEB&&"www.zhihu.com"===location.host){try{document.domain=this.domain}catch(e){}delete window.NWEB}}},{key:"handleLogSocialLogin",value:function(){y.a.trackEvent(this,{action:"Click",element:"Button",element_name:"SNSSignIn"})}},{key:"handleLogSingleSocialButtonClick",value:function(e){var t,n,a,r;t=this,n="SignIn",a={type:A[e]},y.a.trackEvent(t,{action:n,element:"Button",element_name:r},{account:a})}},{key:"handleLogSocialLoginSuccess",value:function(){var e,t,n,a,r=this.props,i=r.router,o=r.trackEvent;["/signin","/signup"].includes(i.location.pathname)||o({block:"".concat(this.clickedServiceName,"_loginSuccess")}),e=this,t="SignIn",n=this.clickedServiceName,y.a.trackEvent(e,{id:236,action:"StatusReport",element_name:a},{status:{result:"Success",event:{action:t,element:"Button"}},account:n})}},{key:"render",value:function(){var e=this;return Object(s.c)("div",{className:"Login-socialLogin",children:[Object(s.b)("span",{children:"社交帐号登录"}),Object(s.c)("span",{className:"Login-socialButtonGroup",children:[Object(s.c)(j.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("wechat")},children:[Object(s.b)(v.a,{className:"Login-socialIcon",fill:"#60c84d",size:20}),"微信"]}),Object(s.c)(j.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("qqconn")},children:[Object(s.b)(g.a,{className:"Login-socialIcon",fill:"#50c8fd",size:20}),"QQ"]}),Object(s.c)(j.c,{className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("sina")},children:[Object(s.b)(O.a,{className:"Login-socialIcon",fill:"#fb6622",size:20}),"微博"]})]})]})}}]),n}(d.Component);I.propTypes={onRegister:u.a.func.isRequired,onEntranceButtonClick:u.a.func};var T=Object(h.compose)(f.withRouter,C.a)(I);function B(e){var t=Object(w.b)();return/bux/.test(t.origin)?null:Object(s.b)(T,Object.assign({},e))}},1372:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n(4),r=n(900),i=n(377),o=function(e){return{name:"description",property:"og:description",content:e}},c=function(e,t){var n=[];if(e&&e.content){var a=Object(r.c)(e.content,100);a&&n.push(o(a))}if(t){var i=t.map((function(e){return e.name})).join(",");i&&n.push({name:"keywords",content:i})}return n},s=function(e,t){var n=[];if(e&&e.detail){var i=Object(r.c)(e.detail,100);i&&n.push(o(i))}else t&&t.content&&n.push.apply(n,Object(a.a)(c(t)));if(e.topics){var s=e.topics.map((function(e){return e.name})).join(",");if(s){var l={name:"keywords",content:s};n.push(l)}}return n},l=function(e){if(e){var t=e.headline,n=void 0===t?"":t,a=e.answerCount,r=void 0===a?0:a,c=e.voteupCount,s=void 0===c?0:c,l="".concat(n," 回答数 ").concat(Object(i.formatNumber)(r),"，获得 ").concat(Object(i.formatNumber)(s)," 次赞同");return[o(l)]}return[]}},1454:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(21),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M12 2a10 10 0 1 0 0 20c5.523 0 10-4.477 10-10S17.523 2 12 2zm2.081 15.497c-.407.163-.818.318-1.231.464a3.224 3.224 0 0 1-1.069.161c-.624 0-1.107-.15-1.452-.457a1.471 1.471 0 0 1-.518-1.156c0-.183.013-.369.038-.559.026-.187.068-.402.125-.642l.644-2.276c.054-.205.102-.412.145-.618.037-.177.056-.356.057-.536 0-.29-.06-.493-.179-.607-.121-.115-.35-.171-.687-.171a1.814 1.814 0 0 0-.513.076 7.067 7.067 0 0 0-.45.15l.171-.702c.398-.163.8-.31 1.21-.441.387-.123.75-.184 1.093-.184.619 0 1.096.15 1.432.45.334.297.503.686.503 1.163 0 .1-.012.274-.035.523-.02.232-.062.462-.13.686l-.64 2.268a7.016 7.016 0 0 0-.143.622 3.374 3.374 0 0 0-.06.53c0 .303.068.508.202.617.135.108.369.164.701.164.156 0 .331-.027.53-.08.198-.056.337-.103.427-.144l-.17.7zM13.97 8.29c-.292.275-.68.424-1.08.416a1.55 1.55 0 0 1-1.085-.416 1.331 1.331 0 0 1-.45-1.011c0-.393.15-.733.45-1.013.302-.281.665-.42 1.085-.42.421 0 .781.139 1.08.42.298.28.447.62.447 1.013 0 .396-.15.732-.447 1.011z",fillRule:"evenodd"}))};o.defaultProps={name:"Info"},t.a=o},1456:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(21),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M5.74 4h12.52c.961 0 1.74.775 1.74 1.73V16.27c0 .955-.779 1.73-1.74 1.73h-3.825l-1.658 2.044a1 1 0 0 1-1.554 0l-1.658-2.044H5.74C4.78 18 4 17.224 4 16.27V5.73C4 4.775 4.778 4 5.74 4zM7 8.98c0 .554.449.996 1.003.996h4.994A.992.992 0 0 0 14 8.981a.997.997 0 0 0-1.003-.995H8.003A.992.992 0 0 0 7 8.98zm0 4c0 .554.446.996.995.996h8.01a.993.993 0 0 0 .995-.995.993.993 0 0 0-.995-.995h-8.01A.993.993 0 0 0 7 12.98z",fillRule:"evenodd"}))};o.defaultProps={name:"Community"},t.a=o},1457:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(21),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M13.693 10.354l1.634-7.542c.195-.901-.16-1.083-.798-.39l-9.18 9.97c-.638.693-.377 1.254.582 1.254h5.376l-1.634 7.542c-.195.901.16 1.083.798.39l9.18-9.97c.638-.693.377-1.254-.582-1.254h-5.376z"}))};o.defaultProps={name:"Live"},t.a=o},1458:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(21),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M16 17.649V2.931a.921.921 0 0 0-.045-.283.943.943 0 0 0-1.182-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.934.934 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886z",fillRule:"evenodd"}))};o.defaultProps={name:"Ebook"},t.a=o},1459:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(21),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M11.267 10.188h-2.69a.26.26 0 0 0-.261.26v.508c0 .149.117.26.262.26h2.896v1.54H8.578a.26.26 0 0 0-.262.259v.508c0 .15.117.26.262.26h2.896v2.31c0 .139.119.257.265.257h.522a.258.258 0 0 0 .265-.257v-2.31h2.896a.26.26 0 0 0 .262-.26v-.508a.257.257 0 0 0-.262-.26h-2.896v-1.54h2.896a.26.26 0 0 0 .262-.26v-.507a.257.257 0 0 0-.262-.26h-2.69l2.51-2.636a.26.26 0 0 0-.004-.366l-.423-.413a.253.253 0 0 0-.36.01L12 9.418 9.545 6.784a.248.248 0 0 0-.36-.011l-.423.413a.264.264 0 0 0-.004.366l2.509 2.636zM12 19.973c-1.101 0-2.16-.15-3.152-.43-.532.18-5.27 2.177-4.743 1.179.527-.998 1.58-2.746.806-3.25C3.11 15.936 2 13.822 2 11.486 2 6.8 6.477 3 12 3s10 3.8 10 8.487-4.477 8.486-10 8.486z"}))};o.defaultProps={name:"Infinity"},t.a=o},1460:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(21),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M21 9.749v9.91c0 .74-.604 1.341-1.35 1.341H4.35C3.604 21 3 20.4 3 19.659V9.319c0-.503.283-.963.733-1.193l4.892-2.5V3.341c0-.74.604-1.341 1.35-1.341.267 0 .527.078.749.225l9.675 6.408c.375.249.601.668.601 1.116zM8.297 8.307L5.372 9.802A.223.223 0 0 0 5.25 10v8.54c0 .124.1.224.225.224h8.586a.223.223 0 1 0 .124-.41l-4.959-3.259a1.339 1.339 0 0 1-.601-1.116V8.506a.224.224 0 0 0-.328-.199z"}))};o.defaultProps={name:"KnowledgeBase"},t.a=o},1479:function(e,t,n){"use strict";var a=i(n(1480)),r=i(n(1217));function i(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:r.default,CSSTransitionGroup:a.default}},1480:function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=l(n(2)),i=l(n(3)),o=l(n(1217)),c=l(n(1484)),s=n(1221);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}s.nameShape.isRequired,i.default.bool,i.default.bool,i.default.bool,(0,s.transitionTimeout)("Appear"),(0,s.transitionTimeout)("Enter"),(0,s.transitionTimeout)("Leave");var h=function(e){function t(){var n,a;u(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=a=d(this,e.call.apply(e,[this].concat(o))),a._wrapChild=function(e){return r.default.createElement(c.default,{name:a.props.transitionName,appear:a.props.transitionAppear,enter:a.props.transitionEnter,leave:a.props.transitionLeave,appearTimeout:a.props.transitionAppearTimeout,enterTimeout:a.props.transitionEnterTimeout,leaveTimeout:a.props.transitionLeaveTimeout},e)},d(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return r.default.createElement(o.default,a({},this.props,{childFactory:this._wrapChild}))},t}(r.default.Component);h.displayName="CSSTransitionGroup",h.propTypes={},h.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=h,e.exports=t.default},1481:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},1482:function(e,t,n){e.exports=n(59)(28)},1483:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return a.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},r=[];for(var i in e)t.hasOwnProperty(i)?r.length&&(a[i]=r,r=[]):r.push(i);var o=void 0,c={};for(var s in t){if(a.hasOwnProperty(s))for(o=0;o<a[s].length;o++){var l=a[s][o];c[a[s][o]]=n(l)}c[s]=n(s)}for(o=0;o<r.length;o++)c[r[o]]=n(r[o]);return c};var a=n(2)},1484:function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=h(n(1218)),i=h(n(1219)),o=h(n(1485)),c=n(1486),s=h(n(2)),l=h(n(3)),u=n(44),d=n(1221);function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=[];c.transitionEnd&&b.push(c.transitionEnd),c.animationEnd&&b.push(c.animationEnd);l.default.node,d.nameShape.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.number;var m=function(e){function t(){var n,a;f(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=p(this,e.call.apply(e,[this].concat(i))),a.componentWillAppear=function(e){a.props.appear?a.transition("appear",e,a.props.appearTimeout):e()},a.componentWillEnter=function(e){a.props.enter?a.transition("enter",e,a.props.enterTimeout):e()},a.componentWillLeave=function(e){a.props.leave?a.transition("leave",e,a.props.leaveTimeout):e()},p(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var a=(0,u.findDOMNode)(this);if(a){var o=this.props.name[e]||this.props.name+"-"+e,s=this.props.name[e+"Active"]||o+"-active",l=null,d=void 0;(0,r.default)(a,o),this.queueClassAndNode(s,a);var h=function(e){e&&e.target!==a||(clearTimeout(l),d&&d(),(0,i.default)(a,o),(0,i.default)(a,s),d&&d(),t&&t())};n?(l=setTimeout(h,n),this.transitionTimeouts.push(l)):c.transitionEnd&&(d=function(e,t){return b.length?b.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){b.length&&b.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(a,h))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,o.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,r.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=a({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,s.default.cloneElement(s.default.Children.only(this.props.children),e)},t}(s.default.Component);m.displayName="CSSTransitionGroupChild",m.propTypes={},t.default=m,e.exports=t.default},1485:function(e,t,n){"use strict";var a=n(129);t.__esModule=!0,t.default=void 0;var r,i=a(n(1220)),o="clearTimeout",c=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),a=setTimeout(e,n);return l=t,a},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some((function(e){var t=s(e,"request");if(t in window)return o=s(e,"cancel"),c=function(e){return window[t](e)}}));var l=(new Date).getTime();(r=function(e){return c(e)}).cancel=function(e){window[o]&&"function"==typeof window[o]&&window[o](e)};var u=r;t.default=u,e.exports=t.default},1486:function(e,t,n){"use strict";var a=n(129);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,i,o,c,s,l,u,d,h,f,p,b=a(n(1220)),m="transform";if(t.transform=m,t.animationEnd=o,t.transitionEnd=i,t.transitionDelay=u,t.transitionTiming=l,t.transitionDuration=s,t.transitionProperty=c,t.animationDelay=p,t.animationTiming=f,t.animationDuration=h,t.animationName=d,b.default){var v=function(){for(var e,t,n=document.createElement("div").style,a={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},r=Object.keys(a),i="",o=0;o<r.length;o++){var c=r[o];if(c+"TransitionProperty"in n){i="-"+c.toLowerCase(),e=a[c]("TransitionEnd"),t=a[c]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:i}}();r=v.prefix,t.transitionEnd=i=v.transitionEnd,t.animationEnd=o=v.animationEnd,t.transform=m=r+"-"+m,t.transitionProperty=c=r+"-transition-property",t.transitionDuration=s=r+"-transition-duration",t.transitionDelay=u=r+"-transition-delay",t.transitionTiming=l=r+"-transition-timing-function",t.animationName=d=r+"-animation-name",t.animationDuration=h=r+"-animation-duration",t.animationTiming=f=r+"-animation-delay",t.animationDelay=p=r+"-animation-timing-function"}var g={transform:m,end:i,property:c,timing:l,delay:u,duration:s};t.default=g},1488:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1),r=n(94),i=n(1110),o=function(e){var t=e.title,n=void 0===t?"快速登录，查看完整内容":t,o=e.zaBlock,c=void 0===o?"LoginPopupWithHeader":o;return Object(a.b)(r.e,{zaType:"Popup",zaText:n,zaBlock:c,children:Object(a.c)("div",{css:{background:"#EDF4FF",padding:"15px 0 13px"},children:[Object(a.b)(i.a,{css:{position:"absolute",left:"50%",transform:"translateX(-176px)",top:"-16px",width:"51px"}}),Object(a.b)("div",{css:{fontSize:"16px",fontWeight:"bold",textAlign:"center"},children:n})]})})}},1489:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1),r=n(94),i=n(1110),o=function(e){var t=e.title,n=void 0===t?"快速登录，查看完整内容":t,o=e.zaBlock,c=void 0===o?"LoginPopupWithHeader":o;return Object(a.b)(r.e,{zaType:"Popup",zaText:n,zaBlock:c,children:Object(a.b)("div",{css:{background:"#EDF4FF",height:"50px"},children:Object(a.c)("div",{css:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",height:"50px"},children:[Object(a.b)(i.a,{css:{marginRight:"16px",width:"51px",position:"relative",top:"-11px"}}),Object(a.b)("div",{css:{fontSize:"16px",fontWeight:"bold",textAlign:"center"},children:n})]})})})}},1521:function(e,t,n){"use strict";n.d(t,"a",(function(){return ke}));var a=n(1),r=n(160),i=n(412),o=n(0),c=n(42),s=n(2),l=n(3),u=n.n(l),d=n(24),h=n(31),f=n(74),p=n(38),b=n(105),m=n(26),v=n(406),g=[{value:"标点或格式错误",text:"标点或格式错误"},{value:"不构成提问",text:"不构成提问"},{value:"包含主观判断",text:"包含主观判断"},{value:"缺乏可信来源",text:"缺乏可信来源"},{value:"other",text:"其他"}],O=[{title:"为什么修改问题？",subtitle:"请选择修改理由"},{title:"修改问题",subtitle:"描述精确的问题更易得到解答"},{title:"其他",subtitle:"请对你的举报补充说明"}],j=u.a.shape({level:u.a.oneOf(["error","warning"]),text:u.a.string}),y=n(394),w=n.n(y),C="form.setInput",A="form.setState",k="form.setErrors",S="ui.setState",R="reset",E={step:0,title:"",detail:{toHTML:function(){return""}},topics:[],reason:g[0].value,otherReason:"",onceChanged:!1,videoQuestionConfirmShown:!1,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"",videoQuestionConfirmText:"",uploadModalShown:!1,errors:{title:null,detail:null,reason:null,topics:null}};function N(e,t){var n=t.type,a=t.payload;switch(n){case C:var r,i=Object(c.a)(a,2),s=i[0],l=i[1];return Object.assign(Object.assign({},e),{},(r={},Object(o.a)(r,s,l),Object(o.a)(r,"onceChanged",function(e,t){var n=Object(c.a)(t,2),a=n[0],r=n[1];if(e.onceChanged)return!0;var i=e[a];return"reason"===a?1===e.step&&e.reason===r:"topics"===a?!w()(r,i):i!==r}(e,a)),r));case A:return Object.assign(Object.assign({},e),a);case k:return Object.assign(Object.assign({},e),{},{errors:Object.assign(Object.assign({},e.errors),a)});case S:var u=Object(c.a)(a,2),d=u[0],h=u[1];return Object.assign(Object.assign({},e),{},Object(o.a)({},d,h));case R:return Object.assign({},E);default:return e}}var I=function(e,t){var n=Object(s.useRef)();Object(s.useEffect)((function(){n.current=t}));var a=Object(s.useState)(e),r=Object(c.a)(a,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){e!==i&&(n.current([e,i]),o(e))}),[e,i]),null},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.errors;if(!t||"title"===t){var r=e.title,i=null;0!==r.length||n?r.length>51?i={level:"error",text:"问题标题超出 ".concat(r.length-51," 个字")}:r.length>0&&r.length<3?i={level:"error",text:"问题字数太少了吧"}:r.length>0&&-1===r.indexOf("?")&&-1===r.indexOf("？")?i={level:"error",text:"你还没有给问题添加问号"}:(r.match(/(\?|？)/g)||[]).length>1&&(i={level:"warning",text:"多个问题建议拆分"}):i={level:"error",text:"问题标题不能为空"},a=Object.assign(Object.assign({},a),{},{title:i})}if(!t||"reason"===t){var o=e.reason,c=e.otherReason,s=null;o&&("other"!==o||c)||(s={level:"error",text:o?"必填":"必选"}),a=Object.assign(Object.assign({},a),{},{reason:s})}if((!t||"topics"===t)&&e.topics){var l=e.topics,u=null;0!==l.length||n||(u={level:"error",text:"至少添加一个话题"}),a=Object.assign(Object.assign({},a),{},{topics:u})}return a},B=n(831),x=n(137),Q=function(e){var t=e.onSelect,n=Object(x.f)();return Object(a.b)("div",{children:g.map((function(e){return Object(a.c)("div",{css:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",lineHeight:"48px",boxShadow:"inset 0 -1px 0 0 ".concat(n.colors.GBK10A),"&:last-child":{marginBottom:"16px"}},role:"button",tabIndex:0,onClick:function(){return t(e.value)},children:[e.text,Object(a.b)(B.a,{css:{fill:n.colors.GBL05A}})]},e.value)}))})};Q.propTypes={onSelect:u.a.func.isRequired};var M=Q,_=function(e){var t=e.title,n=e.text,r=e.shown,i=e.allowConfirm,o=void 0===i||i,c=e.onSubmit,s=e.onClose,l=e.buttonText,u=void 0===l?{}:l;return Object(a.b)(f.b,{title:t,onClose:s,children:r&&Object(a.c)("div",{color:"GBK03A",css:{margin:"50px 16px 0",fontSize:"20px",textAlign:"center"},children:[n,Object(a.c)(f.a,{children:[o&&Object(a.b)(h.c,{preset:"primary",color:"blue",onClick:c,children:u.ok||"确认"}),Object(a.b)(h.c,{onClick:s,children:u.cancel||"取消"})]})]})})};_.propTypes={title:u.a.string,text:u.a.string,shown:u.a.bool,allowConfirm:u.a.bool,onSubmit:u.a.func.isRequired,onClose:u.a.func.isRequired,buttonText:u.a.shape({ok:u.a.string,cancel:u.a.string})};var D=_,P=n(123),q=n(139),L=n(32),z=["children","css"],U=["children","css"],F=["children","css"],H=["before","after","headerLabel","headerRight","children"],V=function(e){var t=e.children,n=e.css,r=Object(L.default)(e,z);return Object(a.b)(P.Flex,Object.assign(Object.assign({alignItems:"center",mb:"8px",color:"GBL05A",css:n},r),{},{children:t}))},Y=function(e){var t=e.children,n=e.css,r=Object(L.default)(e,U);return Object(a.b)(P.Box,Object.assign(Object.assign({ml:"auto",css:n},r),{},{children:t}))},W=function(e){var t=e.children,n=e.css,r=Object(L.default)(e,F);return Object(a.b)(P.Text,Object.assign(Object.assign({as:"span",color:"GBK03A",css:n},r),{},{children:t}))},G=function(e){var t=e.before,n=e.after,r=e.headerLabel,i=e.headerRight,o=e.children,c=Object(L.default)(e,H),s=r||i;return Object(a.c)(P.Box,Object.assign(Object.assign({mb:"12px",css:{"& .Popover":{display:"block"},"& .TagInput":{lineHeight:0}}},c),{},{children:[t,s&&Object(a.c)(V,{children:[r&&Object(a.b)(W,{children:r}),i&&Object(a.b)(Y,{children:i})]}),o,n]}))};G.Header=V,G.HeaderLabel=W,G.HeaderRight=Y;var J=G,K=["children","level"],Z={warning:"GYL01A",error:"GRD03A"},X=function(e){var t=e.children,n=e.level,r=Object(L.default)(e,K);return Object(a.b)(P.Text,Object.assign(Object.assign({as:"span",color:Z[n]},r),{},{children:t}))},$=function(e){return Object(a.b)(i.a,{message:"一个未知的错误信息 ".concat(typeof e.children),children:Object(a.b)(X,Object.assign({},e))})},ee=X,te=function(e){var t=e.onInputRef,n=e.title,r=e.onChange,i=e.onBlur,o=e.titleError,l=e.before,u=e.after,d=Object(s.useState)(!1),h=Object(c.a)(d,2),f=h[0],p=h[1],b=null;if(f){var m=51-n.length;m>=0?m<10&&(b="还可以输入 ".concat(m," 个字")):b=Object(a.c)(ee,{level:"error",children:["问题标题超出 ",-m," 个字"]})}else o&&(b=Object(a.b)(ee,{level:o.level,children:o.text}));var v=Object(s.useCallback)((function(e){p(!0),r&&r(e)}),[r]),g=Object(s.useCallback)((function(e){p(!1),i&&i(e)}),[i]),O=Object(s.useRef)();return Object(s.useEffect)((function(){setTimeout((function(){var e;return null===(e=O.current)||void 0===e?void 0:e.focus()}),60)}),[]),Object(a.c)(a.a,{children:[Object(a.b)(J,{children:Object(a.c)(P.Flex,{children:[l,Object(a.b)(q.a,{css:{border:"0 none",fontSize:"15px"},onRef:function(e){O.current=e,t(e)},required:!0,multiline:!0,spread:!0,large:!0,rows:2,placeholder:"问题标题",value:n,onChange:v,onBlur:g}),u]})}),b&&Object(a.b)(J,{headerRight:b})]})};te.propTypes={onInputRef:u.a.func,title:u.a.string,titleError:j,onChange:u.a.func,onBlur:u.a.func};var ne=te,ae=n(827),re=n(828),ie=n(829),oe=n(261),ce=n(429),se=n(423),le=function(e){var t=e.onEditableRef,n=e.defaultValue,r=e.onChange,i=e.detailError,o=e.isAnonymous,l=Object(d.useDispatch)(),u=Object(s.useCallback)((function(){return l(m.h.apply(void 0,arguments))}),[l]),h=Object(s.useRef)(),f=Object(s.useState)(!1),p=Object(c.a)(f,2),b=p[0],v=p[1],g=Object(s.useCallback)((function(){h.current&&h.current.handleKeyCommand("insert-image")}),[]),O=Object(s.useCallback)((function(){h.current&&h.current.handleKeyCommand("insert-video")}),[]),j=Object(s.useCallback)((function(e,t){Object(ce.b)(e,t,u,m.c)}),[u]),y=Object(s.useCallback)((function(e,t){switch(t){case"video":j("video-upload-error");break;case"image":j("image-upload-error",e)}}),[j]);return Object(a.c)(a.a,{children:[Object(a.b)(J,{mb:"16px",headerLabel:"问题描述（可选）：",headerRight:Object(a.c)(a.a,{children:[Object(a.b)(oe.a,{label:"".concat(b?"收起":"展开","工具栏"),isActive:b,icon:ae.a,onClick:function(){return v(!b)}}),Object(a.b)(oe.a,{label:"插入图片",icon:re.a,onClick:g}),Object(a.b)(oe.a,{label:"上传视频",icon:ie.a,onClick:O})]}),marginTop:"24px",children:Object(a.b)(se.a,{ref:function(e){h.current=e,t&&t(e)},allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:b,allowVideoTitleChange:!0,allowHeaderThree:!1,placeholder:"问题背景、条件等详细信息",defaultValue:n,onError:j,onUploadError:y,onChange:r,onBeforeVideoUpload:function(){return!o},editingContentType:"question"})}),i&&Object(a.b)(J,{headerRight:Object(a.b)(ee,{level:i.level,children:i.text})})]})};le.propTypes={onEditableRef:u.a.func,defaultValue:u.a.string,detailError:j,onChange:u.a.func.isRequired,isAnonymous:u.a.bool};var ue=le,de=n(425),he=n(430),fe=function(e){var t=e.topic;return Object(a.b)(de.a,{css:{marginRight:"8px"},children:Object(a.b)("a",{target:"_blank",rel:"noopener noreferrer",href:"//www.zhihu.com/topic/".concat(t.id||t.urlToken),children:t.name})})};function pe(e){var t=e.topics,n=void 0===t?[]:t,r=e.onChange,i=e.permitEditTopics,o=Object(s.useState)(null),l=Object(c.a)(o,2),u=l[0],d=l[1],h=Object(s.useState)(n),f=Object(c.a)(h,2),p=f[0],b=f[1],m=Object(s.useState)(!1),v=Object(c.a)(m,2),g=v[0],O=v[1],j=Object(s.useCallback)((function(e){var t;b(e);var n=null===(t=T({topics:e},"topics"))||void 0===t?void 0:t.topics;d(n),r&&r(e,n)}),[r]);return Object(a.c)(J,{mb:"24px",children:[u&&Object(a.b)(ee,{as:"div",level:u.level,children:u.text}),i?Object(a.b)(he.a,{actived:g,value:p,onChange:j,onToggleActived:function(){return O(!g)}}):p.map((function(e){return Object(a.b)(fe,{topic:e},e.name)}))]})}pe.propTypes={topics:u.a.arrayOf(u.a.object),onChange:u.a.func,permitEditTopics:u.a.bool};var be=pe,me=n(37),ve=n(185),ge=function(e){var t=e.onInputRef,n=e.questionType,r=e.reason,i=e.otherReason,o=e.onReasonChange,c=e.onInputChange,s=e.reasonError,l=Object(x.f)(),u=Boolean(!r&&s),d=Boolean("other"===r&&!i&&s);return Object(a.b)("div",{className:"EditQuestionReasonInput",children:Object(a.b)(J,{mb:"0",before:Object(a.c)(J.Header,{mb:"0",children:[Object(a.b)(ve.b,{css:{marginRight:"8px"},needsReposition:!0,plain:!0,text:r?null:"请选择一个修改理由",value:r,onChange:o,children:g.map((function(e){return Object(a.b)(ve.a,{value:e.value,text:e.text},e.value)}))}),u&&Object(a.b)(ee,{level:s.level,children:s.text}),!["org","commercial"].includes(n)&&Object(a.b)(J.HeaderRight,{children:Object(a.b)(me.Link,{className:"EditQuestion-whyEdit",target:"blank",to:"/question/19550238/answer/95068125",children:"为什么问题可以被公共编辑？"})})]}),children:"other"===r&&Object(a.b)(P.Box,{css:d&&{"& input::placeholder":{color:l.colors.GRD03A}},children:Object(a.b)(q.a,{onRef:t,spread:!0,large:!0,value:i,placeholder:"请输入修改理由（必填）",onChange:c})})})})};ge.propTypes={onInputRef:u.a.func,questionType:u.a.string.isRequired,reason:u.a.string,otherReason:u.a.string,reasonError:j,onReasonChange:u.a.func,onInputChange:u.a.func};var Oe=ge;function je(e){if(!e)return"提交修改时发生未知错误";if("string"==typeof e)return e;var t=e.status,n=e.message,a=e.name;return n?["Network request failed","Failed to fetch"].some((function(e){return n.indexOf(e)>-1}))?"提交修改时发生网络请求错误":n.startsWith("request http")?"提交修改时发生错误".concat(t?"："+t:""):"提交修改时发生错误：".concat(n):"提交修改时发生错误：".concat(a||"Unknown")}function ye(e){var t=e.onSuccess,n=e.onFailure,a=Object(d.useSelector)((function(e){var t=e.notification;return t[m.c]||t.updateQuestion}));return Object(s.useEffect)((function(){if(a){var e=a.id,r=a.code,i=a.text;e?t(e):n(function(e,t){switch(e){case 103003:return["title",{level:"error",text:"已经存在的问题"}];case 103001:return["detail",{level:"error",text:"过长的补充说明"}];default:return["overall",{text:je(t)}]}}(r,i))}}),[a]),null}ye.propTypes={onSuccess:u.a.func.isRequired,onFailure:u.a.func.isRequired};var we=function(e){return["title","reason","topics"].find((function(t){var n;return"error"===(null===(n=e[t])||void 0===n?void 0:n.level)}))};function Ce(e){var t=e.onClose,n=e.show,r=e.id,i=e.title,l=e.detail,u=e.topics,g=e.questionType,j=e.isAnonymous,y=e.brand,w=e.permitEditTopics,B=Object(d.useSelector)(p.b),x=Object(d.useDispatch)(),Q=Object(s.useCallback)((function(){return x(m.h.apply(void 0,arguments))}),[x]),_=Object(s.useRef)({titleInput:null,editable:null,reasonInput:null}),P=function(e){var t;if("title"===e)null===(t=_.current.titleInput)||void 0===t||t.focus();else if("reason"===e){var n;null===(n=_.current.reasonInput)||void 0===n||n.focus()}},q=Object(s.useReducer)(N,Object.assign(Object.assign({},E),{},{title:i,detail:l,topics:u})),L=Object(c.a)(q,2),z=L[0],U=L[1],F=z.step,H=z.title,V=z.reason,Y=z.otherReason,W=z.onceChanged,G=z.uploadModalShown,J=z.videoQuestionConfirmShown,K=z.videoQuestionConfirmAllowContinue,Z=z.videoQuestionConfirmTitle,X=z.videoQuestionConfirmText,ee=z.errors,te=ee.title,ae=ee.detail,re=ee.reason,ie=ee.overall;I(n,(function(e){Object(c.a)(e,1)[0]&&U({type:A,payload:{title:i,detail:{toHTML:function(){return l}},topics:u,onceChanged:!1}})}));var oe=Object(s.useCallback)((function(){U({type:R}),Q("问题修改成功！"),t()}),[Q,t]),ce=Object(s.useCallback)((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];U({type:k,payload:Object(o.a)({},n,a)}),P(n)}),[]),se=Object(s.useMemo)((function(){return we(ee)}),[ee]),le=Object(s.useCallback)((function(e){var t=e.target.value;U({type:C,payload:["title",t]})}),[]),de=Object(s.useCallback)((function(){U({type:k,payload:T({title:H},"title")})}),[H]),he=Object(s.useCallback)((function(e){U({type:C,payload:["detail",e]})}),[]),fe=Object(s.useCallback)((function(e,t){U({type:C,payload:["topics",e]}),U({type:k,payload:{topics:t}})}),[]),pe=Object(s.useCallback)((function(e){U({type:A,payload:{reason:e,step:1}}),"other"===e&&setTimeout((function(){return P("reason")}))}),[]),me=Object(s.useCallback)((function(e){var t=e.target.value;U({type:C,payload:["otherReason",t]}),"reason"===se&&t&&U({type:k,payload:{reason:null}})}),[se]),ve=Object(s.useCallback)((function(){var e;null!==(e=_.current.editable)&&void 0!==e&&e.hasVideo("upload")?U({type:S,payload:["uploadModalShown",!0]}):t()}),[t]),ge=function(){var e=z.title,t=z.detail,n=z.topics,a=z.reason,i=z.otherReason,o={question:{title:e},meta:{reason:"other"===a?i:a}},c=t.toHTML();c!==l&&(o.question.detail=c),n!==u&&(o.question.topicUrlTokens=n.map((function(e){return e.urlToken||e.id}))),Object.keys(o.question).length>0&&x(Object(b.ob)(r,o))},je=function(){U({type:S,payload:["videoQuestionConfirmShown",!1]})},Ce=function(){U({type:S,payload:["uploadModalShown",!1]})},Ae=Object(s.useCallback)((function(){Ce(),t()}),[t]),ke=Boolean(!W||se),Se=0===F,Re=Se?O[0]:{css:{width:"595px","& .Modal-content":{paddingBottom:ie?0:"32px"}}};return Object(a.c)(a.a,{children:[Object(a.b)(ye,{onSuccess:oe,onFailure:ce}),Object(a.b)(f.b,Object.assign(Object.assign({footer:ie&&Object(a.b)($,{level:"error",children:ie.text}),onClose:ve,hotKeyClosable:!1,maskClosable:!1},Re),{},{children:n&&(Se?Object(a.b)(M,{onSelect:pe}):Object(a.c)("div",{className:"QuestionAsk",children:[Object(a.b)(D,{title:Z,text:X,shown:J,allowConfirm:K,onSubmit:function(){je(),ge()},onClose:je,buttonText:{ok:"发布",cancel:"继续编辑"}}),Object(a.b)(D,{text:"关闭弹窗将丢失上传中的视频内容",shown:G,onSubmit:Ae,onClose:Ce}),Object(a.c)("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0,children:[Object(a.b)(ne,{onInputRef:function(e){return _.current.titleInput=e},title:H,onChange:le,onBlur:de,titleError:te,before:Object(a.b)(v.a,{isAnonymous:j,questionType:g,brand:y,css:{flexShrink:0,marginTop:"3px",marginRight:"16px"}})}),Object(a.b)(ue,{onEditableRef:function(e){return _.current.editable=e},defaultValue:l,onChange:he,detailError:ae,isAnonymous:j}),Object(a.b)(be,{topics:u,onChange:fe,permitEditTopics:w}),Object(a.b)(Oe,{onInputRef:function(e){return _.current.reasonInput=e},questionType:g,reason:V,otherReason:Y,reasonError:re,onReasonChange:pe,onInputChange:me}),Object(a.b)(f.a,{css:{marginTop:ie?"16px":"25px"},children:Object(a.b)(h.c,{preset:"primary",color:"blue",disabled:ke,onClick:function(){var e=T(z);U({type:k,payload:e});var t=we(e);if(t)P(t);else{var n=_.current.editable;if(!function(e,t){return e.hasVideo("upload")?(t("请等待视频上传完成后发布","red",m.c),!0):!!e.hasImage("upload")&&(t("请等待图片上传完成后发布","red",m.c),!0)}(n,Q)){var a=function(e,t){return e.hasVideo()&&!t.isOrg?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!0,videoQuestionConfirmText:"包含视频的编辑将在审核完成后生效，是否继续？"}:e.hasImage("error")||e.hasVideo("error")&&!e.hasVideo("error-review")?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"上传失败",videoQuestionConfirmText:"草稿中含有上传失败的内容，请更改后重新提交"}:e.hasVideo("error-review")||e.hasVideo("censor")?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"视频未通过审核",videoQuestionConfirmText:"视频中包含未通过审核的信息，请更改后重新提交"}:null}(n,B);a?U({type:A,payload:a}):ge()}}},children:"提交修改"})})]})]}))}))]})}Ce.propTypes={id:u.a.number,title:u.a.string,detail:u.a.string,topics:u.a.arrayOf(u.a.object),show:u.a.bool,onClose:u.a.func,isAnonymous:u.a.bool,brand:u.a.object,permitEditTopics:u.a.bool},Ce.defaultProps={onClose:function(){}};var Ae=Ce;function ke(e){return Object(a.b)(r.a,{children:Object(a.b)(i.a,{children:Object(a.b)(Ae,Object.assign({},e))})})}},1522:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(2),u=n(3),d=n.n(u),h=n(11),f=n.n(h),p=n(2625),b="TopicVoteCheckbox";function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var v=[0,1,2,3,4,5,6,7].map((function(e){return Object(s.b)("div",{className:"".concat(b,"-Sparkle")},e)}));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var O={Recommend:function(e){Object(i.a)(n,e);var t=m(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,a=e.checked,r=e.onClick,i=e.tooltipPosition;return Object(s.c)("div",Object.assign(Object.assign({className:f()(b,"".concat(b,"--recommend"),t),"data-tooltip":"推荐"},i&&{"data-tooltip-position":i}),{},{children:[Object(s.b)("input",{id:"topic-recommend",type:"checkbox",checked:a,onChange:n,onClick:r}),Object(s.c)("label",{htmlFor:"topic-recommend",children:[Object(s.b)(p.a,{size:19}),v]})]}))}}]),n}(l.Component),Against:function(e){Object(i.a)(n,e);var t=g(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,a=e.checked,r=e.onClick,i=e.tooltipPosition;return Object(s.c)("div",Object.assign(Object.assign({className:f()(b,"".concat(b,"--against"),t),"data-tooltip":"不推荐"},i&&{"data-tooltip-position":i}),{},{children:[Object(s.b)("input",{id:"topic-against",type:"checkbox",checked:a,onChange:n,onClick:r}),Object(s.b)("label",{htmlFor:"topic-against",children:Object(s.b)(p.a,{size:19})})]}))}}]),n}(l.Component)};function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var y=function(e){return e.stopPropagation()},w=function(e){Object(i.a)(n,e);var t=j(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.noAnimation,n=e.status,a=e.onVoteChange,r=e.tooltipPosition;return Object(s.b)("span",{className:"VotableTopicCard",onClick:y,children:Object(s.c)("span",{className:f()("VotableTopicCard-RecommendStatus",{"VotableTopicCard-VoteActions--noAnimation":t}),children:[Object(s.b)(O.Recommend,{className:"".concat("VotableTopicCard","-VoteCheckbox"),checked:"like"===n,onChange:function(e){a(e,"recommend")},tooltipPosition:r}),Object(s.b)(O.Against,{className:"".concat("VotableTopicCard","-VoteCheckbox"),checked:"dislike"===n,onChange:function(e){a(e,"unrecommend")},tooltipPosition:r})]})})}}]),n}(l.Component);w.propTypes={noAnimation:d.a.bool.isRequired,status:d.a.oneOf(["like","dislike","none"]).isRequired,noBorder:d.a.bool.isRequired,onVoteChange:d.a.func.isRequired,tooltipPosition:d.a.string};var C=w,A=n(30),k=n(377),S=n(25);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var E="Upvote",N="UnUpvote",I="Downvote",T="UnDownvote",B=function(e){Object(i.a)(n,e);var t=R(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={noAnimation:!!e.props.metaInfo.vote&&"none"!==e.props.metaInfo.vote.status},e.handleVoteChange=e.context.authRequired((function(t,n){var a=e.props,r=a.metaInfo.vote.status,i=a.onUpdateVoteTopic;e.state.noAnimation&&e.setState({noAnimation:!1});var o={actionType:"",voteFor:"",method:""};"recommend"===n?"like"===r?(o.actionType=N,o.voteFor="like",o.method="DELETE"):(o.actionType=E,o.voteFor="like",o.method="POST"):"dislike"===r?(o.actionType=T,o.voteFor="dislike",o.method="DELETE"):(o.actionType=I,o.voteFor="dislike",o.method="POST"),o.actionType&&(A.a.trackEvent(t.target,{action:o.actionType,id:4176}),i(o))}),S.W.vote),e}return Object(r.a)(n,[{key:"renderVotableTopicCard",value:function(){var e=this.state.noAnimation,t=this.props,n=t.tooltipPosition,a=t.metaInfo,r=(a=void 0===a?{}:a).vote,i=(r=void 0===r?{}:r).status;return Object(s.b)(C,{noBorder:!0,status:i,noAnimation:e,onVoteChange:this.handleVoteChange,tooltipPosition:n})}},{key:"renderReviewCardExtraInfo",value:function(){var e=this.props,t=e.metaInfo,n=t.name,a=t.vote,r=t.meta,i=(r=void 0===r?{}:r).title,o=e.ReviewCardExtraInfoComponent,c=e.reviewerCountFormatter;if(!o)return null;var l,u=a.totalVotes,d=a.ratio,h=a.ratioStatus,f=a.status,p=(10*d).toFixed(1),b=c(u);return l="none"===f?"你推荐么？":"like"===f?"已推荐":"不推荐",Object(s.b)(o,{reviewerCount:b,insufficientText:l,percent:p,ratioStatus:h,title:i||n})}},{key:"render",value:function(){return Object(s.c)(l.Fragment,{children:[this.renderReviewCardExtraInfo(),this.props.children,this.renderVotableTopicCard()]})}}]),n}(l.Component);B.propTypes={onUpdateVoteTopic:d.a.func.isRequired,metaInfo:d.a.shape({meta:d.a.object,vote:d.a.shape({status:d.a.oneOf(["none","dislike","like"]).isRequired})}),ReviewCardExtraInfoComponent:d.a.oneOfType([d.a.func,d.a.string,d.a.object]).isRequired,reviewerCountFormatter:d.a.func.isRequired,tooltipPosition:d.a.string},B.defaultProps={reviewerCountFormatter:function(e){return Object(k.cnNiceNumber)(e).trim()}},B.contextTypes={authRequired:d.a.func}},1539:function(e,t,n){"use strict";var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(2),u=n(24),d=n(813),h=n(190),f=n(264),p=n(105);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var m=function(e){Object(i.a)(n,e);var t=b(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={value:"",items:[]},e.handleChange=function(t){var n=e.props.dispatch;e.setState({value:t});var a=t.match(/^https:\/\/www.zhihu.com\/question\/(\d+)/);a?n(Object(p.Y)(a[1])).then((function(t){var n=t.payload;e.setState({items:[{name:n.title,urlToken:n.id}]})})):Object(f.b)(t).then((function(t){e.setState({items:t})}))},e.handleSelect=function(t,n){var a=e.props,r=a.dispatch,i=a.question.id,o=a.onSubmitted,c=n.urlToken,s=r(Object(p.g)(i,c));o&&o({id:c},s)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items;return Object(s.b)("div",{className:"QuestionRedirectionCreator",children:Object(s.b)("div",{className:"QuestionRedirectionCreator-content",children:Object(s.b)(h.b,{value:t,items:n,inputProps:{spread:!0,large:!0,after:Object(s.b)(d.a,{fill:"grey",size:20})},menuProps:{targetClassName:"QuestionRedirectionCreator-menu"},onChange:this.handleChange,onSelect:this.handleSelect})})})}}]),n}(l.Component);t.a=Object(u.connect)()(m)},1545:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(867),r=n.n(a),i=n(888),o=n.n(i),c=n(7),s=n(842),l=n(994);function u(e){var t=e.id,n=e.adZoneId,a=e.template,r=void 0===a?"":a,i=e.style,o=void 0===i?"":i,c=e.impressionTracks,s=e.viewTracks,l=e.clickTracks,u=e.closeTracks,d=e.effectTracks,h=void 0===d?[]:d,f=e.debugTracks,p=void 0===f?[]:f,b=e.conversionTracks,m=e.videoTracks,v=void 0===m?[]:m,g=e.extraConversionTracks,O=void 0===g?[]:g,j=e.conversionTrackJs,y=void 0===j?[]:j,w=e.zaAdInfo,C=e.zaAdInfoJson,A=void 0===C?"":C,k=e.creatives,S=e.prefetch,R=void 0===S?{}:S,E=e.expand,N=void 0===E?{}:E,I=e.canvas,T=void 0===I?{}:I,B=e.experimentInfo,x=void 0===B?"":B;return{id:t,adZoneId:n,template:r,style:o,impressionTracks:c,viewTracks:s,clickTracks:l,closeTracks:u,effectTracks:h,debugTracks:p,conversionTracks:b,videoTracks:v,extraConversionTracks:O,conversionTrackJs:y,zaAdInfo:w,zaAdInfoJson:A,creatives:function(e){return e.map((function(e){return function(e){var t=e.id,n=void 0===t?"":t,a=e.asset,r=e.videoInfo,i=void 0===r?{playlis:{hd:{},ld:{},sd:{}}}:r,o=e.protoInfo,c=void 0===o?{}:o,s=e.thirdSdkInfo,l=void 0===s?"":s,u=e.videoWatchNum,d=void 0===u?"":u;return{id:n,asset:function(e){var t=e.brandName,n=e.brandLogo,a=e.title,r=e.desc,i=void 0===r?"":r,o=e.imgs,c=void 0===o?[]:o,s=e.gif,l=void 0===s?"":s,u=e.landingUrl,d=e.nativeUrl,h=void 0===d?"":d,f=e.appPromotionUrl,p=void 0===f?"":f,b=e.deepUrl,m=void 0===b?"":b,v=e.imgSize,g=e.recommends,O=void 0===g?[{}]:g,j=e.footer,y=e.cta,w=e.resource,C=void 0===w?{}:w,A=e.activity,k=void 0===A?{}:A,S=e.sponsor,R=void 0===S?{}:S,E=e.window,N=void 0===E?{}:E,I=e.appInfo,T=void 0===I?{}:I,B=e.recommend,x=void 0===B?{}:B,Q=e.videoSpec,M=void 0===Q?{}:Q,_=e.imageRatioExtra,D=void 0===_?{}:_,P=e.packageName,q=e.icon,L=e.galleries;return{brandName:t,brandLogo:n,title:a,desc:i,imgs:c,gif:l,landingUrl:u,nativeUrl:h,appPromotionUrl:p,deepUrl:m,imgSize:v,recommends:O,footer:j,cta:y,resource:C,activity:k,sponsor:R,window:N,appInfo:T,recommend:x,videoSpec:M,imageRatioExtra:D,packageName:P,icon:q,galleries:void 0===L?[{}]:L}}(a),videoInfo:i,protoInfo:c,thirdSdkInfo:l,videoWatchNum:d}}(e)}))}(k),prefetch:R,expand:N,canvas:T,experimentInfo:x}}var d={PROMOTE_ARTICLE:"发表了一篇文章",PROMOTE_QUESTION:"提了一个问题"};function h(e){var t=e.ad,n=(t.partyId,t.creatives),a=t.downloadSilent,i=void 0!==a&&a,c=t.isNewWebview,l=void 0!==c&&c,u=t.isSpeeding,h=t.cdnMap,f=t.displayAdvertisingTag,p=t.adVerb,b=t.loadTracks,m=t.closeTrack,v=o()(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag","adVerb","loadTracks","closeTrack"]),g=Object(s.e)(t,"creatives[0].impressionTracks",[]),O=Object(s.e)(t,"creatives[0].clickTracks",[]),j={displayAdvertisingTag:f,downloadSilent:i,isNewWebview:l,isCdnSpeeding:u,cdnMap:h},y=d[p],w=n.map((function(e){return function(e,t){var n=Object(s.e)(e,"target",{}),a=n.voteupCount,i=n.commentCount,c=n.followerCount,l=n.answerCount,u=o()(n,["voteupCount","commentCount","followerCount","answerCount"]),d=e.landingUrl,h=e.appPromotionUrl,f=e.deepUrl,p=e.packageName,b=e.title,m=e.nativeUrl,v=void 0===m?"":m,g=e.window,O=e.imageRatioExtra,j=e.brand,y=void 0===j?{}:j,w=e.thumbnailExtraInfo,C=e.cta,A=(C=void 0===C?{}:C).value,k=void 0===A?"":A,S=e.button,R=e.description,E=(e.protoInfo,e.image),N=e.gallery,I=void 0===N?[]:N,T=e.thirdSdkInfo,B=(e.showNum,e.recommend),x=e.contentType,Q=o()(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","button","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend","contentType"]),M=y.name,_=y.logo,D=Object(s.e)(I,"length")>=2?I.map((function(e){return e.url})):[E],P=I&&I.map((function(e){return{image:e.url,desc:e.description}}));return{asset:r()({landingUrl:d,appPromotionUrl:h,deepUrl:f,packageName:p,title:b,nativeUrl:v,window:g,imageRatioExtra:O,desc:R,cta:S||k,imgs:D,brandName:M,brandLogo:_,recommend:B,gallery:I,galleries:P,icon:t},Q),protoInfo:r()({voteupNum:a,commentNum:i,contentType:x,answerNum:l,followNum:c,target:JSON.stringify(n)},u),videoInfo:w,thirdSdkInfo:T}}(e,y)}));return r()({viewTracks:g,impressionTracks:b,closeTracks:[m],clickTracks:O,creatives:w,expand:j},v)}function f(e){if(!e||!e.ad&&!e.adjson)return null;var t=Object(c.camelizeKeys)(e),n=Object(s.e)(e,"adjson"),a=Object(c.camelizeKeys)(Object(s.x)(n)),i=Object(l.a)({oldData:t,adjson:a});return{data:t,adjson:n?function(e,t){if(!e.ads)return null;var n=e.ads;return{ads:(void 0===n?[]:n).map((function(e){return r()({adjsonStr:t},u(e))}))}}(a,n):function(e,t){return{ads:[{ad:e.ad}].map((function(e){var n=e.ad;return r()({adjsonStr:t},h({ad:n}))}))}}(t,n),experimentInfo:i}}},1642:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(21),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M19.49 14.362l-2.03-1.83 1.116-1.137a1.352 1.352 0 0 1 1.921-.009c.535.535.54 1.4.01 1.94l-1.016 1.036zm-4.883 4.935a2.3 2.3 0 0 1-1.12.63l-1.136.264c-.29.058-.668-.105-.56-.56l.27-1.158a2.3 2.3 0 0 1 .599-1.09l3.809-3.84 2.03 1.829-3.892 3.925zM4.06 5H19.94C20.526 5 21 5.448 21 6s-.474 1-1.059 1H4.06C3.474 7 3 6.552 3 6s.474-1 1.059-1zM4 11h9a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h4a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z",fillRule:"evenodd"}))};o.defaultProps={name:"Preview"},t.a=o},1673:function(e,t,n){"use strict";(function(e){var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(2),u=n(24),d=n(2541),h=n(105),f=n(165);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var b=function(t){Object(i.a)(o,t);var n=p(o);function o(){var t;Object(a.a)(this,o);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(t=n.call.apply(n,[this].concat(i))).getTrackUrls=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.props,i=r.pageType,o=r.advancedStyle,c=o.viewTracks,s=o.clickTracks,l="view"===n?c:s,u=Object.assign({},{eru:encodeURIComponent(e.location.href),ct:1,pt:"question"===i?1:2,rt:1},a),d=Object.keys(u).map((function(e){return"&".concat(e,"=").concat(u[e])})).join("");return l.map((function(e){return"".concat(e).concat(d)}))},t.handleViewTrack=function(e){t.getTrackUrls("view",e).forEach(f.c)},t.handleClickTrack=function(e){t.getTrackUrls("click",e).forEach(f.c)},t}return Object(r.a)(o,[{key:"componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle,n=(t=void 0===t?{}:t).cardType,a=this.props,r=a.advancedStyle,i=(r=void 0===r?{}:r).cardType,o=a.onLoad;!n&&i&&"function"==typeof o&&o()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?Object(s.b)(d.a,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:!1}):null}}]),o}(l.Component);t.a=Object(u.connect)((function(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}}),{loadBrandQuestionAdvancedStyle:h.J})(b)}).call(this,n(113))},1939:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(21),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(e){return r.a.createElement(i.a,o({fill:"currentColor"},e),r.a.createElement("path",{d:"M6.824 2.934l-3.36 3.359a1 1 0 0 0 0 1.414l3.36 3.359a.25.25 0 0 0 .353 0l1.06-1.06a.25.25 0 0 0 0-.354L6.587 8H13a5 5 0 0 1 0 10H4.25a.25.25 0 0 0-.25.25v1.5c0 .138.112.25.25.25H13a7 7 0 1 0 0-14H6.586l1.652-1.652a.25.25 0 0 0 0-.353l-1.06-1.06a.25.25 0 0 0-.354 0z"}))};c.defaultProps={name:"Undo"},t.a=c},2082:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1362),r=n(56);function i(e){return Object(r.a)(1,arguments),Object(a.a)(e,Date.now())}},2083:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1362),r=n(1200),i=n(56);function o(e){return Object(i.a)(1,arguments),Object(a.a)(e,Object(r.a)(Date.now(),1))}},2192:function(e,t,n){e.exports=n.p+"assets/placeholder.765f50e5.svg"},2193:function(e,t,n){e.exports=n.p+"assets/liukanshan_desert.547bd049.svg"},2194:function(e,t,n){e.exports=n.p+"assets/empty.2df52de0.png"},2195:function(e,t,n){(function(e){e.exports=function(){"use strict";var t,n;function a(){return t.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function s(e){return void 0===e}function l(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,a=[];for(n=0;n<e.length;++n)a.push(t(e[n],n));return a}function h(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,a){return At(e,t,n,a,!0).utc()}function p(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function b(e){if(null==e._isValid){var t=p(e),a=n.call(t.parsedDateParts,(function(e){return null!=e})),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&a);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function m(e){var t=f(NaN);return null!=e?h(p(t),e):p(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),a=n.length>>>0;for(t=0;t<a;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var v=a.momentProperties=[],g=!1;function O(e,t){var n,a,r;if(s(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),s(t._i)||(e._i=t._i),s(t._f)||(e._f=t._f),s(t._l)||(e._l=t._l),s(t._strict)||(e._strict=t._strict),s(t._tzm)||(e._tzm=t._tzm),s(t._isUTC)||(e._isUTC=t._isUTC),s(t._offset)||(e._offset=t._offset),s(t._pf)||(e._pf=p(t)),s(t._locale)||(e._locale=t._locale),v.length>0)for(n=0;n<v.length;n++)s(r=t[a=v[n]])||(e[a]=r);return e}function j(e){O(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,a.updateOffset(this),g=!1)}function y(e){return e instanceof j||null!=e&&null!=e._isAMomentObject}function w(e){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var n=!0;return h((function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,e),n){var r,i,c,s=[];for(i=0;i<arguments.length;i++){if(r="","object"==typeof arguments[i]){for(c in r+="\n["+i+"] ",arguments[0])o(arguments[0],c)&&(r+=c+": "+arguments[0][c]+", ");r=r.slice(0,-2)}else r=arguments[i];s.push(r)}w(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var A,k={};function S(e,t){null!=a.deprecationHandler&&a.deprecationHandler(e,t),k[e]||(w(t),k[e]=!0)}function R(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(e,t){var n,a=h({},e);for(n in t)o(t,n)&&(i(e[n])&&i(t[n])?(a[n]={},h(a[n],e[n]),h(a[n],t[n])):null!=t[n]?a[n]=t[n]:delete a[n]);for(n in e)o(e,n)&&!o(t,n)&&i(e[n])&&(a[n]=h({},a[n]));return a}function N(e){null!=e&&this.set(e)}function I(e,t,n){var a=""+Math.abs(e),r=t-a.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+a}a.suppressDeprecationWarnings=!1,a.deprecationHandler=null,A=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};var T=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,x={},Q={};function M(e,t,n,a){var r=a;"string"==typeof a&&(r=function(){return this[a]()}),e&&(Q[e]=r),t&&(Q[t[0]]=function(){return I(r.apply(this,arguments),t[1],t[2])}),n&&(Q[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function _(e,t){return e.isValid()?(t=D(t,e.localeData()),x[t]=x[t]||function(e){var t,n,a,r=e.match(T);for(t=0,n=r.length;t<n;t++)Q[r[t]]?r[t]=Q[r[t]]:r[t]=(a=r[t]).match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"");return function(t){var a,i="";for(a=0;a<n;a++)i+=R(r[a])?r[a].call(t,e):r[a];return i}}(t),x[t](e)):e.localeData().invalidDate()}function D(e,t){var n=5;function a(e){return t.longDateFormat(e)||e}for(B.lastIndex=0;n>=0&&B.test(e);)e=e.replace(B,a),B.lastIndex=0,n-=1;return e}var P={};function q(e,t){var n=e.toLowerCase();P[n]=P[n+"s"]=P[t]=e}function L(e){return"string"==typeof e?P[e]||P[e.toLowerCase()]:void 0}function z(e){var t,n,a={};for(n in e)o(e,n)&&(t=L(n))&&(a[t]=e[n]);return a}var U={};function F(e,t){U[e]=t}function H(e){return e%4==0&&e%100!=0||e%400==0}function V(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=V(t)),n}function W(e,t){return function(n){return null!=n?(J(this,e,n),a.updateOffset(this,t),this):G(this,e)}}function G(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function J(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&H(e.year())&&1===e.month()&&29===e.date()?(n=Y(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ye(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var K,Z=/\d/,X=/\d\d/,$=/\d{3}/,ee=/\d{4}/,te=/[+-]?\d{6}/,ne=/\d\d?/,ae=/\d\d\d\d?/,re=/\d\d\d\d\d\d?/,ie=/\d{1,3}/,oe=/\d{1,4}/,ce=/[+-]?\d{1,6}/,se=/\d+/,le=/[+-]?\d+/,ue=/Z|[+-]\d\d:?\d\d/gi,de=/Z|[+-]\d\d(?::?\d\d)?/gi,he=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function fe(e,t,n){K[e]=R(t)?t:function(e,a){return e&&n?n:t}}function pe(e,t){return o(K,e)?K[e](t._strict,t._locale):new RegExp(be(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,a,r){return t||n||a||r}))))}function be(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}K={};var me,ve={};function ge(e,t){var n,a=t;for("string"==typeof e&&(e=[e]),l(t)&&(a=function(e,n){n[t]=Y(e)}),n=0;n<e.length;n++)ve[e[n]]=a}function Oe(e,t){ge(e,(function(e,n,a,r){a._w=a._w||{},t(e,a._w,a,r)}))}function je(e,t,n){null!=t&&o(ve,e)&&ve[e](t,n._a,n,e)}function ye(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,a=(t%(n=12)+n)%n;return e+=(t-a)/12,1===a?H(e)?29:28:31-a%7%2}me=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},M("M",["MM",2],"Mo",(function(){return this.month()+1})),M("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),M("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),q("month","M"),F("month",8),fe("M",ne),fe("MM",ne,X),fe("MMM",(function(e,t){return t.monthsShortRegex(e)})),fe("MMMM",(function(e,t){return t.monthsRegex(e)})),ge(["M","MM"],(function(e,t){t[1]=Y(e)-1})),ge(["MMM","MMMM"],(function(e,t,n,a){var r=n._locale.monthsParse(e,a,n._strict);null!=r?t[1]=r:p(n).invalidMonth=e}));var we="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ae=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ke=he,Se=he;function Re(e,t,n){var a,r,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)i=f([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=me.call(this._shortMonthsParse,o))?r:null:-1!==(r=me.call(this._longMonthsParse,o))?r:null:"MMM"===t?-1!==(r=me.call(this._shortMonthsParse,o))||-1!==(r=me.call(this._longMonthsParse,o))?r:null:-1!==(r=me.call(this._longMonthsParse,o))||-1!==(r=me.call(this._shortMonthsParse,o))?r:null}function Ee(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Y(t);else if(!l(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),ye(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ne(e){return null!=e?(Ee(this,e),a.updateOffset(this,!0),this):G(this,"Month")}function Ie(){function e(e,t){return t.length-e.length}var t,n,a=[],r=[],i=[];for(t=0;t<12;t++)n=f([2e3,t]),a.push(this.monthsShort(n,"")),r.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(a.sort(e),r.sort(e),i.sort(e),t=0;t<12;t++)a[t]=be(a[t]),r[t]=be(r[t]);for(t=0;t<24;t++)i[t]=be(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Te(e){return H(e)?366:365}M("Y",0,0,(function(){var e=this.year();return e<=9999?I(e,4):"+"+e})),M(0,["YY",2],0,(function(){return this.year()%100})),M(0,["YYYY",4],0,"year"),M(0,["YYYYY",5],0,"year"),M(0,["YYYYYY",6,!0],0,"year"),q("year","y"),F("year",1),fe("Y",le),fe("YY",ne,X),fe("YYYY",oe,ee),fe("YYYYY",ce,te),fe("YYYYYY",ce,te),ge(["YYYYY","YYYYYY"],0),ge("YYYY",(function(e,t){t[0]=2===e.length?a.parseTwoDigitYear(e):Y(e)})),ge("YY",(function(e,t){t[0]=a.parseTwoDigitYear(e)})),ge("Y",(function(e,t){t[0]=parseInt(e,10)})),a.parseTwoDigitYear=function(e){return Y(e)+(Y(e)>68?1900:2e3)};var Be=W("FullYear",!0);function xe(e,t,n,a,r,i,o){var c;return e<100&&e>=0?(c=new Date(e+400,t,n,a,r,i,o),isFinite(c.getFullYear())&&c.setFullYear(e)):c=new Date(e,t,n,a,r,i,o),c}function Qe(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Me(e,t,n){var a=7+t-n;return-(7+Qe(e,0,a).getUTCDay()-t)%7+a-1}function _e(e,t,n,a,r){var i,o,c=1+7*(t-1)+(7+n-a)%7+Me(e,a,r);return c<=0?o=Te(i=e-1)+c:c>Te(e)?(i=e+1,o=c-Te(e)):(i=e,o=c),{year:i,dayOfYear:o}}function De(e,t,n){var a,r,i=Me(e.year(),t,n),o=Math.floor((e.dayOfYear()-i-1)/7)+1;return o<1?a=o+Pe(r=e.year()-1,t,n):o>Pe(e.year(),t,n)?(a=o-Pe(e.year(),t,n),r=e.year()+1):(r=e.year(),a=o),{week:a,year:r}}function Pe(e,t,n){var a=Me(e,t,n),r=Me(e+1,t,n);return(Te(e)-a+r)/7}function qe(e,t){return e.slice(t,7).concat(e.slice(0,t))}M("w",["ww",2],"wo","week"),M("W",["WW",2],"Wo","isoWeek"),q("week","w"),q("isoWeek","W"),F("week",5),F("isoWeek",5),fe("w",ne),fe("ww",ne,X),fe("W",ne),fe("WW",ne,X),Oe(["w","ww","W","WW"],(function(e,t,n,a){t[a.substr(0,1)]=Y(e)})),M("d",0,"do","day"),M("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),M("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),M("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),M("e",0,0,"weekday"),M("E",0,0,"isoWeekday"),q("day","d"),q("weekday","e"),q("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),fe("d",ne),fe("e",ne),fe("E",ne),fe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),fe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),fe("dddd",(function(e,t){return t.weekdaysRegex(e)})),Oe(["dd","ddd","dddd"],(function(e,t,n,a){var r=n._locale.weekdaysParse(e,a,n._strict);null!=r?t.d=r:p(n).invalidWeekday=e})),Oe(["d","e","E"],(function(e,t,n,a){t[a]=Y(e)}));var Le="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ue="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Fe=he,He=he,Ve=he;function Ye(e,t,n){var a,r,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)i=f([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=me.call(this._weekdaysParse,o))?r:null:"ddd"===t?-1!==(r=me.call(this._shortWeekdaysParse,o))?r:null:-1!==(r=me.call(this._minWeekdaysParse,o))?r:null:"dddd"===t?-1!==(r=me.call(this._weekdaysParse,o))||-1!==(r=me.call(this._shortWeekdaysParse,o))||-1!==(r=me.call(this._minWeekdaysParse,o))?r:null:"ddd"===t?-1!==(r=me.call(this._shortWeekdaysParse,o))||-1!==(r=me.call(this._weekdaysParse,o))||-1!==(r=me.call(this._minWeekdaysParse,o))?r:null:-1!==(r=me.call(this._minWeekdaysParse,o))||-1!==(r=me.call(this._weekdaysParse,o))||-1!==(r=me.call(this._shortWeekdaysParse,o))?r:null}function We(){function e(e,t){return t.length-e.length}var t,n,a,r,i,o=[],c=[],s=[],l=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),a=be(this.weekdaysMin(n,"")),r=be(this.weekdaysShort(n,"")),i=be(this.weekdays(n,"")),o.push(a),c.push(r),s.push(i),l.push(a),l.push(r),l.push(i);o.sort(e),c.sort(e),s.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Ge(){return this.hours()%12||12}function Je(e,t){M(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Ke(e,t){return t._meridiemParse}M("H",["HH",2],0,"hour"),M("h",["hh",2],0,Ge),M("k",["kk",2],0,(function(){return this.hours()||24})),M("hmm",0,0,(function(){return""+Ge.apply(this)+I(this.minutes(),2)})),M("hmmss",0,0,(function(){return""+Ge.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)})),M("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)})),M("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)})),Je("a",!0),Je("A",!1),q("hour","h"),F("hour",13),fe("a",Ke),fe("A",Ke),fe("H",ne),fe("h",ne),fe("k",ne),fe("HH",ne,X),fe("hh",ne,X),fe("kk",ne,X),fe("hmm",ae),fe("hmmss",re),fe("Hmm",ae),fe("Hmmss",re),ge(["H","HH"],3),ge(["k","kk"],(function(e,t,n){var a=Y(e);t[3]=24===a?0:a})),ge(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ge(["h","hh"],(function(e,t,n){t[3]=Y(e),p(n).bigHour=!0})),ge("hmm",(function(e,t,n){var a=e.length-2;t[3]=Y(e.substr(0,a)),t[4]=Y(e.substr(a)),p(n).bigHour=!0})),ge("hmmss",(function(e,t,n){var a=e.length-4,r=e.length-2;t[3]=Y(e.substr(0,a)),t[4]=Y(e.substr(a,2)),t[5]=Y(e.substr(r)),p(n).bigHour=!0})),ge("Hmm",(function(e,t,n){var a=e.length-2;t[3]=Y(e.substr(0,a)),t[4]=Y(e.substr(a))})),ge("Hmmss",(function(e,t,n){var a=e.length-4,r=e.length-2;t[3]=Y(e.substr(0,a)),t[4]=Y(e.substr(a,2)),t[5]=Y(e.substr(r))}));var Ze,Xe=W("Hours",!0),$e={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:we,monthsShort:Ce,week:{dow:0,doy:6},weekdays:Le,weekdaysMin:Ue,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},et={},tt={};function nt(e,t){var n,a=Math.min(e.length,t.length);for(n=0;n<a;n+=1)if(e[n]!==t[n])return n;return a}function at(e){return e?e.toLowerCase().replace("_","-"):e}function rt(t){var n=null;if(void 0===et[t]&&void 0!==e&&e&&e.exports)try{n=Ze._abbr,function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),it(n)}catch(e){et[t]=null}return et[t]}function it(e,t){var n;return e&&((n=s(t)?ct(e):ot(e,t))?Ze=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Ze._abbr}function ot(e,t){if(null!==t){var n,a=$e;if(t.abbr=e,null!=et[e])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=et[e]._config;else if(null!=t.parentLocale)if(null!=et[t.parentLocale])a=et[t.parentLocale]._config;else{if(null==(n=rt(t.parentLocale)))return tt[t.parentLocale]||(tt[t.parentLocale]=[]),tt[t.parentLocale].push({name:e,config:t}),null;a=n._config}return et[e]=new N(E(a,t)),tt[e]&&tt[e].forEach((function(e){ot(e.name,e.config)})),it(e),et[e]}return delete et[e],null}function ct(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ze;if(!r(e)){if(t=rt(e))return t;e=[e]}return function(e){for(var t,n,a,r,i=0;i<e.length;){for(t=(r=at(e[i]).split("-")).length,n=(n=at(e[i+1]))?n.split("-"):null;t>0;){if(a=rt(r.slice(0,t).join("-")))return a;if(n&&n.length>=t&&nt(r,n)>=t-1)break;t--}i++}return Ze}(e)}function st(e){var t,n=e._a;return n&&-2===p(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>ye(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,p(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),p(e)._overflowWeeks&&-1===t&&(t=7),p(e)._overflowWeekday&&-1===t&&(t=8),p(e).overflow=t),e}var lt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ut=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,dt=/Z|[+-]\d\d(?::?\d\d)?/,ht=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ft=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((-?\d+)/i,bt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,mt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function vt(e){var t,n,a,r,i,o,c=e._i,s=lt.exec(c)||ut.exec(c);if(s){for(p(e).iso=!0,t=0,n=ht.length;t<n;t++)if(ht[t][1].exec(s[1])){r=ht[t][0],a=!1!==ht[t][2];break}if(null==r)return void(e._isValid=!1);if(s[3]){for(t=0,n=ft.length;t<n;t++)if(ft[t][1].exec(s[3])){i=(s[2]||" ")+ft[t][0];break}if(null==i)return void(e._isValid=!1)}if(!a&&null!=i)return void(e._isValid=!1);if(s[4]){if(!dt.exec(s[4]))return void(e._isValid=!1);o="Z"}e._f=r+(i||"")+(o||""),wt(e)}else e._isValid=!1}function gt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Ot(e){var t,n,a,r,i,o,c,s,l=bt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(l){if(n=l[4],a=l[3],r=l[2],i=l[5],o=l[6],c=l[7],s=[gt(n),Ce.indexOf(a),parseInt(r,10),parseInt(i,10),parseInt(o,10)],c&&s.push(parseInt(c,10)),t=s,!function(e,t,n){return!e||ze.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(l[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return mt[e];if(t)return 0;var a=parseInt(n,10),r=a%100;return(a-r)/100*60+r}(l[8],l[9],l[10]),e._d=Qe.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),p(e).rfc2822=!0}else e._isValid=!1}function jt(e,t,n){return null!=e?e:null!=t?t:n}function yt(e){var t,n,r,i,o,c=[];if(!e._d){for(r=function(e){var t=new Date(a.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,a,r,i,o,c,s,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(i=1,o=4,n=jt(t.GG,e._a[0],De(kt(),1,4).year),a=jt(t.W,1),((r=jt(t.E,1))<1||r>7)&&(s=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,l=De(kt(),i,o),n=jt(t.gg,e._a[0],l.year),a=jt(t.w,l.week),null!=t.d?((r=t.d)<0||r>6)&&(s=!0):null!=t.e?(r=t.e+i,(t.e<0||t.e>6)&&(s=!0)):r=i),a<1||a>Pe(n,i,o)?p(e)._overflowWeeks=!0:null!=s?p(e)._overflowWeekday=!0:(c=_e(n,a,r,i,o),e._a[0]=c.year,e._dayOfYear=c.dayOfYear)}(e),null!=e._dayOfYear&&(o=jt(e._a[0],r[0]),(e._dayOfYear>Te(o)||0===e._dayOfYear)&&(p(e)._overflowDayOfYear=!0),n=Qe(o,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=c[t]=r[t];for(;t<7;t++)e._a[t]=c[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Qe:xe).apply(null,c),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(p(e).weekdayMismatch=!0)}}function wt(e){if(e._f!==a.ISO_8601)if(e._f!==a.RFC_2822){e._a=[],p(e).empty=!0;var t,n,r,i,o,c,s=""+e._i,l=s.length,u=0;for(r=D(e._f,e._locale).match(T)||[],t=0;t<r.length;t++)i=r[t],(n=(s.match(pe(i,e))||[])[0])&&((o=s.substr(0,s.indexOf(n))).length>0&&p(e).unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),u+=n.length),Q[i]?(n?p(e).empty=!1:p(e).unusedTokens.push(i),je(i,n,e)):e._strict&&!n&&p(e).unusedTokens.push(i);p(e).charsLeftOver=l-u,s.length>0&&p(e).unusedInput.push(s),e._a[3]<=12&&!0===p(e).bigHour&&e._a[3]>0&&(p(e).bigHour=void 0),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var a;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((a=e.isPM(n))&&t<12&&(t+=12),a||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),null!==(c=p(e).era)&&(e._a[0]=e._locale.erasConvertYear(c,e._a[0])),yt(e),st(e)}else Ot(e);else vt(e)}function Ct(e){var t=e._i,n=e._f;return e._locale=e._locale||ct(e._l),null===t||void 0===n&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),y(t)?new j(st(t)):(u(t)?e._d=t:r(n)?function(e){var t,n,a,r,i,o,c=!1;if(0===e._f.length)return p(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)i=0,o=!1,t=O({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],wt(t),b(t)&&(o=!0),i+=p(t).charsLeftOver,i+=10*p(t).unusedTokens.length,p(t).score=i,c?i<a&&(a=i,n=t):(null==a||i<a||o)&&(a=i,n=t,o&&(c=!0));h(e,n||t)}(e):n?wt(e):function(e){var t=e._i;s(t)?e._d=new Date(a.now()):u(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=pt.exec(e._i);null===t?(vt(e),!1===e._isValid&&(delete e._isValid,Ot(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:a.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):r(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),yt(e)):i(t)?function(e){if(!e._d){var t=z(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),yt(e)}}(e):l(t)?e._d=new Date(t):a.createFromInputFallback(e)}(e),b(e)||(e._d=null),e))}function At(e,t,n,a,o){var s,l={};return!0!==t&&!1!==t||(a=t,t=void 0),!0!==n&&!1!==n||(a=n,n=void 0),(i(e)&&c(e)||r(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=n,l._i=e,l._f=t,l._strict=a,(s=new j(st(Ct(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function kt(e,t,n,a){return At(e,t,n,a,!1)}a.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),a.ISO_8601=function(){},a.RFC_2822=function(){};var St=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=kt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()})),Rt=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=kt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}));function Et(e,t){var n,a;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return kt();for(n=t[0],a=1;a<t.length;++a)t[a].isValid()&&!t[a][e](n)||(n=t[a]);return n}var Nt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function It(e){var t=z(e),n=t.year||0,a=t.quarter||0,r=t.month||0,i=t.week||t.isoWeek||0,c=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,a=!1;for(t in e)if(o(e,t)&&(-1===me.call(Nt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Nt.length;++n)if(e[Nt[n]]){if(a)return!1;parseFloat(e[Nt[n]])!==Y(e[Nt[n]])&&(a=!0)}return!0}(t),this._milliseconds=+d+1e3*u+6e4*l+1e3*s*60*60,this._days=+c+7*i,this._months=+r+3*a+12*n,this._data={},this._locale=ct(),this._bubble()}function Tt(e){return e instanceof It}function Bt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function xt(e,t){M(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+I(~~(e/60),2)+t+I(~~e%60,2)}))}xt("Z",":"),xt("ZZ",""),fe("Z",de),fe("ZZ",de),ge(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Mt(de,e)}));var Qt=/([\+\-]|\d\d)/gi;function Mt(e,t){var n,a,r=(t||"").match(e);return null===r?null:0===(a=60*(n=((r[r.length-1]||[])+"").match(Qt)||["-",0,0])[1]+Y(n[2]))?0:"+"===n[0]?a:-a}function _t(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(y(e)||u(e)?e.valueOf():kt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),a.updateOffset(n,!1),n):kt(e).local()}function Dt(e){return-Math.round(e._d.getTimezoneOffset())}function Pt(){return!!this.isValid()&&this._isUTC&&0===this._offset}a.updateOffset=function(){};var qt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Lt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function zt(e,t){var n,a,r,i,c,s,u=e,d=null;return Tt(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(u={},t?u[t]=+e:u.milliseconds=+e):(d=qt.exec(e))?(n="-"===d[1]?-1:1,u={y:0,d:Y(d[2])*n,h:Y(d[3])*n,m:Y(d[4])*n,s:Y(d[5])*n,ms:Y(Bt(1e3*d[6]))*n}):(d=Lt.exec(e))?(n="-"===d[1]?-1:1,u={y:Ut(d[2],n),M:Ut(d[3],n),w:Ut(d[4],n),d:Ut(d[5],n),h:Ut(d[6],n),m:Ut(d[7],n),s:Ut(d[8],n)}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(i=kt(u.from),c=kt(u.to),r=i.isValid()&&c.isValid()?(c=_t(c,i),i.isBefore(c)?s=Ft(i,c):((s=Ft(c,i)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(u={}).ms=r.milliseconds,u.M=r.months),a=new It(u),Tt(e)&&o(e,"_locale")&&(a._locale=e._locale),Tt(e)&&o(e,"_isValid")&&(a._isValid=e._isValid),a}function Ut(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ft(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ht(e,t){return function(n,a){var r;return null===a||isNaN(+a)||(S(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=a,a=r),Vt(this,zt(n,a),e),this}}function Vt(e,t,n,r){var i=t._milliseconds,o=Bt(t._days),c=Bt(t._months);e.isValid()&&(r=null==r||r,c&&Ee(e,G(e,"Month")+c*n),o&&J(e,"Date",G(e,"Date")+o*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&a.updateOffset(e,o||c))}zt.fn=It.prototype,zt.invalid=function(){return zt(NaN)};var Yt=Ht(1,"add"),Wt=Ht(-1,"subtract");function Gt(e){return"string"==typeof e||e instanceof String}function Jt(e){return y(e)||u(e)||Gt(e)||l(e)||function(e){var t=r(e),n=!1;return t&&(n=0===e.filter((function(t){return!l(t)&&Gt(e)})).length),t&&n}(e)||function(e){var t,n,a=i(e)&&!c(e),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<s.length;t+=1)n=s[t],r=r||o(e,n);return a&&r}(e)||null==e}function Kt(e){var t,n=i(e)&&!c(e),a=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)a=a||o(e,r[t]);return n&&a}function Zt(e,t){if(e.date()<t.date())return-Zt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(n,"months");return-(n+(t-a<0?(t-a)/(a-e.clone().add(n-1,"months")):(t-a)/(e.clone().add(n+1,"months")-a)))||0}function Xt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ct(e))&&(this._locale=t),this)}a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var $t=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function en(){return this._locale}function tn(e,t){return(e%t+t)%t}function nn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function an(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-126227808e5:Date.UTC(e,t,n)}function rn(e,t){return t.erasAbbrRegex(e)}function on(){var e,t,n=[],a=[],r=[],i=[],o=this.eras();for(e=0,t=o.length;e<t;++e)a.push(be(o[e].name)),n.push(be(o[e].abbr)),r.push(be(o[e].narrow)),i.push(be(o[e].name)),i.push(be(o[e].abbr)),i.push(be(o[e].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function cn(e,t){M(0,[e,e.length],0,t)}function sn(e,t,n,a,r){var i;return null==e?De(this,a,r).year:(t>(i=Pe(e,a,r))&&(t=i),ln.call(this,e,t,n,a,r))}function ln(e,t,n,a,r){var i=_e(e,t,n,a,r),o=Qe(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}M("N",0,0,"eraAbbr"),M("NN",0,0,"eraAbbr"),M("NNN",0,0,"eraAbbr"),M("NNNN",0,0,"eraName"),M("NNNNN",0,0,"eraNarrow"),M("y",["y",1],"yo","eraYear"),M("y",["yy",2],0,"eraYear"),M("y",["yyy",3],0,"eraYear"),M("y",["yyyy",4],0,"eraYear"),fe("N",rn),fe("NN",rn),fe("NNN",rn),fe("NNNN",(function(e,t){return t.erasNameRegex(e)})),fe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ge(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,a){var r=n._locale.erasParse(e,a,n._strict);r?p(n).era=r:p(n).invalidEra=e})),fe("y",se),fe("yy",se),fe("yyy",se),fe("yyyy",se),fe("yo",(function(e,t){return t._eraYearOrdinalRegex||se})),ge(["y","yy","yyy","yyyy"],0),ge(["yo"],(function(e,t,n,a){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[0]=n._locale.eraYearOrdinalParse(e,r):t[0]=parseInt(e,10)})),M(0,["gg",2],0,(function(){return this.weekYear()%100})),M(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),cn("gggg","weekYear"),cn("ggggg","weekYear"),cn("GGGG","isoWeekYear"),cn("GGGGG","isoWeekYear"),q("weekYear","gg"),q("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),fe("G",le),fe("g",le),fe("GG",ne,X),fe("gg",ne,X),fe("GGGG",oe,ee),fe("gggg",oe,ee),fe("GGGGG",ce,te),fe("ggggg",ce,te),Oe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,a){t[a.substr(0,2)]=Y(e)})),Oe(["gg","GG"],(function(e,t,n,r){t[r]=a.parseTwoDigitYear(e)})),M("Q",0,"Qo","quarter"),q("quarter","Q"),F("quarter",7),fe("Q",Z),ge("Q",(function(e,t){t[1]=3*(Y(e)-1)})),M("D",["DD",2],"Do","date"),q("date","D"),F("date",9),fe("D",ne),fe("DD",ne,X),fe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ge(["D","DD"],2),ge("Do",(function(e,t){t[2]=Y(e.match(ne)[0])}));var un=W("Date",!0);M("DDD",["DDDD",3],"DDDo","dayOfYear"),q("dayOfYear","DDD"),F("dayOfYear",4),fe("DDD",ie),fe("DDDD",$),ge(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=Y(e)})),M("m",["mm",2],0,"minute"),q("minute","m"),F("minute",14),fe("m",ne),fe("mm",ne,X),ge(["m","mm"],4);var dn=W("Minutes",!1);M("s",["ss",2],0,"second"),q("second","s"),F("second",15),fe("s",ne),fe("ss",ne,X),ge(["s","ss"],5);var hn,fn,pn=W("Seconds",!1);for(M("S",0,0,(function(){return~~(this.millisecond()/100)})),M(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),M(0,["SSS",3],0,"millisecond"),M(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),M(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),M(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),M(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),M(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),M(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),q("millisecond","ms"),F("millisecond",16),fe("S",ie,Z),fe("SS",ie,X),fe("SSS",ie,$),hn="SSSS";hn.length<=9;hn+="S")fe(hn,se);function bn(e,t){t[6]=Y(1e3*("0."+e))}for(hn="S";hn.length<=9;hn+="S")ge(hn,bn);fn=W("Milliseconds",!1),M("z",0,0,"zoneAbbr"),M("zz",0,0,"zoneName");var mn=j.prototype;function vn(e){return e}mn.add=Yt,mn.calendar=function(e,t){1===arguments.length&&(arguments[0]?Jt(arguments[0])?(e=arguments[0],t=void 0):Kt(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||kt(),r=_t(n,this).startOf("day"),i=a.calendarFormat(this,r)||"sameElse",o=t&&(R(t[i])?t[i].call(this,n):t[i]);return this.format(o||this.localeData().calendar(i,this,kt(n)))},mn.clone=function(){return new j(this)},mn.diff=function(e,t,n){var a,r,i;if(!this.isValid())return NaN;if(!(a=_t(e,this)).isValid())return NaN;switch(r=6e4*(a.utcOffset()-this.utcOffset()),t=L(t)){case"year":i=Zt(this,a)/12;break;case"month":i=Zt(this,a);break;case"quarter":i=Zt(this,a)/3;break;case"second":i=(this-a)/1e3;break;case"minute":i=(this-a)/6e4;break;case"hour":i=(this-a)/36e5;break;case"day":i=(this-a-r)/864e5;break;case"week":i=(this-a-r)/6048e5;break;default:i=this-a}return n?i:V(i)},mn.endOf=function(e){var t,n;if(void 0===(e=L(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?an:nn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-tn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-tn(t,1e3)-1}return this._d.setTime(t),a.updateOffset(this,!0),this},mn.format=function(e){e||(e=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var t=_(this,e);return this.localeData().postformat(t)},mn.from=function(e,t){return this.isValid()&&(y(e)&&e.isValid()||kt(e).isValid())?zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},mn.fromNow=function(e){return this.from(kt(),e)},mn.to=function(e,t){return this.isValid()&&(y(e)&&e.isValid()||kt(e).isValid())?zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},mn.toNow=function(e){return this.to(kt(),e)},mn.get=function(e){return R(this[e=L(e)])?this[e]():this},mn.invalidAt=function(){return p(this).overflow},mn.isAfter=function(e,t){var n=y(e)?e:kt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},mn.isBefore=function(e,t){var n=y(e)?e:kt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},mn.isBetween=function(e,t,n,a){var r=y(e)?e:kt(e),i=y(t)?t:kt(t);return!!(this.isValid()&&r.isValid()&&i.isValid())&&(("("===(a=a||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===a[1]?this.isBefore(i,n):!this.isAfter(i,n)))},mn.isSame=function(e,t){var n,a=y(e)?e:kt(e);return!(!this.isValid()||!a.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()===a.valueOf():(n=a.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},mn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},mn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},mn.isValid=function(){return b(this)},mn.lang=$t,mn.locale=Xt,mn.localeData=en,mn.max=Rt,mn.min=St,mn.parsingFlags=function(){return h({},p(this))},mn.set=function(e,t){if("object"==typeof e){var n,a=function(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:U[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=z(e));for(n=0;n<a.length;n++)this[a[n].unit](e[a[n].unit])}else if(R(this[e=L(e)]))return this[e](t);return this},mn.startOf=function(e){var t,n;if(void 0===(e=L(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?an:nn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=tn(t,6e4);break;case"second":t=this._d.valueOf(),t-=tn(t,1e3)}return this._d.setTime(t),a.updateOffset(this,!0),this},mn.subtract=Wt,mn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},mn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},mn.toDate=function(){return new Date(this.valueOf())},mn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?_(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):R(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",_(n,"Z")):_(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,a="moment",r="";return this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+a+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(mn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),mn.toJSON=function(){return this.isValid()?this.toISOString():null},mn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mn.unix=function(){return Math.floor(this.valueOf()/1e3)},mn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mn.eraName=function(){var e,t,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until)return a[e].name;if(a[e].until<=n&&n<=a[e].since)return a[e].name}return""},mn.eraNarrow=function(){var e,t,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until)return a[e].narrow;if(a[e].until<=n&&n<=a[e].since)return a[e].narrow}return""},mn.eraAbbr=function(){var e,t,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until)return a[e].abbr;if(a[e].until<=n&&n<=a[e].since)return a[e].abbr}return""},mn.eraYear=function(){var e,t,n,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return(this.year()-a(i[e].since).year())*n+i[e].offset;return this.year()},mn.year=Be,mn.isLeapYear=function(){return H(this.year())},mn.weekYear=function(e){return sn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},mn.isoWeekYear=function(e){return sn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},mn.quarter=mn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},mn.month=Ne,mn.daysInMonth=function(){return ye(this.year(),this.month())},mn.week=mn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},mn.isoWeek=mn.isoWeeks=function(e){var t=De(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},mn.weeksInYear=function(){var e=this.localeData()._week;return Pe(this.year(),e.dow,e.doy)},mn.weeksInWeekYear=function(){var e=this.localeData()._week;return Pe(this.weekYear(),e.dow,e.doy)},mn.isoWeeksInYear=function(){return Pe(this.year(),1,4)},mn.isoWeeksInISOWeekYear=function(){return Pe(this.isoWeekYear(),1,4)},mn.date=un,mn.day=mn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},mn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},mn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},mn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},mn.hour=mn.hours=Xe,mn.minute=mn.minutes=dn,mn.second=mn.seconds=pn,mn.millisecond=mn.milliseconds=fn,mn.utcOffset=function(e,t,n){var r,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Mt(de,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=Dt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!t||this._changeInProgress?Vt(this,zt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Dt(this)},mn.utc=function(e){return this.utcOffset(0,e)},mn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Dt(this),"m")),this},mn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Mt(ue,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},mn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?kt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},mn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mn.isLocal=function(){return!!this.isValid()&&!this._isUTC},mn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mn.isUtc=Pt,mn.isUTC=Pt,mn.zoneAbbr=function(){return this._isUTC?"UTC":""},mn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mn.dates=C("dates accessor is deprecated. Use date instead.",un),mn.months=C("months accessor is deprecated. Use month instead",Ne),mn.years=C("years accessor is deprecated. Use year instead",Be),mn.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),mn.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var e,t={};return O(t,this),(t=Ct(t))._a?(e=t._isUTC?f(t._a):kt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var a,r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0;for(a=0;a<r;a++)(n&&e[a]!==t[a]||!n&&Y(e[a])!==Y(t[a]))&&o++;return o+i}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var gn=N.prototype;function On(e,t,n,a){var r=ct(),i=f().set(a,t);return r[n](i,e)}function jn(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return On(e,t,n,"month");var a,r=[];for(a=0;a<12;a++)r[a]=On(e,a,n,"month");return r}function yn(e,t,n,a){"boolean"==typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var r,i=ct(),o=e?i._week.dow:0,c=[];if(null!=n)return On(t,(n+o)%7,a,"day");for(r=0;r<7;r++)c[r]=On(t,(r+o)%7,a,"day");return c}gn.calendar=function(e,t,n){var a=this._calendar[e]||this._calendar.sameElse;return R(a)?a.call(t,n):a},gn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(T).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},gn.invalidDate=function(){return this._invalidDate},gn.ordinal=function(e){return this._ordinal.replace("%d",e)},gn.preparse=vn,gn.postformat=vn,gn.relativeTime=function(e,t,n,a){var r=this._relativeTime[n];return R(r)?r(e,t,n,a):r.replace(/%d/i,e)},gn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return R(n)?n(t):n.replace(/%s/i,t)},gn.set=function(e){var t,n;for(n in e)o(e,n)&&(R(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},gn.eras=function(e,t){var n,r,i,o=this._eras||ct("en")._eras;for(n=0,r=o.length;n<r;++n){switch(typeof o[n].since){case"string":i=a(o[n].since).startOf("day"),o[n].since=i.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":i=a(o[n].until).startOf("day").valueOf(),o[n].until=i.valueOf()}}return o},gn.erasParse=function(e,t,n){var a,r,i,o,c,s=this.eras();for(e=e.toUpperCase(),a=0,r=s.length;a<r;++a)if(i=s[a].name.toUpperCase(),o=s[a].abbr.toUpperCase(),c=s[a].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return s[a];break;case"NNNN":if(i===e)return s[a];break;case"NNNNN":if(c===e)return s[a]}else if([i,o,c].indexOf(e)>=0)return s[a]},gn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?a(e.since).year():a(e.since).year()+(t-e.offset)*n},gn.erasAbbrRegex=function(e){return o(this,"_erasAbbrRegex")||on.call(this),e?this._erasAbbrRegex:this._erasRegex},gn.erasNameRegex=function(e){return o(this,"_erasNameRegex")||on.call(this),e?this._erasNameRegex:this._erasRegex},gn.erasNarrowRegex=function(e){return o(this,"_erasNarrowRegex")||on.call(this),e?this._erasNarrowRegex:this._erasRegex},gn.months=function(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ae).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone},gn.monthsShort=function(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ae.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},gn.monthsParse=function(e,t,n){var a,r,i;if(this._monthsParseExact)return Re.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(r=f([2e3,a]),n&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[a]||(i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[a]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(n&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!n&&this._monthsParse[a].test(e))return a}},gn.monthsRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ie.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Se),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},gn.monthsShortRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ie.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=ke),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},gn.week=function(e){return De(e,this._week.dow,this._week.doy).week},gn.firstDayOfYear=function(){return this._week.doy},gn.firstDayOfWeek=function(){return this._week.dow},gn.weekdays=function(e,t){var n=r(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?qe(n,this._week.dow):e?n[e.day()]:n},gn.weekdaysMin=function(e){return!0===e?qe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},gn.weekdaysShort=function(e){return!0===e?qe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},gn.weekdaysParse=function(e,t,n){var a,r,i;if(this._weekdaysParseExact)return Ye.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(r=f([2e3,1]).day(a),n&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[a]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[a].test(e))return a;if(n&&"ddd"===t&&this._shortWeekdaysParse[a].test(e))return a;if(n&&"dd"===t&&this._minWeekdaysParse[a].test(e))return a;if(!n&&this._weekdaysParse[a].test(e))return a}},gn.weekdaysRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Fe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},gn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=He),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},gn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ve),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},gn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},gn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},it("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),a.lang=C("moment.lang is deprecated. Use moment.locale instead.",it),a.langData=C("moment.langData is deprecated. Use moment.localeData instead.",ct);var wn=Math.abs;function Cn(e,t,n,a){var r=zt(t,n);return e._milliseconds+=a*r._milliseconds,e._days+=a*r._days,e._months+=a*r._months,e._bubble()}function An(e){return e<0?Math.floor(e):Math.ceil(e)}function kn(e){return 4800*e/146097}function Sn(e){return 146097*e/4800}function Rn(e){return function(){return this.as(e)}}var En=Rn("ms"),Nn=Rn("s"),In=Rn("m"),Tn=Rn("h"),Bn=Rn("d"),xn=Rn("w"),Qn=Rn("M"),Mn=Rn("Q"),_n=Rn("y");function Dn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Pn=Dn("milliseconds"),qn=Dn("seconds"),Ln=Dn("minutes"),zn=Dn("hours"),Un=Dn("days"),Fn=Dn("months"),Hn=Dn("years"),Vn=Math.round,Yn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Wn(e,t,n,a,r){return r.relativeTime(t||1,!!n,e,a)}var Gn=Math.abs;function Jn(e){return(e>0)-(e<0)||+e}function Kn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,a,r,i,o,c,s=Gn(this._milliseconds)/1e3,l=Gn(this._days),u=Gn(this._months),d=this.asSeconds();return d?(e=V(s/60),t=V(e/60),s%=60,e%=60,n=V(u/12),u%=12,a=s?s.toFixed(3).replace(/\.?0+$/,""):"",r=d<0?"-":"",i=Jn(this._months)!==Jn(d)?"-":"",o=Jn(this._days)!==Jn(d)?"-":"",c=Jn(this._milliseconds)!==Jn(d)?"-":"",r+"P"+(n?i+n+"Y":"")+(u?i+u+"M":"")+(l?o+l+"D":"")+(t||e||s?"T":"")+(t?c+t+"H":"")+(e?c+e+"M":"")+(s?c+a+"S":"")):"P0D"}var Zn=It.prototype;return Zn.isValid=function(){return this._isValid},Zn.abs=function(){var e=this._data;return this._milliseconds=wn(this._milliseconds),this._days=wn(this._days),this._months=wn(this._months),e.milliseconds=wn(e.milliseconds),e.seconds=wn(e.seconds),e.minutes=wn(e.minutes),e.hours=wn(e.hours),e.months=wn(e.months),e.years=wn(e.years),this},Zn.add=function(e,t){return Cn(this,e,t,1)},Zn.subtract=function(e,t){return Cn(this,e,t,-1)},Zn.as=function(e){if(!this.isValid())return NaN;var t,n,a=this._milliseconds;if("month"===(e=L(e))||"quarter"===e||"year"===e)switch(t=this._days+a/864e5,n=this._months+kn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Sn(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return 24*t+a/36e5;case"minute":return 1440*t+a/6e4;case"second":return 86400*t+a/1e3;case"millisecond":return Math.floor(864e5*t)+a;default:throw new Error("Unknown unit "+e)}},Zn.asMilliseconds=En,Zn.asSeconds=Nn,Zn.asMinutes=In,Zn.asHours=Tn,Zn.asDays=Bn,Zn.asWeeks=xn,Zn.asMonths=Qn,Zn.asQuarters=Mn,Zn.asYears=_n,Zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Y(this._months/12):NaN},Zn._bubble=function(){var e,t,n,a,r,i=this._milliseconds,o=this._days,c=this._months,s=this._data;return i>=0&&o>=0&&c>=0||i<=0&&o<=0&&c<=0||(i+=864e5*An(Sn(c)+o),o=0,c=0),s.milliseconds=i%1e3,e=V(i/1e3),s.seconds=e%60,t=V(e/60),s.minutes=t%60,n=V(t/60),s.hours=n%24,o+=V(n/24),r=V(kn(o)),c+=r,o-=An(Sn(r)),a=V(c/12),c%=12,s.days=o,s.months=c,s.years=a,this},Zn.clone=function(){return zt(this)},Zn.get=function(e){return e=L(e),this.isValid()?this[e+"s"]():NaN},Zn.milliseconds=Pn,Zn.seconds=qn,Zn.minutes=Ln,Zn.hours=zn,Zn.days=Un,Zn.weeks=function(){return V(this.days()/7)},Zn.months=Fn,Zn.years=Hn,Zn.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,a,r=!1,i=Yn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(i=Object.assign({},Yn,t),null!=t.s&&null==t.ss&&(i.ss=t.s-1)),n=this.localeData(),a=function(e,t,n,a){var r=zt(e).abs(),i=Vn(r.as("s")),o=Vn(r.as("m")),c=Vn(r.as("h")),s=Vn(r.as("d")),l=Vn(r.as("M")),u=Vn(r.as("w")),d=Vn(r.as("y")),h=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||o<=1&&["m"]||o<n.m&&["mm",o]||c<=1&&["h"]||c<n.h&&["hh",c]||s<=1&&["d"]||s<n.d&&["dd",s];return null!=n.w&&(h=h||u<=1&&["w"]||u<n.w&&["ww",u]),(h=h||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=+e>0,h[4]=a,Wn.apply(null,h)}(this,!r,i,n),r&&(a=n.pastFuture(+this,a)),n.postformat(a)},Zn.toISOString=Kn,Zn.toString=Kn,Zn.toJSON=Kn,Zn.locale=Xt,Zn.localeData=en,Zn.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kn),Zn.lang=$t,M("X",0,0,"unix"),M("x",0,0,"valueOf"),fe("x",le),fe("X",/[+-]?\d+(\.\d{1,3})?/),ge("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ge("x",(function(e,t,n){n._d=new Date(Y(e))})),//! moment.js
a.version="2.29.1",t=kt,a.fn=mn,a.min=function(){var e=[].slice.call(arguments,0);return Et("isBefore",e)},a.max=function(){var e=[].slice.call(arguments,0);return Et("isAfter",e)},a.now=function(){return Date.now?Date.now():+new Date},a.utc=f,a.unix=function(e){return kt(1e3*e)},a.months=function(e,t){return jn(e,t,"months")},a.isDate=u,a.locale=it,a.invalid=m,a.duration=zt,a.isMoment=y,a.weekdays=function(e,t,n){return yn(e,t,n,"weekdays")},a.parseZone=function(){return kt.apply(null,arguments).parseZone()},a.localeData=ct,a.isDuration=Tt,a.monthsShort=function(e,t){return jn(e,t,"monthsShort")},a.weekdaysMin=function(e,t,n){return yn(e,t,n,"weekdaysMin")},a.defineLocale=ot,a.updateLocale=function(e,t){if(null!=t){var n,a,r=$e;null!=et[e]&&null!=et[e].parentLocale?et[e].set(E(et[e]._config,t)):(null!=(a=rt(e))&&(r=a._config),t=E(r,t),null==a&&(t.abbr=e),(n=new N(t)).parentLocale=et[e],et[e]=n),it(e)}else null!=et[e]&&(null!=et[e].parentLocale?(et[e]=et[e].parentLocale,e===it()&&it(e)):null!=et[e]&&delete et[e]);return et[e]},a.locales=function(){return A(et)},a.weekdaysShort=function(e,t,n){return yn(e,t,n,"weekdaysShort")},a.normalizeUnits=L,a.relativeTimeRounding=function(e){return void 0===e?Vn:"function"==typeof e&&(Vn=e,!0)},a.relativeTimeThreshold=function(e,t){return void 0!==Yn[e]&&(void 0===t?Yn[e]:(Yn[e]=t,"s"===e&&(Yn.ss=t-1),!0))},a.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},a.prototype=mn,a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},a}()}).call(this,n(265)(e))},2541:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(1),r=n(11),i=n.n(r),o=n(417),c=n(833),s=n(104),l=n(916),u=n(25),d={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},h=function(e){var t=e.src,n=e.style;return Object(a.b)("div",{className:"AdvancedViewer-imgField",style:Object.assign(Object.assign({},n),t?{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center"}:{})})};function f(e){var t=e.isMobileView,n=e.advancedStyle,r=(n=void 0===n?{}:n).cardType,i=n.url,c=n.material,s=e.handleViewTrack,f=e.handleClickTrack;if(null==c||!c.length)return null;var p=function(e){return"function"==typeof f?{onClick:function(){f(e)}}:{}},b=function(e,t){return Object(a.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-commodityItem",target:"_blank",rel:"noopener noreferrer",href:i},p({etu:i,pi:t+1})),{},{children:[Object(a.b)("img",{src:e.image,alt:""}),e.mainTitle&&Object(a.c)("div",{className:"AdvancedViewer-commodityIntro",children:[Object(a.b)("span",{className:"AdvancedViewer-mainTitle",children:e.mainTitle}),Object(a.b)("span",{className:"AdvancedViewer-subTitle",children:e.subTitle})]})]}),"AdvancedViewer-commodity-".concat(t))};if("image"===r)return Object(a.b)("a",Object.assign(Object.assign({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",rel:"noopener noreferrer",href:i},p({etu:i})),{},{children:Object(a.b)(h,{src:c[0].image,style:t?{width:375,height:156.25}:{}})}));if("image_text"===r)return Object(a.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",rel:"noopener noreferrer",href:i},p({etu:i})),{},{children:[t&&Object(a.b)("div",{className:"AdvancedViewer-intro",children:c[0].intro}),Object(a.b)(h,{src:c[0].image}),!t&&Object(a.b)("div",{className:"AdvancedViewer-intro",children:c[0].intro})]}));if("commodity"===r)return c.length&&Object(a.b)("div",{className:"AdvancedViewer-material AdvancedViewer-commodity",children:t?c.map(b):Object(a.b)(l.a,{items:c,renderItem:b})});if("recommended"===r){var m=function(e,t){return Object(a.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank",rel:"noopener noreferrer"},p({etu:e.url,pi:t+1})),{},{children:[Object(a.c)("div",{className:"AdvancedViewer-summary",children:[Object(a.c)("div",{className:"AdvancedViewer-wrap",children:[Object(a.b)("div",{className:"AdvancedViewer-title",children:e.title}),e.intro&&Object(a.b)("div",{className:"AdvancedViewer-desc",children:e.intro.replace(/<[\s\S]*?>/g,"")})]}),Object(a.c)("span",{className:"AdvancedViewer-data",children:[d[e.type]," · ",e.statisticText]})]}),Object(a.b)(h,{src:e.image||u.o})]}))};return Object(a.b)("div",{className:"AdvancedViewer-material AdvancedViewer-recommended",children:c.map((function(e,t){return s?Object(a.b)(o.a,Object.assign(Object.assign({},(n={pi:t+1},"function"==typeof s?{onChange:function(e,t){e.isIntersecting&&(t.disconnect(),s(n))}}:{})),{},{children:m(e,t)}),t):m(e,t);var n}))})}return null}function p(e){var t,n=e.isMobileView,r=e.brand,l=r.name,u=r.logo,d=e.advancedStyle,h=(d=void 0===d?{}:d).brandRecommendText,p=d.buttonText,b=d.url,m=d.cardType,v=e.handleViewTrack,g=e.handleClickTrack,O=function(e){return"function"==typeof g?{onClick:function(){g(e)}}:{}},j=l&&l.charCodeAt(l.length-1),y=j>=0&&j<=128?"".concat(l," "):l,w=n&&"recommended"!==m,C=h||"".concat(y,"的品牌推荐"),A=Object(a.c)(c.d,{className:i()("AdvancedViewer",{"is-mobile":n}),children:[!w&&Object(a.b)(c.b,{className:"AdvancedViewer-header",children:Object(a.b)("span",{className:"AdvancedViewer-headerText",children:C})}),Object(a.b)("div",{className:"AdvancedViewer-content",children:Object(a.b)(f,Object.assign({},e))}),!n&&m&&"recommended"!==m&&Object(a.b)("div",{className:"AdvancedViewer-footer",children:Object(a.b)(s.a,Object.assign(Object.assign({className:"AdvancedViewer-button",target:"_blank",to:b},O({etu:b})),{},{children:p||"了解更多"}))}),w&&Object(a.c)("div",{className:"AdvancedViewer-footer",children:[Object(a.c)("div",{className:"AdvancedViewer-brand",children:[Object(a.b)("img",{className:"AdvancedViewer-logo",src:u,alt:""}),Object(a.b)("span",{className:"AdvancedViewer-brandName",children:C})]}),Object(a.b)(s.a,Object.assign(Object.assign({className:"AdvancedViewer-button",target:"_blank",to:b},O({etu:b})),{},{children:p||"查看详情"}))]})]});return v?Object(a.b)(o.a,Object.assign(Object.assign({},"function"==typeof v?{onViewed:function(){v(t)}}:{}),{},{children:A})):A}},2659:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(37),i=n(42),o=n(43),c=n.n(o),s=n(57),l=n(13),u=n(14),d=n(15),h=n(17),f=n(9),p=n(2),b=n.n(p),m=n(3),v=n.n(m),g=n(24),O=n(94),j=n(112),y=n.n(j),w=n(126),C=n.n(w),A=n(376),k=n(182),S=n(78),R=n(2192),E=n.n(R);var N=function(){return Object(a.b)(S.a,{title:"该内容仅作者可见",subtitle:"",errorImage:E.a})},I=n(18),T=n(105),B=n(380),x=Object(a.b)(y.a,{meta:[{name:"robots",content:"noindex"}]}),Q=Object(I.compose)(Object(B.a)(null))((function(e){var t=e.entity,n=t.type,r=t.id,i=t.isVisible,o=t.isCollapsed,c=t.suggestEdit,s=void 0===c?{}:c,l=t.adminClosedComment,u="";"question"===n?u=r:"answer"===n&&(u=t.question.id);var d=Object(g.useSelector)((function(e){return Object(T.eb)(e,{id:u})}));if(d){var h=d.status,f=d.adminClosedComment,p=d.isMuted,b=d.visibleOnlyToAuthor,m=d.reviewInfo,v=void 0===m?{}:m;if(null!=h&&h.isClose||null!=h&&h.isSuggest||null!=h&&h.isEvaluate||f||p||b||v.editIsReviewing)return x}return"question"===n&&d.redirection?Object(a.b)("link",{rel:"canonical",href:"https://www.zhihu.com/question/".concat(d.redirection.to.id)}):"answer"===n&&(null!=s&&s.status||o||l||!i)||"article"===n&&(null!=s&&s.status||l||!i)?x:""})),M=n(1372),_=n(130),D=n(38),P=n(533),q=n(70),L=n(26),z=n(107),U=n(31),F=n(141),H=n(54);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Y=function(e){Object(d.a)(n,e);var t=V(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleAnonymousConfirm=function(){var t=e.props,n=t.question.id,a=t.updateQuestionAnonymous;(0,t.onClose)(),a(n)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,r=e.shown,i=e.isMCNUser,o=e.isOffice,c=n.relationship.isAnonymous;return Object(a.b)(F.b,{title:c?"确认取消匿名身份？":"确认使用匿名身份？",onClose:t,size:"default",children:r&&Object(a.c)("div",{children:[c?Object(a.b)("div",{className:"Anonymous-confirm",children:Object(a.b)("p",{children:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"})}):Object(a.c)("div",{className:"Anonymous-confirm",children:[Object(a.b)("p",{children:"使用匿名身份后："}),Object(a.c)("ul",{children:[Object(a.b)("li",{children:"提问、回答、赞同、关注会显示为匿名"}),Object(a.b)("li",{children:"除提问者本人，不能匿名编辑问题"}),Object(a.b)("li",{children:"不能邀请别人回答问题"}),Object(a.b)("li",{children:"不能使用视频功能"}),Object(a.b)("li",{children:"不能将回答同步到圈子"}),i&&Object(a.b)("li",{children:"不能使用商品信息发布功能"}),o&&Object(a.b)("li",{children:"不包含商业推广和进行商业声明"})]})]}),Object(a.c)(F.a,{direction:"horizontal",children:[Object(a.b)(U.c,{onClick:t,color:"grey",children:"取消"}),Object(a.b)(U.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm,children:"确认"})]})]})})}}]),n}(p.Component);Y.propTypes={question:v.a.object.isRequired};var W=Object(g.connect)((function(e){var t,n=Object(D.b)(e);return{isMCNUser:2===(null==n||null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status),isOffice:Object(H.e)(e)}}),{updateQuestionAnonymous:T.pb,fillCurrentUserIfNeeded:D.e})(Y),G=function(e){var t=e.isQAPage,n=void 0!==t&&t,r=e.children,i=Object(g.useSelector)((function(e){return e.env.userAgent.GoogleBot}));return n&&i?Object(a.b)("div",{itemScope:!0,itemType:"https://schema.org/QAPage",children:r}):Object(a.b)(a.a,{children:r})},J=n(161),K=n(2193),Z=n.n(K);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var $=function(e){Object(d.a)(n,e);var t=X(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={time:e.props.seconds},e.handleClearInterval=function(){e.interval&&clearInterval(e.interval)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.setState({time:e.state.time-1},(function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/".concat(t)}}))}),1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,r=this.state.time;return Object(a.b)(J.b,{title:t,subtitle:"".concat(r," 秒后自动跳转至").concat(n),errorImage:Z.a})}}]),n}(p.Component);$.defaultProps={seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"};var ee=n(837),te=n(383),ne=n.n(te),ae=n(2582),re=n(250),ie=n(224),oe=n(30),ce=n(1363),se=n(1007),le=n(160),ue=n(1054),de=n(1717),he=n(0),fe=n(11),pe=n.n(fe),be=n(184),me=n(387),ve="SpecialQuestionAuthor";function ge(e){var t=e.author,n=e.className,i=e.isMobile,o=t.avatarUrl,c=t.name,s=t.badge,l=t.badgeV2;return Object(a.b)("div",{className:pe()("".concat(ve,"-Wrapper"),n),children:Object(a.c)(r.Link,{className:pe()("".concat(ve),Object(he.a)({},"ROOT_CLASS--mobile",i)),to:"/".concat(t.isOrg?"org":"people","/").concat(t.urlToken||t.id),children:[Object(a.b)(be.a,{size:i?22:28,url:o,alt:c,round:!0}),Object(a.b)("span",{className:"".concat(ve,"-Author"),children:t.name}),Object(a.b)(me.c,{className:"".concat(ve,"-Badge"),badge:l||s,size:i?16:18}),Object(a.b)("span",{className:"".concat(ve,"-Suffix"),children:"的提问"})]})})}ge.propTypes={author:v.a.object.isRequired,isMobile:v.a.bool};var Oe=n(1209),je=(n(1454),n(258)),ye=n(862),we=n(40),Ce=n.n(we),Ae=n(853);function ke(e){var t=e.question,n=e.isAuthorCurrentUser,r=e.hasExtraContent,o=t.author,c=Object(p.useState)(!1),s=Object(i.a)(c,2),l=(s[0],s[1],Object(p.useRef)(),Object(p.useRef)());return Object(p.useEffect)((function(){;""}),[n]),Object(p.useEffect)((function(){Object(ye.onViewedOnce)(l.current,(function(){oe.a.trackCardShow(l.current,{id:7064})}))}),[]),Object(a.c)("div",{className:pe()("QuestionAuthor",{"QuestionAuthor--hasExtraContent":r}),ref:l,children:[Object(a.b)(Ae.a,{preset:"plain",author:o,zaId:7063,zaExtra:{link:{url:"//www.zhihu.com/people/".concat(o.urlToken)}},noHeadline:!0}),""]})}var Se=n(32),Re=n(123),Ee=n(377),Ne=n(158),Ie=n(848),Te=n(836),Be=n(136),xe=Object.assign;var Qe,Me=function(e){return b.a.createElement(Be.a,xe({width:"99",height:"99",viewBox:"0 0 99 99"},e),b.a.createElement("path",{fill:"currentColor",d:"M118.269 98.6a4.063 4.063 0 01-2.54-.893L69.501 60.79l-44.83 36.055a4.06 4.06 0 01-4.972.1 4.2 4.2 0 01-1.419-4.834L29.43 61.626c.801-2.153 3.175-3.234 5.29-2.423 2.12.812 3.191 3.216 2.39 5.366l-5.897 16.387 35.73-28.735a4.053 4.053 0 015.09-.008l38.454 30.708-13.8-45.548a4.2 4.2 0 011.421-4.524L129.74 8.185H97.734L51.044 41.93A4.068 4.068 0 0145.31 41c-1.33-1.863-.918-4.466.917-5.815L93.995.648a4.067 4.067 0 012.408-.79h45.412a4.11 4.11 0 013.887 2.823 4.2 4.2 0 01-1.385 4.64L105.371 37.69l16.82 55.522a4.193 4.193 0 01-1.6 4.658 4.066 4.066 0 01-2.322.73M16.219 18.143a3.63 3.63 0 01-2.935-1.468c-1.16-1.577-.784-3.772.834-4.9L30.328.514c1.62-1.13 3.869-.765 5.028.812 1.16 1.577.785 3.772-.834 4.9L18.314 17.488a3.669 3.669 0 01-2.095.655M32.28 29.114a3.46 3.46 0 01-2.005-6.277L84.62-15.959a3.45 3.45 0 014.815.814 3.46 3.46 0 01-.812 4.822L34.28 28.474a3.435 3.435 0 01-2 .64M3.407 7.171c-1.053 0-2.092-.53-2.757-1.53-1.104-1.655-.764-3.97.757-5.17l2.202-1.737c1.52-1.2 3.648-.831 4.751.823 1.104 1.656.764 3.971-.757 5.171L5.4 6.466a3.204 3.204 0 01-1.994.705",fillRule:"evenodd"}))},_e=["questionId","isInAnswerPage"],De=function(e){var t,n=e.items,r=null==n||null===(t=n[0])||void 0===t?void 0:t.image;return Object(a.b)(Re.Box,{css:function(e){return{flex:"0 0 44px",borderRadius:"4px",position:"relative","::after":{content:'""',position:"absolute",top:4,bottom:4,borderRadius:"inherit",right:"-4px",background:"".concat(e.colorMod(e.colors.GBK09A).alpha(.8)),width:"10px",zIndex:0}}},children:Object(a.b)(Ie.a,{bg:"GBK09C",ratio:1,css:{zIndex:1},children:r&&Object(a.b)(Re.Image,{size:"100%",src:Object(Ne.imgUrl)(r,"100w"),css:{borderRadius:"inherit",objectFit:"cover"}})})})},Pe=function(e){return[{width:"33px",right:"10px",zIndex:3},{width:"29px",right:"5px",zIndex:2},{width:"24px",right:0,zIndex:1}][e]},qe=function(e){var t=e.items,n=null==t?void 0:t.map((function(e){return e.image}));return Object(a.b)(Re.Box,{css:{flex:"0 0 44px",borderRadius:"4px"},children:Object(a.b)(Ie.a,{ratio:1,children:(null==n?void 0:n.length)>0&&n.map((function(e,t){return Object(a.b)(Re.Box,{css:Object.assign({borderRadius:"inherit",position:"absolute",bottom:0},Pe(t)),children:Object(a.b)(Ie.a,{bg:"GBK09C",ratio:3/4,css:{zIndex:1},children:e&&Object(a.b)(Re.Image,{size:"100%",src:Object(Ne.imgUrl)(e,"100w"),css:{borderRadius:"inherit",objectFit:"cover",boxShadow:"0.5px 0 2px 0 rgba(0, 0, 0, 0.1)"}})})},t)}))})})},Le=function(e){var t=e.questionId,n=e.isInAnswerPage,r=Object(Se.default)(e,_e),o=Object(g.useSelector)((function(e){return Object(T.fb)(e,t)})),c=Object(g.useDispatch)(),s=Object(Oe.b)(),l=Object(i.a)(s,3),u=l[0],d=l[1],h=l[2];if(Object(p.useEffect)((function(){o||c(Object(T.Z)(t)).catch(h)}),[o,t,h,c]),Object(p.useEffect)((function(){o&&("not found"!==o.message?d():h())}),[o,h,d]),!o||"not found"===o.message||!u)return null;var f=o.name,b=o.num,m=o.upvoteNum,v=o.rankFieldType,j=o.items,y=o.urlToken,w=2===v,C=w?qe:De;return Object(a.b)(A.a,{module:"Content",view:{id:8766,name:n?"answer":"question"},content:{token:y,parent_token:String(t)},trackCardShow:!0,children:Object(a.b)(O.b,{content:{type:"Topic",token:String(y)},children:Object(a.b)(O.e,{zaText:!0,shouldTrackClick:!0,as:"div","data-za-extra":JSON.stringify({button:{text:f}}),css:{position:"relative",zIndex:0},zaType:"Card",zaAction:"OpenUrl",zaBlock:"blueStar_questionPage_detailCard",zaEventType:"Click",extra:{link:{url:"https://www.zhihu.com/blue-star/ranking/".concat(y,"?origin_from=").concat(n?"answer":"question")}},children:Object(a.c)(Re.Flex,Object.assign(Object.assign({as:Te.a,my:"14px",py:"8px",px:"12px",alignItems:"center",css:function(e){return{backgroundImage:"linear-gradient(to left, ".concat(e.colorMod(e.colors.GBL01A).alpha(.1),", ").concat(e.colorMod(e.colors.GBL01A).alpha(.04),")"),backgroundColor:e.colors.GBK99C,borderRadius:"5px",position:"relative",overflow:"hidden"}},"data-za-detail-view-id":"8767","data-za-detail-view-name":n?"answer":"question","data-za-extra":JSON.stringify({button:{text:f}}),href:"https://www.zhihu.com/blue-star/ranking/".concat(y,"?origin_from=").concat(n?"answer":"question")},r),{},{children:[Object(a.b)(Me,{css:function(e){return{position:"absolute",width:"40.5px",height:"49.5px",top:-5,right:-1,color:e.colors.GBK99A}}}),Object(a.b)(C,{items:j}),Object(a.c)(Re.Flex,{ml:"14px",alignItems:"center",children:[Object(a.b)(Re.Text,{color:"GBK02A",fontWeight:"bold",css:{fontSize:"17px",lineHeight:"18px"},children:"小蓝星 · ".concat(f)}),Object(a.b)(Re.Text,{color:"GBK05A",css:{fontSize:"14px",lineHeight:"16px",marginLeft:"10px"},children:w?ne()(Qe||(Qe=Object(ee.a)(["收录",""," · ","知友推荐"])),Object(Ee.cnNiceNumber)(b),w?"部影视":"个商品",Object(Ee.cnNiceNumber)(m)):"来自知友的真实反馈"})]})]}))})})})},ze=n(425),Ue=n(931);function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var He=function(e){Object(d.a)(n,e);var t=Fe(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.item;return Object(a.b)(ze.a,{className:"QuestionTopic",children:Object(a.b)(Ue.a,{noHoverCard:!1,topic:e})})}}]),n}(p.Component),Ve=Object(A.b)((function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}}))(He),Ye=n(1521),We=n(2598),Ge=n(903),Je=n(1083),Ke=n(900),Ze=n(2590),Xe=["text"],$e=function(e){var t=e.text,n=Object(Se.default)(e,Xe);return Object(a.b)(U.c,Object.assign(Object.assign({preset:"plain"},n),{},{icon:Ze.a,label:t||"修改"}))};function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var tt=function(e){Object(d.a)(n,e);var t=et(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.tips;return Object(a.b)("div",{className:"QuestionReviewInfo",children:Object(a.b)("p",{children:e})})}}]),n}(p.PureComponent);tt.propsTypes={tips:v.a.string};function nt(e){var t,n,r=e.html,o=e.excerpt,c=e.thumbnailInfo,s=e.collapsed,l=e.onExpand,u=e.editable,d=e.onEdit,h=e.isVisible,f=e.isAuthor,b=o.length<r.length,m=(b||o.length>=75)&&s,v=!f&&!h,g=Object(p.useMemo)((function(){var e;return null==c||null===(e=c.thumbnails)||void 0===e?void 0:e.find((function(e){return"video"===e.type}))}),[c]),O=null==c||null===(t=c.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,j=Object(p.useState)(null),y=Object(i.a)(j,2),w=y[0],C=y[1];return Object(a.b)("div",{css:{minHeight:"10px"},children:Object(a.c)("div",{className:pe()("QuestionRichText",{"QuestionRichText--expandable":b,"QuestionRichText--collapsed":s,"QuestionRichText--video":g&&s}),onClick:function(e){m&&"function"==typeof l&&l(e);var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&C(t)},children:[g&&s&&Object(a.b)("div",{className:"QuestionRichText--wrapImgae",children:Object(a.b)("img",{src:O,alt:"video",className:"QuestionRichText--image"})}),!v&&Object(a.c)("div",{children:[m?Object(a.b)("span",{itemProp:"text",children:Object(Ke.b)(o,75)}):Object(a.b)(Je.a,{itemProp:"text",tag:"span",html:r}),m&&Object(a.c)(U.c,{preset:"plain",className:"QuestionRichText-more",children:["显示全部 ",Object(a.b)(We.a,{center:!0})]})]}),u&&!m&&Object(a.b)($e,{onClick:d}),w&&Object(a.b)(Ge.a,{img:w,onClose:function(){return C(null)}})]})})}function at(e){var t=e.reviewInfo,n=e.thumbnailInfo,r=e.html,i=e.excerpt,o=(t||{}).tips,c=Object(p.useMemo)((function(){var e;return null==n||null===(e=n.thumbnails)||void 0===e?void 0:e.find((function(e){return"video"===e.type}))}),[n]),s=Boolean(r&&i);return Object(a.c)("div",{children:[o&&c&&Object(a.b)(tt,{tips:o}),s?Object(a.b)(nt,Object.assign({},e)):null]})}var rt=n(382),it=n(67),ot=n(183),ct=n(1939),st=n(1642),lt=n(469),ut=n(104);function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ht=function(e){Object(d.a)(n,e);var t=dt(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).getRenderProps=function(){var t=e.props,n=t.draft,r=t.question,i=r.id,o=r.relationship,c=(o=void 0===o?{}:o).myAnswer;return c?c.isDeleted?{icon:Object(a.b)(ct.a,{size:17,className:"QuestionButton-icon"}),text:"撤销删除",props:{onClick:e.handleRestoreAnswer}}:{icon:Object(a.b)(st.a,{size:17,className:"QuestionButton-icon"}),text:"查看回答",props:{to:"/question/".concat(i,"/answer/").concat(c.answerId),onClick:e.handleFocusAnswer},Wrapper:ut.a}:{icon:Object(a.b)(Ze.a,{size:16,center:!0,className:"QuestionButton-icon"}),text:n?"编辑回答":"写回答",props:{onClick:e.handleAddAnswer}}},e.handleFocusAnswer=function(){var t=document.querySelector(".AnswerCard");t&&(t.classList.add("is-focus"),e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout((function(){return t.classList.remove("is-focus")}),300))},e.handleRestoreAnswer=function(){var t=e.props,n=t.question,a=n.relationship.myAnswer,r=n.id,i=t.restoreAnswer,o=t.showNotification;a.isDeleted&&i(r,a.answerId).then((function(){return o("已撤销删除回答")}))},e.handleAddAnswer=e.context.authRequired((function(t){var n=e.props,a=n.draft,r=n.question.reviewInfo,i=(r=void 0===r?{}:r).tips,o=n.zaId,c=n.cancelScheduledPublish,s=t.currentTarget,l=function(){i?e.props.showNotification(i,"red"):(o&&oe.a.trackEvent(null,{id:o}),oe.a.trackEvent(Object(it.a)(e),{action:a&&a.editableContent?"Edit":"Answer",is_intent:!0,name:s.textContent}),e.context.startAddAnswer())};a&&a.schedule?ot.a.confirm("如果继续编辑该回答，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑回答",text:{ok:"继续编辑",cancel:"我再想想"}}).then((function(){c(e.props.question.id).then(l)}),(function(){})):l()})),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){Object(lt.b)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.size,i=e.preset,o=e.color,c=void 0===o?"blue":o,s=e.onClick,l=this.getRenderProps(),u=l.icon,d=l.text,h=l.props,f=l.Wrapper,b=void 0===f?U.c:f,m=Object(a.c)(p.Fragment,{children:[u,d]});return Object(a.b)(O.a,Object.assign(Object.assign(Object.assign({as:b,zaType:"Button",zaText:"写回答"},h),s&&{onClick:s}),{},{color:c,size:r,preset:i,className:n,children:t||m}))}}]),n}(p.Component);ht.contextTypes={authRequired:v.a.func,startAddAnswer:v.a.func};var ft=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){return{draft:Object(T.n)(e,{id:t.params.id}),question:Object(T.eb)(e,{id:t.params.id})}}),{restoreAnswer:q.A,cancelScheduledPublish:q.e,showNotification:L.h}))(ht),pt=n(844),bt=n(885),mt=n(1112);function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var gt={follow_question:mt.b.follow,write_answer:mt.b.write_answer},Ot=function(e){Object(d.a)(n,e);var t=vt(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).createOpenInAppHandler=function(t){var n=e.props,a=n.question.id,r=n.isSpecialQuestionOrAnswer;return function(){r?location.href="zhihu://question/".concat(a,"?utm_app_name=zhihu_check&utm_content=").concat(t):Object(rt.e)(Object(bt.a)({type:"question",id:a},{launch_button:gt[t]}))}},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,r=n.relationship,i=n.relationship.isAuthor,o=n.isNormal,c=n.status,s=(c=void 0===c?{}:c).isLocked,l=n.questionType,u=n.isMuted,d=n.id,h=e.shouldOia,f=e.inTopBar,p="commercial"===l&&u;return Object(a.c)("div",{className:"QuestionButtonGroup",children:[i&&p?Object(a.b)(ut.a,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green",children:"推广问题"}):Object(a.b)(pt.a,Object.assign({id:d,zaId:f?3408:3309,type:"question",preset:"primary",isFollowing:(r&&{}.hasOwnProperty.call(r,"isFollowing")?r:t).isFollowing,disabled:p},h&&{onClick:this.createOpenInAppHandler("follow_question")})),o&&!s&&Object(a.b)(ft,Object.assign({color:"blue",zaId:f?3409:3311},h&&{onClick:this.createOpenInAppHandler("write_answer")}))]})}}]),n}(p.Component),jt=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n;return{shouldOia:Object(H.h)(e),isSpecialQuestionOrAnswer:Object(H.j)(e,{type:"question",id:null===(n=t.question)||void 0===n?void 0:n.id})}})))(Ot),yt=n(19),wt=n.n(yt),Ct=n(20),At=n.n(Ct),kt=n(22),St=n.n(kt),Rt=n(23),Et=n.n(Rt),Nt=n(16),It=n.n(Nt),Tt=n(6);function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=It()(e);if(t){var r=It()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Et()(this,n)}}var xt=function(e){St()(n,e);var t=Bt(n);function n(){var e;wt()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={count:Math.round(e.props.count)},e.next=function(){var t=e.props.onEnd,n=e.state.count-1;e.setState({count:n}),0===n&&(clearInterval(e.handle),t&&t())},e}return At()(n,[{key:"componentDidMount",value:function(){this.state.count<=0||(this.handle=setInterval(this.next,this.props.interval))}},{key:"componentWillUnmount",value:function(){clearInterval(this.handle)}},{key:"render",value:function(){var e=this.state.count;return Object(Tt.g)("span",null,e)}}]),n}(p.Component);xt.propTypes={count:v.a.number.isRequired,interval:v.a.number,onEnd:v.a.func},xt.defaultProps={interval:1e3};var Qt=xt,Mt=n(585),_t=n(221),Dt=n(51),Pt=n(384),qt=n(855),Lt=n(1315);function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Ut=function(e){Object(d.a)(n,e);var t=zt(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1},e.redirect=function(){var t=e.props,n=t.router,a=t.location.query,r=t.question,i=r.id,o=r.redirection;o&&o.to&&o.to.id&&"1"!==a.nr&&n.push("/question/".concat(o.to.id,"?rf=").concat(i))},e.handleRedirectionClose=function(){e.setState({redirectionHidden:!0,invitersHidden:!0}),e.timeout=setTimeout((function(){e.setState({invitersHidden:!1})}),1e3)},e.handleCloseInviters=function(){e.setState({invitersHidden:!0})},e.handleDeleteInviters=function(t){var n=e.props,a=n.question.id;(0,n.deleteInviters)(a),e.handleCloseInviters(),oe.a.trackEvent(t.target,{action:"Ignore"})},e.handleCancelAnonymous=function(){(0,e.props.onInvitationTipClose)(),e.context.toggleAnonymous(!1)},e.handleInvite=function(t){e.setState({invitersHidden:!0,invitationModalShown:!0}),oe.a.trackEvent(t.target,{action:"Invite",is_intent:!0})},e.handleInvitationModalHide=function(){e.setState({invitationModalShown:!1})},e}return Object(u.a)(n,[{key:"componentWillMount",value:function(){Object(Dt.isBrowser)()&&this.nextQuestion(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"nextQuestion",value:function(e){var t=this,n=this.context.currentUser,a=e.location.query,r=e.question.id,i=e.fromQuestion,o=e.loadItems,c=e.loadQuestion;clearTimeout(this.timeout),this.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),n&&"guest"!==n.userType&&o(r,"inviters"),a.rf&&/^\d+$/.test(a.rf)&&!i&&(this.setState({redirectionLoading:!0}),c(Number(a.rf)).catch((function(){})).then((function(){t.setState({redirectionLoading:!1})})))}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,a=t.question.id;(0,t.revokeQuestionRedirection)(e).then((function(){n[e===a?"replace":"push"]("/question/".concat(e))})),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?Object(a.b)("div",{className:"QuestionStatus-bar",children:Object(a.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(a.c)("div",{className:"QuestionStatus-bar-commercialMuted",children:["该品牌提问尚未激活，无法在社区内流通。请"," ",Object(a.b)("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer",children:"前往广告平台"})," ","进行设置。"]}),Object(a.b)("p",{children:"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"})]})}):null}},{key:"renderMute",value:function(){var e=this.props,t=e.isMuteSpecial,n=e.isMuteFreeze;return t?Object(a.b)("div",{className:"QuestionStatus-bar",children:Object(a.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(a.b)("strong",{children:"问题已解散"}),Object(a.b)("p",{children:"当前问题下的回答暂时无法查看。"})]})}):n?Object(a.b)("div",{className:"QuestionStatus-bar",style:{display:"none"},children:Object(a.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(a.b)("strong",{children:"问题已冻结"}),Object(a.b)("p",{children:"除浏览外不开放其他用户互动功能。"})]})}):null}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&Object(a.b)("div",{className:"QuestionStatus-bar",children:Object(a.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(a.c)("strong",{children:[e.description,"。"]}),Object(a.c)("em",{children:["原因：",e.reason,"。"]}),1033!==e.reasonId&&Object(a.b)(Pt.a,{html:e.note})]})})}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,r=t.question,i=r.id,o=r.redirection,c=r.relationship,s=(c=void 0===c?{}:c).myAnswer,l=t.inviters,u=t.fromQuestion,d=t.isAnswerPage,h=this.state,f=h.redirectionLoading,p=h.redirectionHidden,b=h.invitersHidden,m=null,v=null;if(!f)if(o&&o.to&&o.to.id&&!p){var g=o.to,O=g.id,j=g.title,y="1"!==n.nr&&!d;m=y?"redirect-countdown":"redirect",v=Object(a.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(a.c)("div",{className:"QuestionStatus-notification-content",children:[y?Object(a.c)("span",{children:["此问题将在 ",Object(a.b)(Qt,{count:5,onEnd:this.redirect})," ","秒后跳转至"]}):Object(a.b)("span",{children:"此问题已重定向至"})," ",Object(a.b)(ut.a,{preset:"plain",to:"/question/".concat(O,"?rf=").concat(i),children:j})]}),Object(a.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(a.b)(U.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(i)},children:"撤销重定向"}),Object(a.b)("div",{className:"QuestionStatus-notification-divider"}),Object(a.b)(U.c,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else if(u&&u.redirection&&u.redirection.to&&u.redirection.to.id&&u.redirection.to.id===i&&!p){var w=u.id,C=u.title;m="redirect-from",v=Object(a.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(a.c)("div",{className:"QuestionStatus-notification-content",children:["从问题"," ",Object(a.b)(ut.a,{preset:"plain",to:"/question/".concat(w,"?nr=1"),children:C})," ","跳转而来"]}),Object(a.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(a.b)(U.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(w)},children:"撤销重定向"}),Object(a.b)("div",{className:"QuestionStatus-notification-divider"}),Object(a.b)(U.c,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else l&&l.length&&!b&&!s&&(v=Object(a.b)(A.a,{module:"InvitationCard",trackCardShow:!0,children:Object(a.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(a.c)("div",{className:"QuestionStatus-notification-content",children:[l.map((function(e,t){return Object(a.c)("span",{children:[0!==t&&"、",Object(a.b)(qt.a,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"})]},e.urlToken)}))," ","邀请你回答此问题"]}),Object(a.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(a.b)(U.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite,children:"邀请别人"}),Object(a.b)("div",{className:"QuestionStatus-notification-divider"}),Object(a.b)(U.c,{preset:"plain",onClick:this.handleDeleteInviters,children:"忽略邀请"})]}),Object(a.b)("div",{children:Object(a.b)(U.c,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters,icon:Mt.a})})]})}));return Object(a.b)(_t.a,{className:"QuestionStatus-notification",notification:v?{key:m,text:v}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return Object(a.b)(_t.a,{className:"QuestionStatus-notification",notification:t?{text:Object(a.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(a.b)("div",{className:"QuestionStatus-notification-content",children:"在匿名状态下无法邀请他人回答"}),Object(a.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(a.b)(U.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous,children:"取消匿名"}),Object(a.b)("div",{className:"QuestionStatus-notification-divider"}),Object(a.b)(U.c,{preset:"plain",onClick:n,children:"关闭"})]})]})}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return Object(a.c)("div",{className:"QuestionStatus",children:[this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),Object(a.b)(F.b,{size:"fullPage",onClose:this.handleInvitationModalHide,children:t&&Object(a.b)(Lt.a,{question:e})})]})}}]),n}(p.Component);Ut.contextTypes={currentUser:v.a.object,toggleAnonymous:v.a.func};var Ft=Object(I.compose)(Object(B.a)({replacement:null}),r.withRouter,Object(g.connect)((function(e,t){var n=e.entities.questions,a=e.question.inviters,r=t.location.query,i=t.question.id,o={isMuteSpecial:Object(T.E)(t.question),isMuteFreeze:Object(T.D)(t.question),inviters:a[i]};if(r.rf&&/^\d+$/.test(r.rf)){var c=n[Number(r.rf)];c&&(o.fromQuestion=c)}return o}),{loadItems:T.R,loadQuestion:T.T,revokeQuestionRedirection:T.hb,deleteInviters:T.k}))(Ut),Ht=n(74),Vt=n(929),Yt=n(4),Wt=n(1394);function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Jt,Kt=function(e){Object(d.a)(n,e);var t=Gt(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.parent.id;(0,t.loadQuestionFollowers)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,r=e.isDrained,i=e.items,o=e.currentUser;return Object(a.b)(Wt.a,{currentUser:o,isFetching:n,isDrained:r,items:i,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),n}(p.Component),Zt=Object(g.connect)((function(e,t){var n=t.parent.id,a=e.entities.users,r=e.question,i=r.followers,o=r.concernedFollowers,c=i[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},s=c.isFetching,l=c.isDrained,u=c.order,d=c.ids,h=(o[n]||{ids:[]}).ids;return{isFetching:s,isDrained:l,order:u,items:[].concat(Object(Yt.a)(h),Object(Yt.a)(d.filter((function(e){return!h.includes(e)})))).map((function(e){return a[e]})),currentUser:Object(D.b)(e)}}),{loadQuestionFollowers:T.W})(Kt),Xt=n(278);function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var en=function(e){Object(d.a)(n,e);var t=$t(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={followersShown:!1},e.showFollowers=function(){e.setState({followersShown:!0})},e.closeFollowers=function(){e.setState({followersShown:!1})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,r=e.concernedFollowers,i=t.followerCount,o=t.visitCount,c=this.state.followersShown;return Object(a.c)("div",{className:"QuestionFollowStatus",children:[Object(a.c)(Vt.a,{divider:!0,className:"QuestionFollowStatus-counts",children:[n?Object(a.b)(Vt.a.Item,{tag:U.c,preset:"plain",onClick:this.showFollowers,name:"关注者",value:i}):Object(a.b)(Vt.a.Item,{name:"关注者",value:i}),Object(a.b)(Vt.a.Item,{name:"被浏览",value:o})]}),Boolean(r&&r.length)&&Object(a.c)(U.c,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers,children:[Object(a.b)("span",{className:"QuestionFollowStatus-people-tip",children:ne()(Jt||(Jt=Object(ee.a)(["","也关注了该问题"])),1===r.length?r[0].name:"他们")}),r.map((function(e){return Object(a.b)(qt.a,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0},e.id)}))]}),Object(a.b)(Ht.b,{size:"fullPage",onClose:this.closeFollowers,children:c&&Object(a.b)(Zt,{parent:t})})]})}}]),n}(p.Component),tn=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n=t.params;return{currentUser:Object(D.b)(e),concernedFollowers:Object(T.f)(e,{id:n.id})}}),{loadQuestionConcernedFollowers:T.V}),Object(Xt.a)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}))(en),nn=n(824),an=n(822),rn=n(2608),on=n(2586),cn=n(87),sn=n(25),ln=n(889),un=n(847),dn=n(255),hn=n(1539),fn=n(49),pn=n(2623),bn=n(1390),mn=n(52);function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var gn=function(e){Object(d.a)(n,e);var t=vn(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={commentsShown:!1},e.handleCommentsShow=function(){var t=e.props,n=t.question.reviewInfo.tips,a=t.handleReviewingNotification;n?a():(oe.a.trackEvent(Object(it.a)(e),{action:"Comment",element:"Button",is_intent:!0}),e.setState({commentsShown:!0}))},e.handleCommentsClose=function(){e.setState({commentsShown:!1})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,a=n.pathname,r=n.search,i=Boolean(/^\/question\/(\d*)$/.test(a)),o=Object(fn.parse)(location.search.slice(1)).answer_deleted_redirect;if(i&&"true"!==o){var c=Object(mn.a)(location.hash);this.setState({byComment:c}),c&&(t.replace("".concat(a).concat(r)),this.handleCommentsShow())}}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,r=e.isMuteSpecial,i=t.commentCount,o=t.adminClosedComment,c=this.state.commentsShown,s="",l=i&&!o;return s="textNumber"===n?l?"评论 ".concat(Object(Ee.formatNumber)(i)):"":l?"".concat(Object(Ee.formatNumber)(i)," 条评论"):"添加评论",Object(a.c)("div",{className:"QuestionHeader-Comment",children:[Object(a.b)(U.c,{preset:"plain",onClick:this.handleCommentsShow,icon:pn.a,label:s,disabled:r}),Object(a.b)(F.b,{size:"fullPage",onClose:this.handleCommentsClose,children:c&&Object(a.b)(bn.a,{type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission})})]})}}]),n}(p.Component);gn.propTypes={question:v.a.object.isRequired,handleReviewingNotification:v.a.func.isRequired};var On=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){return{isMuteSpecial:Object(T.E)(t.question)}})))(gn),jn=n(2625);var yn=function(e){var t=Object(p.useRef)(null),n=e.authRequired,r=e.questionId,i=Object(g.useDispatch)(),o=Object(g.useSelector)((function(e){return Object(T.eb)(e,{id:r})})),l=o.relationship,u=l.voting,d=l.isFollowing,h=o.voteupCount,f=o.canVote,b="0"===String(u);Object(p.useEffect)((function(){oe.a.trackCardShow(t.current,{name:String(h),id:7228})}),[]);var m=function(){if(!d){var e=b;return i(Object(T.qb)(r,e))}},v=pe()("GoodQuestionAction-commonBtn",{"GoodQuestionAction-highLightBtn":"1"===String(u)}),j=n(Object(s.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(T.tb)(r,u));case 2:return e.next=4,m();case 4:n=b?"Upvote":"UnUpvote",oe.a.trackEvent(t.current,{action:n,name:String(h),id:7229});case 6:case"end":return e.stop()}}),e)}))));return Object(a.b)("div",{className:"GoodQuestionAction",children:f&&Object(a.b)(O.a,{as:U.c,zaText:b?"好问题":"取消好问题",zaType:"Button",zaAction:b?"Upvote":"UnUpvote",onRef:function(e){return t.current=e},className:v,preset:"plain",onClick:j,icon:jn.a,label:h>0?"好问题 ".concat(h):"好问题"})})},wn=n(2620),Cn=n(986),An={true:{title:"确定解锁问题编辑？",subtitle:"该问题编辑已锁定，解锁后可被其他用户编辑，要解锁编辑吗？",confirmText:"解锁问题编辑"},false:{title:"确定锁定问题编辑？",subtitle:"锁定后，其他用户将不可编辑你提出的问题",confirmText:"锁定问题编辑"}};function kn(e){var t=e.showModal,n=e.showEncourageAuthorEditLock,r=e.handleConfirmEditLock,o=e.handleEditLockShown,c=n?"编辑已锁定":"锁定编辑",s=Object(p.useRef)(),l=Object(p.useState)(!1),u=Object(i.a)(l,2),d=u[0],h=u[1];Object(p.useEffect)((function(){Ce.a.get("question::hasSeenShowEditLockHint")||Object(Cn.b)([Object(Cn.a)(3e3).then((function(){Ce.a.set("question::hasSeenShowEditLockHint",!0),h(!0)})),Object(Cn.a)(3e3).then((function(){h(!1)}))])}),[]),Object(p.useEffect)((function(){Object(ye.onViewedOnce)(s.current,(function(){oe.a.trackCardShow(s.current,{id:7666},{button:{text:c}})}))}),[c]);var f=Object(p.useCallback)((function(){oe.a.trackEvent(s.current,{id:7669,action:"Click"},{button:{text:c}}),o()}),[o,c]),b=function(e){var t=e?An[n].confirmText:"取消";oe.a.trackEvent(null,{id:7678,action:"Select",name:t},{button:{text:c}}),e?r():o()};return Object(a.c)(a.a,{children:[Object(a.b)(U.c,{preset:"plain",onClick:f,label:c,icon:wn.a,onRef:s}),Object(a.b)(je.a,{className:"QuestionEditLockMenu-Hint",isOpen:d,target:s.current,placement:"top",children:"锁定后问题不可被其他用户编辑"}),Object(a.b)(ln.a,Object.assign({needCancel:!1,showButtonHorizontal:!0,showConfirmButtonRight:!0,onCancel:function(){return b(!1)},onSubmit:function(){return b(!0)},shown:t},An[n]))]})}function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Rn={invitationShown:!1,reportShown:!1,editLockShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1},En=[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}],Nn=[{key:"open",name:"开放回答"},{key:"censor",name:"预审回答"}],In=function(e){Object(d.a)(n,e);var t=Sn(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=Rn,e.handleReviewingNotification=function(){var t=e.props.question.reviewInfo.tips;e.props.showNotification(t,"red")},e.handleInvite=e.context.authRequired((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventId,a=void 0===n?3312:n;oe.a.trackEvent(null,{id:a});var r,i=e.props,o=i.question,c=o.relationship.isAnonymous,s=o.status,l=(s=void 0===s?{}:s).isLocked,u=s.isClose,d=s.isEvaluate,h=s.isSuggest,f=o.reviewInfo,p=(f=void 0===f?{}:f).tips,b=i.onInvitationTipShow;p?e.handleReviewingNotification():c?b():(l?r="锁定":u?r="关闭":(d||h)&&(r="建议修改"),r?e.props.showNotification("该问题已被".concat(r,"，不能邀请人回答此问题"),"red"):e.handleInvitationShow())}),sn.W.invite),e.handleInvitationShow=function(){return e.setState({invitationShown:!0})},e.handleInvitationHide=function(){return e.setState({invitationShown:!1})},e.handleReport=function(){e.setState({reportShown:!e.state.reportShown})},e.handleEditLockShown=function(){e.setState({editLockShown:!e.state.editLockShown})},e.handleLockClick=function(){return e.props.question.status.isLocked?e.handleUpdateQuestionLocked():e.handleLockTipsShow()},e.handleOpenStatusChange=function(t){var n=e.props;(0,n.updateBrandQuestionOpenStatus)(n.question.id,t)},e.handleUpdateQuestionLocked=function(){var t=e.props,n=t.question.id;(0,t.updateQuestionLocked)(n)},e.handleLockTipsShow=function(){return e.setState({lockTipsShown:!0})},e.handleLockTipsHide=function(){return e.setState({lockTipsShown:!1})},e.handleDelete=function(){return e.setState({deleteShown:!0})},e.handleDeleteModalClose=function(){return e.setState({deleteShown:!1})},e.handleConfirmDelete=function(){e.handleDeleteModalClose();var t=e.props,n=t.question,a=n.id,r=n.questionType,i=t.deleteQuestion,o=t.deleteBrandQuestion;return("commercial"===r?o:i)(a).then((function(){location.href="/"}))},e.handleConfirmEditLock=function(){e.handleEditLockShown();var t=e.props;(0,t.toggleQuestionEditLock)(t.question.id)},e.handleRedirectionCreatorShow=function(){e.props.question.reviewInfo.tips?e.handleReviewingNotification():e.setState({redirectionCreatorShown:!0})},e.handleRedirectionCreatorClose=function(){e.setState({redirectionCreatorShown:!1})},e.handleRedirectionCreated=function(t,n){var a=e.props,r=a.router,i=a.question.id,o=t.id;e.handleRedirectionCreatorClose(),n.then((function(){r.push("/question/".concat(o,"?rf=").concat(i))}))},e.handleCommentPermissionChange=function(t){var n=e.props;(0,n.updateQuestionPermission)(n.question.id,t)},e.handleShareMenuTogglerClick=function(){var t=e.props.question.reviewInfo;return!(t=void 0===t?{}:t).tips||(e.handleReviewingNotification(),!1)},e.toggleAnonymous=function(){var t=e.props,n=t.question.reviewInfo,a=n.tips,r=n.editTips,i=t.isCurrentAnswerCommercialReported;a?e.handleReviewingNotification():r?e.props.showNotification(r,"red"):i?e.props.showNotification("已经进行商业声明的内容不能启用匿名","red"):e.context.toggleAnonymous()},e.getQuestionStatus=function(){return Object(mt.c)(e.props.question.status)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState(Rn)}},{key:"shouldShowAnonymousMenuItem",get:function(){var e=this.context.currentUser;if(e&&!e.isOrg){var t=this.props,n=t.question,a=n.questionType,r=n.relationship.isAnonymous,i=t.allowCommercialAnonymousAnswer;if(r)return!0;if("normal"===a)return!0;if("commercial"===a&&i)return!0}return!1}},{key:"shouldShowMenu",get:function(){var e=this.props,t=e.question.questionType,n=e.permission.canBrandAdminEdit,a="commercial"===t;return!a||!(!a||!n)}},{key:"renderCommercialMenuItems",value:function(e){var t=this,n=this.props,r=n.permission.canBrandAdminEdit,i=n.question,o=i.status,c=(o=void 0===o?{}:o).isLocked,s=i.commentPermission,l=i.brandOpenStatus,u=i.brand,d=(u=void 0===u?{}:u).isPuQuestion;if(!r)return null;var h=En,f=Nn;return Object(a.c)(p.Fragment,{children:[h.map((function(n){var r=n.key,i=n.name,o=!s&&"all"===r||s===r;return Object(a.c)(cn.b,{className:e,onClick:function(){return t.handleCommentPermissionChange(r)},children:[o&&Object(a.b)(nn.a,{className:"MenuItem-icon",text:!0,center:!0})," ",i]},r)})),Object(a.b)("li",{className:"Menu-divider"}),(d&&(f=[{key:"open",name:"开放回答"}]),Object(a.c)(a.a,{children:[!c&&f.map((function(n){var r=n.key,i=n.name,o=l===r;return Object(a.c)(cn.b,{className:e,onClick:function(){return!o&&t.handleOpenStatusChange(r)},children:[o&&Object(a.b)(nn.a,{className:"MenuItem-icon",text:!0,center:!0})," ",i]},r)})),!d&&Object(a.b)(cn.b,{className:e,onClick:t.handleLockClick,children:c?"开放回答":"关闭回答"}),Object(a.b)("li",{className:"Menu-divider"})]}))]})}},{key:"renderMobileMenuItems",value:function(e){var t=this.props,n=t.question.id,r=t.shouldOia;return e.map((function(e){var t=e.text,i=e.handler;return Object(a.b)(cn.b,{onClick:r?function(){return Object(rt.e)(Object(bt.a)({type:"question",id:n},{utm_content:"invite"}))}:i,children:t},t)}))}},{key:"renderLogMenuItem",value:function(){var e=this.props,t=e.question.id;return e.shouldOia?Object(a.b)(cn.b,{onClick:function(){return Object(rt.e)(Object(bt.a)({type:"question",id:t}))},children:"查看问题日志"}):Object(a.b)(cn.b,{tag:ut.a,a:!0,to:"/question/".concat(t,"/log"),children:"查看问题日志"})}},{key:"render",value:function(){var e=this.state,t=e.invitationShown,n=e.reportShown,r=e.editLockShown,i=e.lockTipsShown,o=e.deleteShown,c=e.redirectionCreatorShown,s=this.props,l=s.question,u=s.question,d=u.id,h=u.title,f=u.answerCount,p=u.collapsedAnswerCount,b=u.relationship,m=b.isAuthor,v=b.isAnonymous,g=u.questionType,j=u.isEditable,y=u.author.urlToken,w=u.showEncourageAuthorEditLock,C=s.isMuteSpecial,A=s.isMuteFreeze,k=s.publicEditPermission,S=(k=void 0===k?{}:k).isQuestionRedirectEditable,R=s.currentUserUrlToken,E=s.permission.canBrandAdminEdit,N=s.editQuestionButton,I=this.context.currentUser,T="commercial"===g,B=I&&!m,x=I&&m&&"boolean"==typeof w,Q=T?E:Boolean(m&&0===f&&0===p),M=[B&&{text:"举报",icon:an.a,handler:this.handleReport}].filter(Boolean),_=y===R,D=Object(mt.e)(j,_,S),P=this.shouldShowAnonymousMenuItem,q=P||this.shouldShowMenu,L=pe()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":T});return Object(a.c)("div",{className:"QuestionHeaderActions",children:[Object(a.b)(O.a,{as:U.c,zaText:!0,zaType:"Button",color:"grey",style:{marginRight:16},onClick:this.handleInvite,label:"邀请回答",icon:rn.a,disabled:C||A}),Object(a.b)(yn,{questionId:d,authRequired:this.context.authRequired}),Object(a.b)(On,{question:l,handleReviewingNotification:this.handleReviewingNotification}),Object(a.b)(un.a,{id:d,title:h,href:"/question/".concat(d),onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:C||A}),N,x&&Object(a.b)(kn,{showModal:r,showEncourageAuthorEditLock:w,handleEditLockShown:this.handleEditLockShown,handleConfirmEditLock:this.handleConfirmEditLock}),q&&Object(a.c)(cn.c,{toggler:Object(a.b)(U.c,{preset:"plain","aria-label":"更多",icon:on.a}),menuClassName:"QuestionHeader-menu",itemClassName:L,children:[!1,P&&Object(a.b)(cn.b,{onClick:this.toggleAnonymous,children:v?"取消匿名身份":"使用匿名身份"}),T&&this.renderCommercialMenuItems(L),Q&&Object(a.b)(cn.b,{onClick:this.handleDelete,children:"删除问题"}),D&&!I.isOrg&&"normal"===g&&Object(a.b)(cn.b,{onClick:this.handleRedirectionCreatorShow,children:"问题重定向"}),!T&&this.renderLogMenuItem(),M.map((function(e){var t=e.text,n=e.handler,r=e.disabled;return Object(a.b)(cn.b,{onClick:n,disabled:r,children:"举报问题"},t)}))]}),Object(a.b)(dn.a,{type:"question",urlToken:d,shown:n,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),Object(a.b)(F.b,{size:"fullPage",onClose:this.handleInvitationHide,children:t&&Object(a.b)(Lt.a,{question:l})}),Object(a.b)(ln.a,{title:T?"关闭回答":"锁定问题",subtitle:"".concat(T?"关闭":"锁定","后该问题将无法添加新回答，你确定要").concat(T?"关闭":"锁定","吗？"),shown:i,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),Object(a.b)(F.b,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose,children:c&&Object(a.b)(hn.a,{question:l,onSubmitted:this.handleRedirectionCreated})}),Object(a.b)(ln.a,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:o})]})}}]),n}(p.PureComponent);In.contextTypes={currentUser:v.a.object,authRequired:v.a.func,toggleAnonymous:v.a.func};var Tn=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){return{shouldOia:Object(H.h)(e),isMuteSpecial:Object(T.E)(t.question),isMuteFreeze:Object(T.D)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(T.cb)(e),allowCommercialAnonymousAnswer:"show"===Object(H.a)(e,"gue_anonymous"),isCurrentAnswerCommercialReported:Object(T.C)(e,t.question)}}),{deleteQuestion:T.l,deleteBrandQuestion:T.i,updateQuestionLocked:T.rb,toggleQuestionEditLock:T.jb,showNotification:L.h,updateQuestionPermission:T.sb,updateBrandQuestionOpenStatus:T.kb}))(In);function Bn(e){var t=e.brand,n=e.noDivider,r=t.name,i=t.logo,o=t.target,c=t.description,s=t.typeDescription,l=o?"a":"div";return Object(a.c)("div",{className:pe()("BrandQuestionSymbol",{"is-mobile":!1}),children:[Object(a.c)(l,Object.assign(Object.assign({className:"BrandQuestionSymbol-brandLink"},o&&{href:"/".concat("organization"===o.userType?"org":"people","/").concat(o.urlToken)}),{},{children:[Object(a.b)("img",{role:"presentation",src:i,className:"BrandQuestionSymbol-logo",alt:""}),Object(a.b)("span",{className:"BrandQuestionSymbol-name",children:r}),o&&Object(a.b)(me.c,{badge:o.badge})]})),Object(a.b)("span",{css:{marginLeft:5},children:c}),Boolean(s)&&Object(a.b)("span",{className:"BrandQuestionSymbol-typeDesc",children:s}),!n&&Object(a.b)("div",{className:"BrandQuestionSymbol-divider"})]})}var xn=n(2673);function Qn(e,t){var n=new Date(e),a=new Date(t),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),i=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.floor((i-r)/864e5)}var Mn=Object.assign;var _n=function(e){return b.a.createElement(Be.a,Mn({viewBox:"0 0 72 18"},e),b.a.createElement("g",{fillRule:"evenodd"},b.a.createElement("rect",{width:"72",height:"18",rx:"2"}),b.a.createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},b.a.createElement("tspan",{x:"19",y:"13"},"有奖问答")),b.a.createElement("path",{fill:"#FFF",d:"M13.4 5.8H11a.4.4 0 01-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 110-1.5H10zm.8 0h4.3a.8.8 0 010 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 00-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z",fillRule:"nonzero"})))};function Dn(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,i=t.prize,o=i.endTime,c=i.rule,s=i.status;return Object(a.c)("div",{className:"BrandQuestionPrizes-tips",children:[Object(a.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(a.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动时间","："]}),xn.a(new Date(1e3*o),"yyyy-MM-dd HH:mm")," 截止"]}),Object(a.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(a.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动规则","："]}),c]}),Object(a.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(a.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["获奖公示","："]}),"ongoing"===s&&"获奖名单将在活动结束后公布","finished"===s&&"品牌开奖中，即将公布获奖名单","awarded"===s&&Object(a.b)(r.Link,{target:"_blank",to:"/organization/question/".concat(n,"/winners"),children:"查看获奖名单"}),!1]}),Object(a.c)("div",{className:"BrandQuestionPrizes-rule",children:["品牌方为本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",Object(a.b)("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer",children:"《有奖问答活动管理办法》"})]})]})},i=e.handleToggle,o=e.expanded,c=e.question,s=c.id,l=c.prize,u=c.relationship,d=(u=void 0===u?{}:u).isAuthor,h=c.permission,f=(h=void 0===h?{}:h).isSuperUser;if(!l||!l.status)return null;var p=l.endTime,b=l.prizes,m=l.status,v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(t),a=Math.floor(n.getTime()/1e3),r=e-a;if(r<0)return null;var i,o=0,c=1,s=60*c,l=60*s,u=24*l;if(r>u){var d=new Date(1e3*e);o=Qn(n,d),i="天"}else r>l?(o=Math.floor(r/l),i="小时"):r>s?(o=Math.floor(r/s),i="分钟"):(o=r,i="秒");return{quantity:o,unit:i}}(p);return Object(a.c)("div",{className:pe()("BrandQuestionPrizes",{"is-mobile":!1}),children:[Object(a.c)("div",{className:"BrandQuestionPrizes-info",children:[Object(a.c)("div",{className:"BrandQuestionPrizes-bar",onClick:i,children:[Object(a.c)("div",{className:"BrandQuestionPrizes-desc",children:[Object(a.c)("div",{className:"BrandQuestionPrizes-symbol",children:[Object(a.b)(_n,{alt:"logo",width:72,height:18,fill:"ongoing"===m?"#ff9607":"#999999"}),"ongoing"===m&&Object(a.c)("span",{children:["距离结束还有",Object(a.b)("em",{children:v.quantity}),v.unit]}),"finished"===m&&"待开奖","awarded"===m&&"已开奖"]}),Object(a.c)("div",{className:"BrandQuestionPrizes-name",children:["奖品：",b[0].name,b.length>1&&"等"]})]}),Object(a.c)("div",{className:"BrandQuestionPrizes-images",children:[b.map((function(e,t){var n=e.imageUrl;return n&&Object(a.b)("img",{src:n,alt:""},"BrandQuestionPrizes-images".concat(t))})),Object(a.b)(We.a,{text:!0,center:!0,fill:"#9fadc7"})]})]}),o&&Object(a.b)("div",{className:"BrandQuestionPrizes-detail",children:b.map((function(e,n){var r=e.imageUrl,i=e.name,o=e.value,c=e.quantity;return Object(a.c)("div",{className:"BrandQuestionPrizes-prize",children:[Object(a.c)("div",{className:"BrandQuestionPrizes-intro",children:[r&&Object(a.b)("img",{className:"BrandQuestionPrizes-prizeImage",src:r,alt:""}),Object(a.c)("div",{className:"BrandQuestionPrizes-prizeInfo",children:[Object(a.c)("div",{className:"BrandQuestionPrizes-prizeName",children:[b.length>1&&"".concat(t[n],"等奖："),i]}),Object(a.c)("div",{className:"BrandQuestionPrizes-prizeValue",children:["价值 ¥ ",o]})]})]}),Object(a.c)("div",{className:"BrandQuestionPrizes-prizeQuantity",children:[c," 份"]})]},"BrandQuestionPrizes-prize".concat(n))}))}),o&&!1]}),o&&n(),o&&Object(a.b)("hr",{className:"BrandQuestionPrizes-split"}),(f||d)&&Object(a.c)(ut.a,{className:"BrandQuestionPrizes-edit",to:"/organization/question/".concat(s,"/setting/").concat("finished"===m?"winners":"prize"),children:["ongoing"===m&&"编辑有奖回答","finished"===m&&"填写获奖名单"]})]})}var Pn=n(428);function qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Ln=function(e){Object(d.a)(n,e);var t=qn(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.question,n=t.id,r=t.permission,i=void 0===r?{}:r,o=i.isSuperUser,c=i.canBrandAdminEdit,s=i.haveCard;return c||o?Object(a.b)(cn.c,{className:"BrandQuestionSettingMenu",toggler:Object(a.b)(U.c,{children:"设置样式"}),children:Object(a.c)(p.Fragment,{children:[Object(a.b)(cn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/topbanner"))},children:"设置提问头图"}),Object(a.b)(cn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/prize"))},children:"编辑有奖问答"}),s&&Object(a.b)(cn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/advanced"))},children:"编辑品牌推荐"})]})}):null}}]),n}(p.Component);Ln.contextTypes={currentUser:v.a.object,router:v.a.object};var zn=Object(I.compose)(Object(g.connect)((function(e,t){return{question:e.entities.questions[t.question.id]}})),Object(Pn.a)())(Ln),Un=n(825),Fn=n(1095),Hn=n(395);function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Yn=function(e){Object(d.a)(n,e);var t=Vn(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleFollow=function(){var t=e.props.pin,n=(t=void 0===t?{}:t).author.isFollowing?1977:1976;e.handleTrack(n)},e.handleTrack=function(t){var n=e.props.pin,a=(n=void 0===n?{}:n).author;oe.a.trackEvent(Object(it.a)(e),{id:t},{button:{text:a.name}})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,a=n.type,r=n.id,i=t.getPinContents;"pin"===a&&i(r,{failsafe:!0}).then((function(t){var n=t.payload,a=(void 0===n?{}:n).author,r=(a=void 0===a?{}:a).name;oe.a.trackCardShow(e,{id:1969},{button:{text:r}})}))}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,r=t.id,i=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),o=n||{},c=o.type,s=o.urlToken,l=o.isFollowing,u="https://www.zhihu.com/pin/".concat(r);return Object(a.c)("div",{className:"QuestionRelatedCard",children:[Object(a.b)("div",{className:"QuestionRelatedCard-title",children:"相关报道"}),Object(a.c)("div",{className:"QuestionRelatedCard-content",children:[Object(a.b)("span",{dangerouslySetInnerHTML:{__html:Object(Fn.truncateHTML)(i,110).content}}),u&&Object(a.b)("a",{className:"QuestionRelated-jump",href:u,onClick:function(){e.handleTrack(1975)},children:"查看详情"})]}),s&&Object(a.c)("div",{className:"QuestionRelatedCard-footer",children:[Object(a.c)("div",{children:["来自",Object(a.b)("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/".concat(s),target:"_blank",rel:"noopener noreferrer",onClick:function(){e.handleTrack(1971)},children:n.name})]}),Object(a.b)("div",{role:"button",tabIndex:0,onClick:this.handleFollow,children:Object(a.c)(pt.a,{className:"QuestionRelatedCard-follow",type:c,id:s,isFollowing:l,children:[Object(a.b)(Un.a,{text:!0,center:!0},"icon"),"关注机构"]})})]})]})}}]),n}(p.Component);Yn.propTypes={target:v.a.shape({type:v.a.string,id:v.a.string}).isRequired};var Wn=Object(I.compose)(Object(g.connect)((function(e,t){return{pin:Object(Hn.g)(e,t.target.id)}}),{getPinContents:Hn.e}),Object(A.b)((function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}})))(Yn);function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Jn,Kn=function(e){Object(d.a)(n,e);var t=Gn(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.question.author;return Object(a.b)("div",{className:"OrgQuestionSymbol",children:Object(a.c)("div",{className:pe()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":!1}),children:[Object(a.c)("div",{className:"OrgQuestionSymbol-main QuestionHeader-main",children:[Object(a.b)("div",{className:"OrgQuestionSymbol-avatar",children:Object(a.b)(qt.a,{user:e,avatar:!0,avatarProps:{size:38}})}),Object(a.c)("div",{className:"OrgQuestionSymbol-name",children:[Object(a.b)(qt.a,{user:e})," 的提问"]})]}),Object(a.b)("div",{className:"OrgQuestionSymbol-tip",children:Object(a.b)(ut.a,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank",children:"了解机构提问"})})]})})}}]),n}(p.Component),Zn=n(145),Xn=n(833),$n=n(1130),ea=n(165),ta=function(e){var t=e.percent,n=e.reviewerCount,r=e.ratioStatus,i=e.title;return Object(a.c)("div",{className:"QuestionTopicReviewCardExtraInfo-cardTitleContainer",children:[Object(a.b)("h3",{className:"QuestionTopicReviewCardExtraInfo-cardTitle",children:i}),"normal"===r?Object(a.c)("div",{children:[" ",Object(a.b)("span",{className:"QuestionTopicReviewCardExtraInfo-percentNum",children:"".concat((10*t).toFixed(),"%")})," ",Object(a.c)("span",{children:["知友推荐 · ",ne()(Jn||(Jn=Object(ee.a)(["","人评价"])),n)]})]}):Object(a.b)("span",{children:"  推荐数据积累中"})]})};ta.propType={percent:v.a.number.isRequired,reviewerCount:v.a.string.isRequired};var na=ta,aa=n(34),ra=n(1522),ia=Object(I.compose)(Object(g.connect)(null,(function(e,t){var n=t.metaInfo.id,a=t.questionId;return{onUpdateVoteTopic:function(t){var r=t.voteFor,i=t.method;return e(Object(aa.kb)({questionId:a,id:n,voteFor:r,method:i}))}}})),r.withRouter)(ra.a);function oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ca=function(e){Object(d.a)(n,e);var t=oa(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).trackReviewCardOpenUrl=function(e){oe.a.trackEvent(e.target,{id:4175,action:"OpenUrl",name:name})},e.renderUnpublishedCard=function(t,n,r){return Object(a.c)(Xn.d,{className:"QuestionHeaderTopicMeta",children:[e.renderCardImage("QuestionHeaderTopicMeta-SideImg"),Object(a.c)("div",{className:"QuestionHeaderTopicMeta-Content",children:[Object(a.c)("div",{className:"QuestionHeaderTopicMeta-UnpublishedTitleContainer",children:[Object(a.b)("h3",{className:"QuestionHeaderTopicMeta-UnpublishedTitle",children:t}),"  ",Object(a.c)("span",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo",children:["暂无评分",Boolean(n)&&" · ".concat(n," 上映")]})]}),Object(a.b)("div",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo",dangerouslySetInnerHTML:{__html:r}})]})]})},e}return Object(u.a)(n,[{key:"renderCardImage",value:function(e){var t=this.props,n=t.meta,r=t.meta.meta,i=(r=void 0===r?{}:r).title,o=r.avatar,c=n.avatarUrl,s=n.category;return Object(a.b)($n.a,{className:pe()("".concat(e),{"QuestionHeaderTopicMeta-SideImg--goods":"n_goods"===s}),src:o||c,alt:i})}},{key:"renderTopReviewCard",value:function(){var e=this.props,t=e.meta,n=e.questionId,r=t.name,i=t.meta,o=(i=void 0===i?{}:i).title,c=i.summary,s=i.description2,l=i.description1,u=i.pubInfo,d=t.excerpt,h=c||d||s||l;if(u&&(1===u.status||2===u.status)){var f=u.pubDate;return this.renderUnpublishedCard(o||r,f,h)}return Object(a.b)(Xn.d,{className:"QuestionHeaderTopicMeta",children:Object(a.c)("div",{className:"QuestionHeaderTopicMeta-CardMain",children:[this.renderCardImage("QuestionHeaderTopicMeta-SideImg"),Object(a.b)("div",{className:"QuestionHeaderTopicMeta-Content",children:Object(a.b)(ia,{metaInfo:t,questionId:n,ReviewCardExtraInfoComponent:na,reviewerCountFormatter:Ee.formatNumber,children:Object(a.b)("div",{className:"QuestionHeaderTopicMeta-Info",dangerouslySetInnerHTML:{__html:h}})})})]})})}},{key:"render",value:function(){var e=this.props.meta;if(!e)return null;var t=e.category,n=e.id,r=e.vote,i=e.isVote,o=r&&i;if(!o)return null;var c=["like","dislike"].includes(r.status);return Object(a.b)(A.a,Object.assign(Object.assign({module:"TopicItem",moduleName:t},o&&{view:{id:4174,name:c?"已评价":"未评价"}}),{},{card:{content:Object.assign(Object.assign({type:"Topic"},Object(ea.a)("topic",n)),{},{sub_type:"MetaCard"})},trackCardShow:!0,children:Object(a.b)("a",{href:"/topic/".concat(n),target:"_blank",rel:"noopener noreferrer","data-za-not-track-link":!0,onClick:this.trackReviewCardOpenUrl,children:this.renderTopReviewCard()})}))}}]),n}(p.PureComponent),sa=Object(B.a)(null)(ca),la=function(e){var t=Object(Zn.default)({},e),n=Object(Oe.b)(),r=Object(i.a)(n,2),o=r[0],c=r[1];return Object(p.useEffect)((function(){c()}),[]),o?Object(a.b)(sa,Object.assign({},t)):null},ua=Object.assign;var da=function(e){return b.a.createElement(Be.a,ua({viewBox:"0 0 24 24"},e),b.a.createElement("path",{d:"M17.248 6.5H13.11a.71.71 0 01-.657-.446.731.731 0 01.154-.787l2.812-3.045a2.395 2.395 0 012.926-.392c.95.558 1.527 1.767 1.243 2.844A2.431 2.431 0 0117.248 6.5zm-.114-3.357a.798.798 0 00-.572.24l-1.265 1.474h1.95c.447 0 .695-.44.695-.893a.815.815 0 00-.808-.821zM11.286 7.61v2.857H3.429a1.429 1.429 0 010-2.857h7.857zm1.428 0h7.857a1.429 1.429 0 010 2.857h-7.857V7.611zm-1.428 4.286V22.61H6.23c-.892 0-1.215-.093-1.541-.267a1.817 1.817 0 01-.756-.756c-.175-.326-.267-.65-.267-1.54V14.46c0-.892.092-1.215.267-1.541.174-.326.43-.582.756-.756.326-.174.649-.267 1.54-.267h5.056zm1.428 0h5.055c.892 0 1.215.093 1.541.267.326.174.582.43.756.756.175.326.267.65.267 1.54v5.587c0 .892-.092 1.215-.267 1.541-.174.326-.43.582-.756.756-.326.174-.649.267-1.54.267h-5.056V11.897zM6.752 6.5a2.431 2.431 0 01-2.341-1.826c-.284-1.077.293-2.286 1.243-2.844a2.395 2.395 0 012.926.392l2.812 3.045a.731.731 0 01.153.787.711.711 0 01-.656.446H6.752zm.686-3.117a.798.798 0 00-.976-.13c-.317.185-.585.637-.49.996a.81.81 0 00.78.608h1.951L7.438 3.383z"}))};function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var fa=function(e){Object(d.a)(n,e);var t=ha(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={remainedTime:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.totalCountdownTime,a=t.onFinish;"number"==typeof n?(this.setState({remainedTime:n}),this.timer=setInterval((function(){e.setState({remainedTime:e.state.remainedTime-5})}),5e3)):"function"==typeof a&&a()}},{key:"componentDidUpdate",value:function(){var e=this.props.onFinish;this.state.remainedTime<=0&&(clearInterval(this.timer),"function"==typeof e&&e())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderCountdownTime",value:function(){var e=this.state.remainedTime;if(e<60)return Object(a.c)(p.Fragment,{children:["距结束不足 ",Object(a.b)("span",{children:"1"})," 分钟"]});var t,n,r=(t=e,n=Math.floor(t/60),{hours:Math.floor(n/60),minutes:n%60}),i=r.hours,o=r.minutes;return 0===i?Object(a.c)(p.Fragment,{children:["距结束还有 ",Object(a.b)("span",{children:o})," 分钟"]}):Object(a.c)(p.Fragment,{children:["距结束还有 ",Object(a.b)("span",{children:i})," 小时"," ",o>0&&Object(a.c)(p.Fragment,{children:[Object(a.b)("span",{children:o})," 分钟"]})]})}},{key:"render",value:function(){var e=this.props.className;return null===this.state.remainedTime?Object(a.b)("div",{className:e,children:"距结束还有"}):Object(a.b)("div",{className:e,children:this.renderCountdownTime()})}}]),n}(p.Component);function pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}fa.propTypes={totalCountdownTime:v.a.number.isRequired,onFinish:v.a.func};var ba,ma=function(e){Object(d.a)(n,e);var t=pa(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={expanded:!1,bodyHeight:0},e.contentRef=Object(p.createRef)(),e.handleExpand=function(){var t=e.contentRef.current;e.setState({expanded:!0,bodyHeight:"".concat(t.offsetHeight+1,"px")}),oe.a.trackEvent(Object(it.a)(e),{id:5036,action:"Expand"})},e.handleCollapse=function(){e.setState({expanded:!1,bodyHeight:0}),oe.a.trackEvent(Object(it.a)(e),{id:5037,action:"Fold"})},e.handleClickHeader=function(){e.state.expanded?e.handleCollapse():e.handleExpand()},e.handleCountdownFinish=function(){var t=e.props;(0,t.removeBrandQuestionRedPacket)(t.questionId)},e}return Object(u.a)(n,[{key:"renderCountdown",value:function(){var e=this.props.redPacket,t=e.countDownType,n=e.countDownValue,r="".concat("CommercialAnswerRedPacket","-countdown");return 2===t?Object(a.b)(fa,{className:r,totalCountdownTime:n,onFinish:this.handleCountdownFinish}):Object(a.c)("div",{className:r,children:["还剩 ",Object(a.b)("span",{children:Object(Ee.cnNiceNumber)(n)}),"个红包"]})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.redPacket,r=n.title,i=n.image,o=n.iconText,c=n.content,s=this.state,l=s.expanded,u=s.bodyHeight;return Object(a.b)(A.a,{view:{id:5035},trackCardShow:!0,children:Object(a.c)("div",{className:pe()("CommercialAnswerRedPacket",t,Object(he.a)({},"".concat("CommercialAnswerRedPacket","--expanded"),l)),children:[Object(a.c)("div",{className:"".concat("CommercialAnswerRedPacket","-header"),role:"button",tabIndex:0,onClick:this.handleClickHeader,children:[Object(a.c)("div",{className:"".concat("CommercialAnswerRedPacket","-main"),children:[Object(a.c)("div",{className:"".concat("CommercialAnswerRedPacket","-subtitle"),children:[Object(a.c)("div",{className:"".concat("CommercialAnswerRedPacket","-badge"),children:[Object(a.b)("span",{children:Object(a.b)(da,{size:11})}),Object(a.b)("span",{children:o})]}),this.renderCountdown()]}),Object(a.b)("div",{className:"".concat("CommercialAnswerRedPacket","-title"),children:r})]}),Object(a.b)("div",{className:"".concat("CommercialAnswerRedPacket","-image"),children:Object(a.b)("img",{src:Object(Ne.imgUrl)(i,"xl"),alt:""})}),Object(a.b)("div",{className:"".concat("CommercialAnswerRedPacket","-icon"),children:l?Object(a.b)(ae.a,{size:20}):Object(a.b)(We.a,{size:20})})]}),Object(a.b)("div",{className:"".concat("CommercialAnswerRedPacket","-body"),style:{height:u},children:Object(a.b)("div",{ref:this.contentRef,className:"".concat("CommercialAnswerRedPacket","-content"),dangerouslySetInnerHTML:{__html:c}})})]})})}}]),n}(p.Component),va=Object(g.connect)(null,{removeBrandQuestionRedPacket:T.gb})(ma),ga=Object(B.a)(null)((function(e){var t,n,r,i=e.id,o=e.question,c=e.position,s=void 0===c?"top":c,l=function(e,t,n){var a=Object(g.useSelector)((function(t){var n,a;return null==t||null===(n=t.question)||void 0===n||null===(a=n.questionBanners)||void 0===a?void 0:a[e]})),r=Object(g.useDispatch)();return Object(p.useEffect)((function(){t&&r(Object(T.v)(e))}),[t,r,e]),null==a?void 0:a.filter((function(e){return e.position===n}))}(i,null==o?void 0:o.isBannered,s),u="normal"===o.questionType&&(null==l||null===(t=l[0])||void 0===t||null===(n=t.imagePc)||void 0===n?void 0:n[0]),d=null==l||null===(r=l[0])||void 0===r?void 0:r.verbPc;if(Object(p.useEffect)((function(){u&&oe.a.trackCardShow(null,{id:7707},{button:{text:d}})}),[u,d]),!u)return null;var h=l[0],f=h.targetLinkPc,b=h.entryVerbPc,m=h.imagePc[0].url;return f&&d&&b&&m?Object(a.b)(Re.Link,{className:"Card",css:Object.assign({display:"block",fontSize:0,marginBottom:16},"top"===s?{width:654,height:54,borderRadius:4}:{width:296,height:90,borderRadius:"2px 2px 0 0"}),href:f,onClick:function(e){oe.a.trackEvent(e.target,{id:7708,action:"OpenUrl"},{link:{url:f},button:{text:d}})},target:"_blank",children:Object(a.b)(Re.Image,{alt:b,src:m,css:{height:"100%",width:"100%",objectFit:"cover"}})}):null}));function Oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ja=function(e){Object(d.a)(n,e);var t=Oa(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!0,editShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1},e.getHandleInvite=function(t){t&&(e.handleInvite=t)},e.handleExpand=function(){e.setState({collapsed:!1}),oe.a.trackEvent(null,{id:6783,action:"Click"})},e.handleCollapse=function(){e.setState({collapsed:!0,shareMenuPositionStatus:"normal"})},e.handleEditShow=e.context.authRequired((function(){var t=(e.props.question.reviewInfo||{}).editTips;t?e.props.showNotification(t,"red"):e.setState({editShown:!0})})),e.handleEditClose=function(){e.setState({editShown:!1})},e.handleInvitationShow=function(){e.setState({invitationModalShown:!0})},e.handleInvitationHide=function(){e.setState({invitationModalShown:!1})},e.handleInvitationTipShow=function(){e.setState({invitationTipShown:!0})},e.handleInvitationTipClose=function(){e.setState({invitationTipShown:!1})},e.handleRedirectionCreatorShow=function(){e.setState({redirectionCreatorShown:!0})},e.handleRedirectionCreatorClose=function(){e.setState({redirectionCreatorShown:!1})},e.handleRedirectionCreated=function(t,n){var a=e.props,r=a.router,i=a.question.id,o=t.id;e.handleRedirectionCreatorClose(),n.then((function(){r.push("/question/".concat(o,"?rf=").concat(i))}))},e.handleDelete=function(){var t=e.props,n=t.question.id,a=t.isCommercialQuestion,r=t.deleteQuestion,i=t.deleteBrandQuestion;return a?i(n).then((function(){location.href="/"})):r(n).then((function(){location.href="/"}))},e.handleConfirmDelete=function(){e.handleDeleteModalClose(),e.handleDelete()},e.handleDeleteModalShow=function(){e.setState({deleteModalShown:!0})},e.handleDeleteModalClose=function(){e.setState({deleteModalShown:!1})},e.handlePositionStatusChange=function(t){e.setState({shareMenuPositionStatus:t})},e.handleUpdateQuestionLocked=function(){var t=e.props,n=t.question.id;(0,t.updateQuestionLocked)(n)},e.handleLockTipsShow=function(){return e.setState({lockTipsShown:!0})},e.handleLockTipsHide=function(){return e.setState({lockTipsShown:!1})},e.handleBrandQuestionPrizesToggle=function(){e.setState({brandQuestionPrizesExpanded:!e.state.brandQuestionPrizesExpanded})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.isAnswerPage,e.question.id),n=e.isCommercialQuestion,a=e.loadBrand,r=e.loadQuestionCommercialBanner,i=e.loadBrandQuestionRedPacket,o=e.loadBrandQuestionPermission,c=e.loadBrandQuestionOpenStatus,s=e.loadBrandQuestionAdvancedStyle,l=e.loadBrandQuestionPrize,u=this.context.currentUser;this.context.currentUser&&Object(ce.c)("question",t,ce.a),n&&(a(t),r(t),s(t),i(t).then((function(e){e&&e.payload||l(t)})),u&&"guest"!==u.userType&&(o(t),c(t)))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,a=t.isAnswerPage,r=e.question,i=r.id,o=r.relationship.isAnonymous,c=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),n===i&&a===c||this.setState({collapsed:!0,invitationTipShown:!1}),o||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,a=t.collapsed;if(n&&!a){var r=this.container.getBoundingClientRect().top;window.scrollTo(0,window.pageYOffset+r-document.documentElement.clientHeight)}}},{key:"hasExtraContentUnderAuthor",get:function(){var e=this.props,t=e.question,n=e.isCommercialQuestion,a=e.meta,r=t.relatedCards,o=void 0===r?[]:r,c=t.annotationDetail,s=t.redPacket,l=t.prize,u=Object(i.a)(a,1)[0];return c||o[0]||s||(null==l?void 0:l.status)||u&&!n}},{key:"renderEditModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditTopics,n=this.props,r=n.question,i=n.brand,o=r.id,c=r.title,s=r.editableDetail,l=r.topics,u=r.questionType,d=r.relationship.isAnonymous,h=this.state.editShown;return Object(a.b)(Ye.a,{id:o,title:c,detail:s,topics:l,questionType:u,isAnonymous:d,show:h,onClose:this.handleEditClose,brand:i,permitEditTopics:t})}},{key:"renderFooter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditQuestion,n=e.permitEditTopics,r=this.props,i=r.question,o=r.isCommercialQuestion,c=this.state.collapsed,s=this.context.currentUser,l=o&&!0;return Object(a.c)("div",{className:"QuestionHeader-footer",children:[Object(a.b)("div",{className:"QuestionHeader-footer-inner",children:Object(a.c)("div",{className:"QuestionHeader-main QuestionHeader-footer-main",children:[Object(a.b)(jt,{question:i}),l&&Object(a.b)(zn,{question:i}),Object(a.b)(Tn,{question:i,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite,editQuestionButton:t&&Object(a.b)($e,{onClick:this.handleEditShow,text:"修改问题"})}),Object(a.b)("div",{className:"QuestionHeader-actions",children:!c&&Object(a.c)(U.c,{preset:"plain",onClick:this.handleCollapse,children:["收起 ",Object(a.b)(ae.a,{center:!0})]})})]})}),s&&this.renderEditModal({permitEditTopics:n})]})}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return Object(a.c)(p.Fragment,{children:[Object(a.b)(ge,{className:"QuestionHeader-specialQuestionAuthor",author:e}),Object(a.b)("div",{className:"QuestionHeader-topicDivider"})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.question,o=t.isAnswerPage,c=t.isCommercialQuestion,s=t.isOrgQuestion,l=t.isAuthorCurrentUser,u=t.brand,d=t.publicEditPermission,h=t.meta,f=t.permission.canBrandAdminEdit,p=r.title,b=r.detail,m=r.topics,v=void 0===m?[]:m,g=r.author,j=r.showAuthor,y=r.showEncourageAuthor,w=r.excerpt,C=r.thumbnailInfo,k=r.isEditable,S=r.id,R=r.reviewInfo,E=r.relatedCards,N=void 0===E?[]:E,I=r.annotationDetail,T=r.redPacket,B=r.isVisible,x=r.relationship.isAuthor,Q=this.state,M=Q.collapsed,_=Q.invitationTipShown,D=Q.brandQuestionPrizesExpanded,P=Object(i.a)(h,1)[0],q=v.map((function(e){return{name:e.name,id:e.id}})),L=d||{},z=L.isQuestionEditable,U=L.isQuestionTopicEditable,F=Object(mt.e)(k,l,z)||f,H=Object(mt.e)(k,l,U)||f,V=this.renderFooter({permitEditQuestion:F,permitEditTopics:H});return Object(a.c)("div",{"data-zop-question":JSON.stringify({title:p,topics:q,id:S,isEditable:k}),children:[Object(a.b)(le.a,{children:Object(a.b)(Ft,{question:r,location:n,invitationTipShown:_,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:o})}),c&&(!M||!o)&&Object(a.b)(de.a,{type:r.type,id:r.id}),Object(a.b)(A.a,{module:"QuestionDescription",card:{content:{type:"Question",token:String(S)}},children:Object(a.c)("div",{children:[!1===B&&x&&Object(a.c)("div",{className:"QuestionReviewing",children:[Object(a.b)("div",{className:"QuestionReviewing-title",children:"内容审核中"}),Object(a.b)("div",{className:"QuestionReviewing-text",children:"内容将在审核通过后自动发布"})]}),Object(a.c)("div",{className:"QuestionHeader",ref:function(t){e.container=t},children:[Object(a.c)("div",{className:"QuestionHeader-content",children:[Object(a.c)("div",{className:"QuestionHeader-main",children:[Object(a.b)(ga,{id:S,question:r}),Object(a.c)("div",{className:"QuestionHeader-tags",children:[c&&Object(a.b)(Bn,{brand:u}),Object(a.c)("div",{className:"QuestionHeader-topics",children:[Boolean(j&&!(c&&null!=u&&u.name))&&this.renderSpecialQuestionAuthor(),v.map((function(e){return Object(a.b)(Ve,{item:e},e.id)}))]})]}),Object(a.c)("h1",{className:"QuestionHeader-title",children:[s&&ne()(ba||(ba=Object(ee.a)(["","提问："])),g.name),p]}),Boolean(!j&&!s&&!c&&y)&&Object(a.b)(ke,{question:r,isAuthorCurrentUser:l,hasExtraContent:this.hasExtraContentUnderAuthor}),Object(a.b)(ue.a,{item:r,annotationProps:I&&{annotationDetail:I}}),N[0]&&Object(a.b)(Wn,{target:N[0]}),T&&Object(a.b)(va,{questionId:S,redPacket:T}),Object(a.b)(Dn,{question:r,expanded:D,handleToggle:this.handleBrandQuestionPrizesToggle}),Object(a.c)(Oe.a,{children:[Object(a.b)(Le,{questionId:S,isInAnswerPage:o}),!c&&Object(a.b)(la,{meta:P,questionId:S})]}),Object(a.b)(at,{html:b,reviewInfo:R,excerpt:w,thumbnailInfo:C,collapsed:M,onExpand:this.handleExpand,onEdit:this.handleEditShow,isVisible:B,isAuthor:x})]}),Object(a.b)("div",{className:"QuestionHeader-side",children:Object(a.b)("div",{className:"QuestionHeader-follow-status",children:Object(a.b)(tn,{question:r})})})]}),M?V:Object(a.b)(re.a,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange,children:V}),s&&Object(a.b)(Kn,{question:r})]})]})}),Object(a.b)(se.a,{children:Object(a.c)("div",{className:"QuestionHeader-content",children:[Object(a.b)("div",{className:"QuestionHeader-main",children:Object(a.b)("h1",{className:"QuestionHeader-title",onClick:function(){Object(ie.scrollTo)(window,{top:0,behavior:"smooth"})},children:p})}),Object(a.b)(O.b,{block:"Toolbar",children:Object(a.b)(A.a,{module:"ToolBar",card:{content:{type:"Question",token:String(S)}},children:Object(a.b)("div",{className:"QuestionHeader-side",children:Object(a.b)(jt,{question:r,inTopBar:!0})})})})]})})]})}}]),n}(p.PureComponent);ja.contextTypes={authRequired:v.a.func,currentUser:v.a.object},ja.propTypes={question:v.a.object,location:v.a.object,isAnswerPage:v.a.bool};var ya=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n=e.question.brand,a=e.publicEditPermission,r=e.currentUser,i=t.question,o=i.questionType,c=i.author;return{brand:n,publicEditPermission:a,currentUserUrlToken:r,permission:Object(T.cb)(e),isCommercialQuestion:"commercial"===o,isOrgQuestion:"org"===o,isAuthorCurrentUser:Object(D.i)(e,c)}}),{loadBrand:T.I,updateQuestionLocked:T.rb,deleteQuestion:T.l,deleteBrandQuestion:T.i,showNotification:L.h,loadQuestionCommercialBanner:T.U,loadBrandQuestionRedPacket:T.O,loadBrandQuestionPermission:T.M,loadBrandQuestionOpenStatus:T.L,loadBrandQuestionAdvancedStyle:T.J,loadBrandQuestionPrize:T.N}))(ja),wa=n(1499),Ca=n(1488),Aa=n(1489);function ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}function Sa(e){var t=e.toString();return 1===t.length?"0".concat(t):t}var Ra=function(e){var t=Object(k.parseInputTime)(e);return t?"".concat(t.getFullYear(),"-").concat(Sa(t.getMonth()+1),"-").concat(Sa(t.getDate()),"T").concat(Sa(t.getHours()),":").concat(Sa(t.getMinutes()),":").concat(Sa(t.getSeconds())):""};function Ea(){var e=document.querySelector("#js-answerAddCard");e?e.scrollIntoView({block:"end"}):window.scrollTo(0,0)}var Na=function(e){Object(d.a)(n,e);var t=ka(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={anonymousConfirmShown:!1,answering:!1,hideIsMutedCover:!1,signFlowModalShown:!1},e.editableStatscReporter=Object(wa.c)("AnswerPage"),e.getPublicEditPermission=function(){var t=e.props,n=t.question,a=t.currentUserUrlToken,r=t.getPublicEditPermission,i=C()(n,"author.urlToken","");C()(n,"isEditable",!1)&&a&&i!==a&&r()},e.handleToggleAnonymous=function(){var t=e.props,n=t.showNotification,a=t.reward.question,r=void 0===a?{}:a,i=t.id;i&&r[i]&&r[i].isRewardable?n("已开启赞赏的回答无法设为匿名，请先关闭赞赏","red"):e.setState({anonymousConfirmShown:!e.state.anonymousConfirmShown})},e.startAddAnswer=function(){var t=e.props,n=t.params.answerId,a=t.location.query.group_id;n||a?(e.context.router.push("/question/".concat(e.props.id)),setTimeout(e.focusAddAnswer)):e.focusAddAnswer()},e.endAddAnswer=function(){e.setState({answering:!1})},e.focusAddAnswer=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ea(),e.setState({answering:Date.now()},(function(){t&&setTimeout(Ea)}))},e}return Object(u.a)(n,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,endAddAnswer:this.endAddAnswer}}},{key:"componentDidMount",value:function(){var e=this;Object(wa.d)();var t,n=this.props,a=n.question,r=n.answer,i=n.draft,o=n.currentUser,l=n.params,u=n.attachedArticleId,d=n.loadAttachedArticleToDraft;(!(t=null==r?void 0:r.updatedTime)||Date.now()-1e3*t>6e4)&&Object(_.loadScript)("https://zz.bdstatic.com/linksubmit/push.js",{crossOrigin:void 0}),function(){var t=Object(s.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="#draft"===location.hash||"#write"===location.hash,t.prev=1,!a){t.next=7;break}return t.next=5,e.fetchDraft();case 5:t.next=9;break;case 7:return t.next=9,e.fetchQuestionAndDraft();case 9:if(!e.props.params.answerId){t.next=11;break}return t.abrupt("return");case 11:if(!n||!u){t.next=14;break}return t.next=14,d(l.id,u);case 14:(i&&!i.schedule||!i&&n)&&e.focusAddAnswer(n),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(){return t.apply(this,arguments)}}()(),this.getPublicEditPermission(),o&&"guest"!==o.userType||this.setState({signFlowModalShown:!0})}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.fetchQuestionAndDraft()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()}},{key:"fetchQuestionAndDraft",value:function(){var e=this.props,t=e.id,n=e.loadQuestion;return Promise.all([n(t),this.fetchDraft()])}},{key:"fetchDraft",value:function(){var e,t=this.props.loadDraft;return this.context.currentUser&&(e=t(this.props.params.id)),this.setState({anonymousConfirmShown:!1}),e}},{key:"renderMeta",value:function(){var e=this.props.question,t=Object(mt.d)(e);return Object.keys(t).map((function(e){return Object(a.b)("meta",{itemProp:e,content:t[e]},e)}))}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,r=e.answer,o=e.params.answerId,c=e.ua;if(!/baiduspider/i.test(c.origin))return null;var s=Boolean(o),l=s?r:n;if(l){var u=s?[l.createdTime,l.updatedTime]:[l.created,l.updatedTime],d=Object(i.a)(u,2),h=d[0],f=d[1],p=Ra(h),b=Ra(f);return Object(a.b)("script",{type:"application/ld+json",children:'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'.concat(t.pathname,'",\n          "appid": "否",\n          "pubDate": "').concat(p,'",\n          "upDate": "').concat(b,'"\n        }')})}}},{key:"handleSignFlowModalClose",value:function(){this.setState({signFlowModalShown:!1})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.location,i=n.params,o=n.children,c=n.question,s=n.router.location.query,l=n.meta,u=n.answer,d=n.firstAnswer,h=n.displayType,f=Boolean(i.answerId);if(!c)return Object(a.b)("div",{});if("true"===s.answer_deleted_redirect)return Object(a.b)($,{id:c.id});var b=c.questionType,m=c.isMuted,v=c.title,g=c.relationship,j=g.isAuthor,w=g.myAnswer,C=c.visibleOnlyToAuthor;if(!f&&!j&&C||f&&null!=u&&u.visibleOnlyToAuthor&&(null==u||null===(e=u.relationship)||void 0===e||!e.isAuthor))return Object(a.b)(N,{});var k=this.state,S=k.anonymousConfirmShown,R=k.answering,E=k.hideIsMutedCover,I=k.signFlowModalShown,T=f?u:c;return Object(a.b)(O.b,{content:{type:"Question",token:String(null==c?void 0:c.id)},children:Object(a.b)(A.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(c.id)}},children:Object(a.b)(G,{isQAPage:!f,children:Object(a.c)("div",{className:"QuestionPage",itemScope:!0,itemProp:"mainEntity",itemType:"http://schema.org/Question",children:[T&&Object(a.b)(Q,{entity:T}),I&&Object(a.b)(z.b,{showQrcodeFirst:!0,titlePart:"spread"===h?Object(a.b)(Aa.a,{title:"登录知乎，问答干货一键收藏"}):Object(a.b)(Ca.a,{title:"登录知乎，问答干货一键收藏"}),maskClosable:!1,defaultType:"login",onClose:function(){t.handleSignFlowModalClose()}}),Object(a.b)(y.a,Object.assign({title:v},!f&&{meta:Object(M.c)(c,d)})),this.renderMeta(),this.renderJSONLD(),"commercial"===b&&m&&!E&&j&&Object(a.b)("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){t.setState({hideIsMutedCover:!0})}}),C&&j&&!f&&Object(a.b)("div",{className:"QuestionPage-visibleYourself",children:"仅自己可见"}),Object(a.b)(ya,{meta:l,question:c,location:r,onToggleAnonymous:this.handleToggleAnonymous,isAnswerPage:f}),Object(a.b)(wa.a.Provider,{value:this.editableStatscReporter,children:Object(p.cloneElement)(p.Children.only(o),{question:c,answering:R})}),Object(a.b)(W,{question:c,myAnswer:w,shown:S,onClose:this.handleToggleAnonymous})]})})})})}}]),n}(p.PureComponent);Na.fetchData=function(e){var t=e.dispatch,n=e.getState,a=e.params,r=a.id,i=a.answerId;return n().env.userAgent.isBot?Promise.all([t(Object(T.ab)(r,i)),t(Object(T.bb)(r)),t(Object(T.T)(r))]):t(Object(T.T)(r))},Na.contextTypes={router:v.a.object,currentUser:v.a.object,authRequired:v.a.func},Na.childContextTypes={toggleAnonymous:v.a.func,startAddAnswer:v.a.func,endAddAnswer:v.a.func};var Ia=Object(g.connect)((function(e,t){var n=t.params,a=n.id,r=n.answerId,i=t.location.query,o=e.question.meta,c=e.entities.drafts,s=void 0===c?{}:c,l=e.env,u=l.referer,d=l.userAgent,h=e.reward,f=void 0===h?{}:h,p=e.currentUser,b=Boolean(r),m="2"===Object(H.a)(e,"PC_login")?"spread":"normal";return Object.assign({id:a,meta:o[a]||[],question:Object(T.eb)(e,{id:a}),attachedArticleId:i.attach_to_article,reward:f,draft:s["question_".concat(a)],referer:u,ua:d,currentUserUrlToken:p,currentUser:Object(D.b)(e),displayType:m},b?{answer:Object(q.c)(e,{id:r})}:{firstAnswer:Object(q.j)(e,{id:a})})}),{loadQuestion:T.T,loadDraft:T.Q,loadAttachedArticleToDraft:T.F,updateQuestionAnonymous:T.pb,showNotification:L.h,getPublicEditPermission:P.b})(Na),Ta=n(379),Ba=n(1003),xa=n(945);var Qa=function(e){var t=e.className,n=e.type,r=n.icon,i=n.text,o=e.active,c=void 0!==o&&o,s=e.onClick;return Object(a.c)("div",{className:pe()("QuestionType",t,{"QuestionType--active":c}),role:"button",tabIndex:0,onClick:s,children:[Object(a.b)(r,{className:"QuestionType-icon",size:18}),i]})},Ma=n(560);var _a=Object(r.withRouter)(Object(g.connect)((function(e,t){var n=t.location.query.type;return{allWaitingQuestions:e.question.waitingQuestions,defaultType:Ma.b.find((function(e){return e.queryName===n}))||Ma.b[0]}}),{getWaitingQuestions:T.z,getWaitingInvitedQuestions:T.y,deleteWaitingQuestion:T.m,ignoreToolsQuestionInvite:T.B})((function(e){var t=e.allWaitingQuestions,n=e.defaultType,o=e.getWaitingQuestions,c=e.getWaitingInvitedQuestions,s=e.deleteWaitingQuestion,l=e.ignoreToolsQuestionInvite,u=Object(p.useRef)(null),d=Object(p.useState)(n.name),h=Object(i.a)(d,2),f=h[0],b=h[1],m=Object(p.useState)(Ma.b.reduce((function(e,t){var n=t.name;return Object.assign(Object.assign({},e),{},Object(he.a)({},n,0))}),{})),v=Object(i.a)(m,2),g=v[0],O=v[1],j=t[f].paging,w=function(){return c(null!=j&&j.next?j.next:"notifications/v3/timeline/entry/invite?invite_with_time_slice=1&limit=20&offset=0")},C=Object(p.useState)(new Set),A=Object(i.a)(C,2),k=A[0],S=A[1],R=t[f],E=R.isEnd,N=R.isLoading,I=R.questions.filter((function(e){var t=Object(Ma.a)(e,f).question,n=t.ignoreId,a=t.id;return!k.has(n||a)}));return Object(a.c)("div",{className:"QuestionWaiting",children:[Object(a.b)(y.a,{title:"等你来答"}),Object(a.c)(Xn.d,{className:"QuestionWaiting-mainColumn",children:[Object(a.b)(re.a,{offset:62,children:function(e){var n=e.isFixed;return Object(a.c)("div",{className:pe()("QuestionWaiting-typesContainer",{"QuestionWaiting-typesContainer--fixed":n}),children:[n&&Object(a.b)("div",{className:"QuestionWaiting-typesTopper"}),Object(a.b)("div",{className:pe()("QuestionWaiting-types",{"QuestionWaiting-types--fixed":n}),children:Ma.b.map((function(e){return Object(a.b)(r.Link,{to:e.queryName?"/question/waiting?type=".concat(e.queryName):"/question/waiting","data-za-detail-view-id":5362,"data-za-extra":JSON.stringify({button:{text:e.text}}),children:Object(a.b)(Qa,{className:"QuestionWaiting-type",type:e,active:e.name===f,onClick:function(){return function(e){O(Object.assign(Object.assign({},g),{},Object(he.a)({},f,window.pageYOffset)));var n=e.name,a=e.request,r=a.endpoint,i=a.query;t[e.name].questions.length||("invite"!==e?o({type:n,endpoint:r,query:i}):w()),b(n),window.scrollTo(0,g[n])}(e)}})},e.name)}))})]})}}),Object(a.b)(Ta.b,{ref:u,className:"QuestionWaiting-questions",onLoad:function(){"invite"===f?w():o({type:f,endpoint:n.request.endpoint,query:n.request.query,offset:I.length})},isLoading:N,placeholder:Object(a.b)(Ta.a,{className:"QuestionWaiting-placeholder"}),isDrained:E,children:I.map((function(e){var t,n=Object(Ma.a)(e,f),r=n.question,i=n.headerInfo,o=n.extraFooter,c=n.showTime,d=n.button,h=n.titleLink,p=n.zaContent;return Object(a.b)(xa.a,{className:"QuestionWaiting-questionItem",question:r,headerInfo:i,extraFooterInfo:o,showTime:c,enableIgnore:!0,handleIgnoreQuestion:(t=r.ignoreId||r.id,function(){S(new Set(k).add(t)),"invite"===f?l(t):s(t),u.current.maybeRun()}),button:d,titleLink:h,zaContent:p,zaId:{titleClick:5364,expand:5365,cardShow:5363,writeAnswer:5367,ignoreQuestion:5366}},e.id)}))})]}),Object(a.b)(Ba.a,{omit:{noBanner:!0,noCategory:!0}})]})}))),Da=n(21),Pa=function(e){return b.a.createElement(Da.a,e,b.a.createElement("path",{d:"M12.004 4.15a7.85 7.85 0 1 1-5.772 13.17.85.85 0 0 1 1.25-1.153 6.15 6.15 0 1 0-1.559-5.087l1.208.343a.542.542 0 0 1 .112.996l-2.597 1.42a.542.542 0 0 1-.732-.21l-1.44-2.561a.542.542 0 0 1 .62-.787l1.182.334a7.852 7.852 0 0 1 7.728-6.465zm-.178 3.792c.385 0 .7.31.7.69l-.003 3.495 2.564 1.693c.315.207.425.671.185.977-.24.305-.69.33-.99.126 0 0-2.53-1.663-2.844-1.9-.315-.236-.315-.551-.315-.551l.003-3.84c0-.38.315-.69.7-.69z",fillRule:"evenodd"}))};Pa.defaultProps={name:"Later"};var qa=Pa,La=n(796),za=n(247),Ua=n.n(za);var Fa=function(e){var t=e.className,n=e.titleClassName,r=e.sourceClassName,o=e.hideButtonClassName,c=e.question,s=c.id,l=c.title,u=c.detail,d=c.excerpt,h=c.isDeleted,f=e.mainSource,b=e.subSource,m=e.mainTool,v=e.subTool,g=e.zaId,O=void 0===g?{}:g,j=e.onMouseEnter,y=void 0===j?Ua.a:j,w=e.onMouseLeave,C=void 0===w?Ua.a:w,k=e.onExpand,S=void 0===k?Ua.a:k,R=e.onCollapse,E=void 0===R?Ua.a:R,N="https://www.zhihu.com/question/".concat(s),I=Object(p.useState)(!0),T=Object(i.a)(I,2),B=T[0],x=T[1],Q=Object(p.useCallback)((function(e){x(!0),E(e),oe.a.trackEvent(e.target,{id:O.collapse,action:"Collapse"})}),[x,E,O]),M=Object(p.useCallback)((function(e){x(!1),S(e),oe.a.trackEvent(e.target,{id:O.expand,action:"Expand"})}),[x,S,O]);return h?Object(a.c)("div",{className:pe()("ListQuestionItem","ListQuestionItem--deleted",t),children:[Object(a.b)("div",{className:"ListQuestionItem-hint",children:"该问题已被删除"}),Object(a.b)("div",{className:"ListQuestionItem-mainTool",children:m})]}):Object(a.b)(A.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(s)}},trackCardShow:Boolean(O.cardShow),view:{id:O.cardShow},children:Object(a.c)("div",{className:pe()("ListQuestionItem",t),onMouseEnter:y,onMouseLeave:C,children:[(f||b)&&Object(a.c)("div",{className:pe()("ListQuestionItem-source",r),children:[f&&Object(a.b)("div",{className:"ListQuestionItem-mainSource",children:f}),b&&Object(a.b)("div",{className:"ListQuestionItem-subSource",children:b})]}),Object(a.b)("a",{className:pe()("ListQuestionItem-title",n,{"ListQuestionItem-title--noDetail":!u}),href:N,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":O.titleClick,children:l}),u&&Object(a.b)(at,{className:"ListQuestionItem-RichText",html:u,reviewInfo:{},excerpt:d,collapsed:B,onExpand:M,editable:!1}),Object(a.c)("div",{className:"ListQuestionItem-tool",children:[Object(a.c)("div",{className:"ListQuestionItem-mainTool",children:[Object(a.b)(ut.a,{className:"ListQuestionItem-writeAnswerButton",color:"blue",icon:Ze.a,label:"写回答",href:"".concat(N,"#write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){oe.a.trackEvent(e.target,{id:O.writeAnswer,action:"Answer"})}}),m]}),(v||!v&&!B)&&Object(a.c)("div",{className:"ListQuestionItem-subTool",children:[v,!B&&Object(a.c)("div",{className:pe()("ListQuestionItem-hideButton",o),role:"button",tabIndex:0,onClick:Q,children:["收起",Object(a.b)(ae.a,{className:"ToolsQuestionItem-hideButtonIcon",center:!0})]})]})]})]})})},Ha=n(2194),Va=n.n(Ha);function Ya(e){var t=e.laterQuestions,n=e.getLaterQuestions,o=e.updateLaterQuestion,c=Object(p.useRef)(null),s=Object(p.useState)(new Set),l=Object(i.a)(s,2),u=l[0],d=l[1],h=t.count,f=t.isEnd,b=t.isLoading,m=t.questions.filter((function(e){return!u.has(e.id)}));return Object(a.c)("div",{className:"QuestionLater",children:[Object(a.c)(Xn.d,{className:"QuestionLater-mainColumn",children:[Object(a.c)("div",{className:"QuestionLater-title",children:[Object(a.b)(qa,{className:"QuestionLater-titleIcon",size:30}),"我的稍后答",Boolean(h)&&Object(a.b)("div",{className:"QuestionLater-titleNumber",children:h})]}),!b&&0===m.length&&Object(a.c)("div",{className:"QuestionLater-empty",children:[Object(a.b)("img",{className:"QuestionLater-emptyImage",src:Va.a,alt:""}),Object(a.c)("div",{className:"QuestionLater-emptyText",children:["还没有稍后答，",Object(a.b)(r.Link,{className:"QuestionLater-emptyLink",to:"/question/waiting",children:"看看为你推荐的问题"})]})]}),Object(a.b)(Ta.b,{ref:c,className:"QuestionLater-questions",onLoad:function(){return n(20,m.length)},isLoading:b,placeholder:Object(a.b)(Ta.a,{className:"QuestionLater-placeholder"}),isDrained:f,children:m.map((function(e){return Object(a.b)(Fa,{className:"QuestionLater-questionItem",question:e,zaId:{titleClick:5372,expand:5373,cardShow:5375,writeAnswer:5374},mainTool:Object(a.c)(p.Fragment,{children:[Object(a.c)(U.c,{className:pe()("QuestionLater-deletingButton"),preset:"outline",color:"grey",onClick:function(t){d(new Set(u).add(e.id)),o(e.id,!1),c.current.maybeRun(),oe.a.trackEvent(t.target,{id:5376,action:"Delete"})},children:[Object(a.b)(La.a,{size:22}),"移除"]}),!e.isDeleted&&Object(a.c)("div",{className:"QuestionLater-info",children:[Object(Ee.formatNumber)(e.answerCount)," 个回答"," · ",Object(Ee.formatNumber)(e.visitCount)," 个浏览"]})]})},e.id)}))})]}),Object(a.b)(Ba.a,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}Ya.fetchData=function(e){return(0,e.dispatch)(Object(T.u)())};var Wa=Object(g.connect)((function(e){return{laterQuestions:e.question.laterQuestions}}),{getLaterQuestions:T.t,updateLaterQuestion:T.nb})(Ya),Ga=n(2577);var Ja=function(e){var t=e.users,n=void 0===t?[]:t;return 0===n.length?null:1===n.length?Object(a.b)(qt.a,{user:n[0]}):2===n.length?Object(a.c)(p.Fragment,{children:[Object(a.b)(qt.a,{user:n[0]})," 和 ",Object(a.b)(qt.a,{user:n[1]})]}):3===n.length?Object(a.c)(p.Fragment,{children:[Object(a.b)(qt.a,{user:n[0]}),"、",Object(a.b)(qt.a,{user:n[1]})," 和"," ",Object(a.b)(qt.a,{user:n[2]})]}):n.length>3?Object(a.c)(p.Fragment,{children:[Object(a.b)(qt.a,{user:n[0]}),"、",Object(a.b)(qt.a,{user:n[1]})," 和"," ",Object(a.b)(qt.a,{user:n[2]})," 等 ",n.length," 人"]}):null};var Ka=function(e){var t=e.user,n=t.isFollowed,r=t.isFollowing,i=t.gender,o=null;return n&&r?o="互相关注":r&&(o="你关注了".concat(function(e){return 0===e?"她":1===e?"他":"TA"}(i))),o?Object(a.b)("div",{className:"RelationLabel",children:o}):null},Za=n(369),Xa=Za.a[0];function $a(e){var t=e.allInvitedQuestions,n=e.getInvitedQuestions,r=e.ignoreInvitedQuestion,o=e.updateLaterQuestion,c=Object(p.useRef)(null),s=Object(p.useState)(Xa),l=Object(i.a)(s,2),u=l[0],d=l[1],h=Object(p.useState)(new Set),f=Object(i.a)(h,2),b=f[0],m=f[1],v=Object(p.useState)(new Set),g=Object(i.a)(v,2),O=g[0],j=g[1],y=Object(p.useState)(Za.a.reduce((function(e,t){var n=t.name;return Object.assign(Object.assign({},e),{},Object(he.a)({},n,0))}),{})),w=Object(i.a)(y,2),C=w[0],A=w[1],k=t[u.name],S=k.isEnd,R=k.isLoading,E=k.questions.filter((function(e){var t=e.question;return!b.has(t.id)}));return Object(a.c)("div",{className:"QuestionInvited",children:[Object(a.c)(Xn.d,{className:"QuestionInvited-mainColumn",children:[Object(a.c)("div",{className:"QuestionInvited-title",children:["邀请回答",Boolean(t.total.count)&&Object(a.b)("div",{className:"QuestionInvited-titleNumber",children:t.total.count-C.total})]}),Object(a.b)("div",{className:"QuestionInvited-tabs",children:Za.a.map((function(e){return Object(a.c)("div",{className:pe()("QuestionInvited-tab",{"QuestionInvited-tab--active":e.name===u.name}),role:"button",tabIndex:0,onClick:function(){return function(e){t[e.name].questions.length||n(e,20,0),oe.a.trackEvent(null,{id:5377},{button:{text:e.text}}),d(e)}(e)},children:[Object(a.b)("div",{className:"QuestionInvited-tabTitle",children:e.text}),Object(a.b)("div",{className:"QuestionInvited-tabMeta",children:t[e.name].count-C[e.name]})]},e.name)}))}),Object(a.b)(Ta.b,{ref:c,className:"QuestionInvited-questions",onLoad:function(){return n(u,20,E.length)},isLoading:R,placeholder:Object(a.b)(Ta.a,{className:"QuestionInvited-placeholder"}),isDrained:S,children:E.map((function(e){var t=e.inviters,n=e.question;return Object(a.b)(Fa,{className:"QuestionInvited-questionItem",question:n,zaId:{titleClick:5378,expand:5379,cardShow:5380,writeAnswer:5381},mainSource:Object(a.c)("div",{className:"QuestionInvited-questionItemMainSource",children:[Object(a.b)(Ja,{users:t})," 邀请你回答"]}),subSource:1===t.length&&Object(a.b)(Ka,{user:t[0]}),mainTool:Object(a.c)(p.Fragment,{children:[Object(a.c)(U.c,{className:pe()("QuestionInvited-deletingButton"),preset:"outline",color:"grey",onClick:function(e){m(new Set(b).add(n.id)),A(Object.assign(Object.assign({},C),{},Object(he.a)({total:C.total+1},u.name,C[u.name]+1))),r(n.id),c.current.maybeRun(),oe.a.trackEvent(e.target,{id:5382,action:"Ignore"})},children:[Object(a.b)(Ga.a,{size:18}),"忽略"]}),Object(a.c)(U.c,{className:pe()("QuestionInvited-laterButton",{"QuestionInvited-laterButton--active":O.has(n.id)}),preset:"outline",color:"grey",onClick:function(e){var t=!O.has(n.id),a=new Set(O);t?a.add(n.id):a.delete(n.id),j(a),o(n.id,t),oe.a.trackEvent(e.target,{id:5383,action:t?"Add":"UnAdd"})},children:[O.has(n.id)?null:Object(a.b)(qa,{}),O.has(n.id)?"已添加":"稍后答"]}),Object(a.c)("div",{className:"QuestionInvited-info",children:[Object(Ee.formatNumber)(n.answerCount)," 个回答"," · ",Object(Ee.formatNumber)(n.visitCount)," 个浏览"]})]})},n.id)}))})]}),Object(a.b)(Ba.a,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}$a.fetchData=function(e){return(0,e.dispatch)(Object(T.s)())};var er=Object(g.connect)((function(e){return{allInvitedQuestions:e.question.invitedQuestions}}),{getInvitedQuestions:T.r,ignoreInvitedQuestion:T.A,updateLaterQuestion:T.nb})($a),tr=n(137),nr=n(811),ar=n(831),rr=n(73),ir=n(461),or=n(2082),cr=n(2083),sr=n(419),lr=n(75),ur=n(56);var dr=n(2622),hr=n(2621),fr=n(850);function pr(e){if(!Object(ir.a)(e))return"";var t="";return Object(or.a)(e)?t+="今天":Object(cr.a)(e)?t+="昨天":t+=Object(sr.a)(e,"yyyy/MM/dd"),0!==function(e){Object(ur.a)(1,arguments);var t=Object(lr.a)(e),n=t.getSeconds();return n}(e)?t+=" "+Object(sr.a)(e,"HH:mm:ss"):0!==Object(dr.a)(e)?t+=" "+Object(sr.a)(e,"HH:mm"):0!==Object(hr.a)(e)&&(t+=" "+Object(hr.a)(e)+"点"),t}var br=function(e){var t=e.event,n=e.status,r=t.isOnline,i=t.events;if(!r&&0===n)return null;var o=Object(tr.f)(),c=o.colors,s=c.GBL05A,l=c.GBK09A,u=c.GBK99A,d=c.GBL01A,h=o.fontWeights;return Object(a.b)(Re.Box,{pt:"16px",css:Object.assign(Object.assign({},Object(tr.c)({borderTop:"1px solid ".concat(l)})),{},{"&::after":{content:"''",display:"block",position:"absolute",width:"2px",height:"calc(100% - 30px - 52px)",backgroundColor:s,opacity:.12,left:"24px",top:"30px"}}),children:i.map((function(e,t){var r=e.content,i=e.created,o=e.url,c=0===t;return 1===n&&t>2?null:Object(a.c)(fr.b,{zaBlock:"EventItem",target:"_blank","data-za-detail-view-id":6621,href:o,pl:"40px",css:{paddingLeft:"40px",paddingRight:"16px",position:"relative",display:"block",paddingBottom:"16px","&::after":Object.assign({content:"''",zIndex:1,display:"block",position:"absolute",left:"25px",top:"0.5em",transform:"translateX(-50%)",boxShadow:"0px 0px 0px 2px ".concat(u),borderRadius:"50%",width:"6px",height:"6px",background:s},c&&{background:d,border:"2px solid ".concat(u),boxShadow:"0 0 0 1px ".concat(d)})},children:[Object(a.b)(Re.Text,{css:Object.assign({color:s},c&&{color:d,fontWeight:h.bold}),children:pr(1e3*i)}),Object(a.c)(Re.Flex,{flexDirection:"row",alignItems:"center",mt:"6px",color:"GBK02A",css:Object.assign({},c&&{fontWeight:h.bold}),children:[Object(a.b)(Re.Text,{flex:"0 1 auto",css:Object(tr.d)(1),children:r}),Object(a.b)(ar.a,{text:!0,css:{color:s,flex:"0 0 auto"}})]})]},i+o)}))})},mr=function(e){var t=e.slice(0,2).map((function(e){return e.content})).join("、");return t.length<=16?t:e[0]&&e[0].content},vr=function(e){var t=e.event,n=e.status,r=e.onClick,i=t.url,o=!i,c=null,s=We.a,l=6623;return 0===n?c="显示全部":1==n?(c=o?"展开全部进展":"查看全部进展",l=o?6623:6622,s=o?We.a:ar.a):2==n&&(c="收起",s=ae.a),Object(a.c)(Te.a,{zaAction:i?"OpenUrl":null,zaBlock:"ViewAll","data-za-detail-view-id":l,target:"_blank",flex:"0 0 auto",ml:"8px",color:"GBL05A",css:{display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer"},onClick:function(e){i||(e.preventDefault(),r(!1))},href:i,children:[c,Object(a.b)(s,{})]})},gr=function(e){var t=e.event,n=e.status,r=e.onChangeStatus,i=t.isOnline,o=t.url,c=t.events;if(i&&c.length<=3&&!o)return null;var s=Object(p.useRef)(),l=Object(rr.c)((function(){0===n||1===n?r(2):2===n&&r(i?1:0),setTimeout((function(){var e;return null===(e=s.current)||void 0===e?void 0:e.check()}))}));return Object(a.b)(re.a,{ref:s,bottom:!0,children:Object(a.c)(Re.Flex,{flexDirection:"row",alignItems:"center",justifyContent:i||2===n?"flex-end":"flex-start",bg:"GBK99B",pl:"20px",pr:"13px",height:"48px",css:function(e){return Object(tr.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)})},children:[!i&&2!==n&&Object(a.c)(Re.Text,{children:[mr(c),"等 ",c.length," 个事件进展"]}),Object(a.b)(vr,{event:t,status:n,onClick:l})]})})},Or=function(e){var t=e.event,n=t.isOnline,r=t.url,o=Object(p.useState)((function(){return r||n?1:0})),c=Object(i.a)(o,2),s=c[0],l=c[1];return Object(a.c)(a.a,{children:[Object(a.b)(br,{event:t,status:s}),Object(a.b)(gr,{event:t,status:s,onChangeStatus:l})]})},jr={special_event:"事件讨论",timeline_event:"最新进展"};var yr=function(e){var t,n=e.question;if(null===(t=n.event)||void 0===t||!t.events)return null;var r=Object(tr.f)().colors,i=r.GBK09A,o=r.GBL01A,c=n.event,s=n.id,l=c.url,u=c.type,d=c.title,h=c.isOnline,f=function(e){var t=e.match(/special\/(\d+)/);return t&&t[1]}(l);return Object(a.b)(O.b,{block:"SpecialTimeline",content:{type:"SpecialTopic",token:f},children:Object(a.b)(A.a,{trackCardShow:!0,module:"Content",content:{type:"SpecialTopic",token:f,parent_token:String(s)},extra:{button:{text:h?"online":"offline"}},view:{id:6620},children:Object(a.c)(O.e,{as:Xn.d,zaType:"Card",css:{fontSize:15},children:[Object(a.c)(Re.Flex,{flexDirection:"row",alignItems:"center",pl:"18px",height:"48px",css:Object(tr.c)({borderTop:"1px solid ".concat(i)}),children:[Object(a.b)(nr.a,{css:{color:o},size:20}),Object(a.c)(Re.Text,{fontWeight:"bold",ml:"10px",children:[jr[u]," · ",d]})]}),Object(a.b)(Or,{event:c})]})})})},wr=n(872),Cr=n(1135),Ar=n(114),kr=n.n(Ar),Sr=n(36),Rr=n.n(Sr),Er=n(888),Nr=n.n(Er),Ir=n(915),Tr=n(993),Br=n(1545),xr=n(887),Qr=n(951),Mr=function(e){function t(){var e,n;wt()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Et()(this,(e=It()(t)).call.apply(e,[this].concat(r)))).state={display:!1},n.handleCloseByDocument=function(e){e.target.closest("div")&&"Pc-word-card-sign-label"!==e.target.closest("div").className&&n.setState({display:!1})},n.handleClick=function(){n.setState((function(e){return{display:!e.display}}));var e=n.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,a=e.top,r=e.width,i=e.height+15,o=Math.floor(r/2);n.sign.querySelector(".Pc-word-card-sign-popup").style.top="".concat(a+i,"px"),n.sign.querySelector(".Pc-word-card-sign-popup").style.left="".concat(t-o,"px")},n.handleClose=function(){n.props.onClose&&n.props.onClose()},n.handleRef=function(e){n.sign=e},n}return St()(t,e),At()(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return b.a.createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},b.a.createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",b.a.createElement(Qr.a,{name:"triangle",className:"Pc-word-card-sign-svg"})),b.a.createElement("div",{className:"Pc-word-card-sign-popup ".concat(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},b.a.createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),b.a.createElement("div",{className:"Pc-word-card-sign-popup-menu"},b.a.createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),b.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(p.Component);Mr.propTypes={onClose:v.a.func};var _r=function(e){function t(){var e,n;wt()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Et()(this,(e=It()(t)).call.apply(e,[this].concat(r)))).state={display:!0},n.handleClick=function(e){e.stopPropagation();var t=Object(Tr.a)(n.props).ad.clickTracks;Object(xr.a)(t)},n.handleClose=function(){var e=Object(Tr.a)(n.props).ad.closeTracks;Object(xr.b)(e).then((function(){n.setState((function(e){return{display:!e.display}})),n.props.onClose&&n.props.onClose()}))},n.handleRef=function(e){n.root=e},n}return St()(t,e),At()(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=Object(Tr.a)(this.props).ad,t=e.impressionTracks,n=e.debugTracks,a={impressionTracks:t,viewTracks:e.viewTracks,debugTracks:n};Object(xr.f)(this.root,a),Object(xr.c)(n,!!this.props.data.adjson)}}},{key:"render",value:function(){if(!this.state.display)return null;var e=Object(Tr.a)(this.props),t=e.ad,n=e.creative,a=t.expand.displayAdvertisingTag,r=n.asset,i=r.title,o=r.desc,c=r.cta,s=r.landingUrl,l=r.brandName,u=r.brandLogo;return b.a.createElement("div",{className:"Pc-word",ref:this.handleRef},b.a.createElement("div",{className:"Pc-word-card"},b.a.createElement(Dr,{href:s,onClick:this.handleClick},b.a.createElement(Pr,{data:{name:l,logo:u}})),a&&b.a.createElement(Mr,{onClose:this.handleClose}),b.a.createElement(Dr,{href:s,onClick:this.handleClick},b.a.createElement("h2",{className:"Pc-word-card-title"},i),b.a.createElement("div",{className:"Pc-word-card-content  "},o&&b.a.createElement(b.a.Fragment,null,b.a.createElement("span",null,o),b.a.createElement("span",{className:"Pc-word-card-content-cta  "},c))))))}}]),t}(p.Component);function Dr(e){var t=e.children,n=Nr()(e,["children"]);return b.a.createElement("a",Rr()({target:"_blank"},n),t)}function Pr(e){var t=e.data,n=t.name,a=t.logo;return b.a.createElement("div",{className:"Pc-word-card-brand"},b.a.createElement("div",{className:"Pc-word-card-brand-wrapper"},b.a.createElement("img",{width:"20",height:"20",src:a,alt:"logo"}),b.a.createElement("span",null,n)))}function qr(e){var t=Object(Br.a)(e.data);return t&&t.adjson?b.a.createElement(Ir.a,null,b.a.createElement(_r,Rr()({},e,t))):null}_r.propTypes={data:v.a.object.isRequired,onClose:v.a.func};var Lr=n(843),zr=n(943),Ur=n(5),Fr=["item"];var Hr={isDrained:!1,isFetching:!1,ids:[]};function Vr(e,t){var n=t.id,a=t.resource;return e.question[a][n]||Hr}var Yr=function(e){var t=e.item,n=Object(Se.default)(e,Fr);return Object(a.b)(Lr.a,{children:Object(a.b)(zr.a,Object.assign({editable:!0,expanded:!0,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n))},t.id)},Wr=function(e,t,n){var a=t.relationship,r=a.canCollapseAnswers,i=a.canStickAnswers,o=t.hasPublishingDraft,c=e.map((function(e,t){return Yr({item:e,canCollapse:r,canStick:i,hasPublishingDraft:o,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})}));return n?c:Object(le.b)(2,c)},Gr=function(e,t){return e.map((function(e){return t[e]})).filter((function(e){return e&&!e.isDelete}))},Jr=Object(Dt.isBrowser)()?kr()(Gr,(function(e,t){return"".concat(e.join(","),"-").concat(t.length)})):Gr;function Kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Zr=function(e){Object(d.a)(n,e);var t=Kr(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.isFetching,a=t.id,r=t.loadNotificationAnswers;n||r(a)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,a=e.items,r=e.router;a.length||r.replace(location.pathname),(t||a.length)&&Object(T.S)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,r=t.answerCount,i=e.question,o=e.items,c=e.isFetching,s=e.isDrained;return Object(a.c)("div",{className:"QuestionAnswers-answers",children:[Object(a.b)(Xn.d,{children:Object(a.c)(Cr.a,{to:"/question/".concat(n),children:["查看全部 ",Object(Ee.formatNumber)(r)," 条回答"]})}),Object(a.c)(Xn.d,{children:[Object(a.c)(wr.b,{children:[Wr(o,i),c&&Object(a.b)(Ta.a,{className:"List-item"})]}),!s&&!c&&Object(a.b)(Cr.a,{onClick:this.load,children:"更多"})]}),Object(a.b)(Xn.d,{children:Object(a.c)(Cr.a,{to:"/question/".concat(n),children:["查看全部 ",Object(Ee.formatNumber)(r)," 条回答"]})})]})}}]),n}(p.PureComponent),Xr=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n=Vr(e,{id:t.id,resource:"notificationAnswers"}),a=n.isFetching,r=n.isDrained,i=n.ids;return{isFetching:a,isDrained:r,items:Jr(i,e.entities.answers)}}),{loadNotificationAnswers:T.S}))(Zr),$r=n(861),ei=n(185),ti=n(904);function ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ai=[{text:"默认排序",value:"default"},{text:"".concat("按","时间排序"),value:"updated"}],ri={updatedAnswers:"updated",answers:"default"};var ii=function(e){Object(d.a)(n,e);var t=ni(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleResourceChange=function(t){e.props.router.push("/question/".concat(e.props.question.id).concat("default"===t?"":"/answers/".concat(t)))},e}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,a=t.questionType,r=e.permission.canBrandAdminEdit,i=e.loadBrandQuestionAnswerCount;"commercial"===a&&r&&i(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.id,i=n.answerCount,o=n.questionType,c=n.brand,s=(c=void 0===c?{}:c).isPuQuestion,l=e.commonAnswerCount,u=e.hiddenAnswerCount,d=e.permission.canBrandAdminEdit,h=s?"":"，由品牌推荐";return"commercial"===o&&void 0!==s?d?Object(a.c)("div",{className:"QuestionAnswers-navs",children:[Object(a.c)(U.c,{preset:"plain",className:pe()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/".concat(r)},children:[Object(Ee.formatNumber)(l)," 个回答",h]}),Object(a.c)(U.c,{preset:"plain",className:pe()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/".concat(r,"/answers/hidden")},children:[Object(Ee.formatNumber)(u)," 个隐藏回答"]})]}):Object(a.c)("span",{children:[Object(Ee.formatNumber)(i)," 个回答 ",h]}):Object(a.c)("span",{children:[Object(Ee.formatNumber)(i)," 个回答"]})}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.children;return Object(a.b)(Xn.d,{className:"AnswersNavWrapper",children:Object(a.b)(ti.a,Object.assign(Object.assign({title:this.renderAnswerListHeader()},{options:"hiddenAnswers"===t?Object(a.b)("span",{children:"按时间排序"}):Object(a.b)(ei.b,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:ri[t],onChange:this.handleResourceChange,children:ai.map((function(e){var t=e.value,n=e.text;return Object(a.b)(ei.a,{value:t,text:n},t)}))})}),{},{children:n}))})}}]),n}(p.PureComponent),oi=Object(I.compose)(r.withRouter,Object(g.connect)((function(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:Object(T.cb)(e)}}),{loadBrandQuestionAnswerCount:T.K}))(ii),ci=n(999),si=n(12);function li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ui=function(e){Object(d.a)(n,e);var t=li(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handlePaginationClick=function(t){e.props.router.push("".concat(location.pathname,"?page=").concat(t))},e.handleUpdatedAnswersLoad=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si.b,a=e.props,r=a.question.id,i=a.loadItems;i(r,"updatedAnswers",{offset:t,limit:n})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,a=e.isDrained,r=e.items,i=e.loadItems;!a&&r.length<si.b&&i(t,"updatedAnswers",{offset:Object(Ur.c)(n)+r.length,limit:si.b-r.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,i=e.isCurrentLoaded,o=e.page,c=e.items,s=e.total,l=e.question,u=e.isMuteSpecial;return n&&!c.length?Object(a.b)(Xn.d,{className:"Answers-none",children:Object(a.c)($r.k,{children:[Object(a.b)($r.b,{}),Object(a.b)("div",{children:u?"回答暂时无法查看":"还没有回答"})]})}):Object(a.b)(ci.a,{isFetching:t,isDrained:o>=s?n:i,isNextLoaded:r,page:o,total:s,placeholder:Object(a.b)(Ta.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleUpdatedAnswersLoad,children:Wr(c,l)})}}]),n}(p.PureComponent),di=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n=t.page,a=Vr(e,{id:t.question.id,resource:"updatedAnswers"}),r=a.isFetching,i=a.isDrained,o=a.ids,c=Object(Ur.d)(n,o),s=c.total,l=c.isCurrentLoaded,u=c.isNextLoaded,d=c.items;return{isMuteSpecial:Object(T.E)(t.question),isFetching:r,isDrained:i,total:s,isNextLoaded:u,isCurrentLoaded:l,items:Jr(d,e.entities.answers).filter((function(e){return!e.isDelete}))}}),{loadItems:T.R}))(ui),hi=n(2195),fi=n.n(hi),pi=n(604),bi=n.n(pi),mi=n(1086),vi=n(1312),gi=n(1318),Oi=n(859),ji=n(1328),yi=n(1110),wi=function(){var e=Object(p.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(p.useState)("login"),c=Object(i.a)(o,2),s=c[0],l=c[1],u=Object(p.useState)(""),d=Object(i.a)(u,2),h=d[0],f=d[1],b=Object(p.useState)(""),m=Object(i.a)(b,2),v=m[0],g=m[1];return Object(a.c)("div",{className:"blockTypeLogin",children:[Object(a.c)("div",{className:"left",children:[Object(a.c)("div",{className:"headImg",children:[Object(a.b)(yi.a,{css:{width:"59px",height:"70px"}}),Object(a.b)("div",{className:"imgTips",children:"登录查看余下内容"})]}),"login"===s?Object(a.b)("div",{children:Object(a.b)(vi.a,{showSwitchTypeIcon:!1,isInSignPage:!1,selectClassName:"blockLogin"})}):Object(a.c)("div",{children:[Object(a.b)(Oi.a.Provider,{value:{selectClassName:"blockLogin"},children:Object(a.b)(gi.a,{socialType:v,defaultFullname:h,onResetRegister:function(){l("login"),f(""),g("")}})}),Object(a.b)("div",{className:"SignContainer-tip",children:Object(a.b)("div",{children:Object(a.c)("div",{children:["未注册手机验证后自动登录，注册即代表同意",Object(a.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms",children:"《知乎协议》"}),Object(a.b)("a",{href:"https://www.zhihu.com/term/privacy",children:"《隐私保护指引》"})]})})})]}),Object(a.b)("div",{className:"switchLoginMode",onClick:function(){r((function(e){return!e}))},children:n?"关闭其他方式":"其他方式登录"})]}),Object(a.b)("div",{className:"right",children:Object(a.c)("div",{className:"otherLoginMode",style:{opacity:n?1:0},children:[Object(a.b)(mi.a,{showSwitchTypeIcon:!1,className:"smallVersion",isBlockType:!0}),Object(a.b)(ji.a,{onRegister:function(e){var t=e.fullname,n=e.socialType;l("register"),f(t),g(n)}})]})})]})},Ci=function(){return Object(a.b)(O.e,{zaType:"Block",zaBlock:"blockingTypeLoginModal",zaText:"阻断式登录弹层",children:Object(a.b)("div",{css:{position:"absolute",zIndex:3,borderTop:"1px solid #e7eaf1",left:0,width:"100%",marginTop:-254,height:294,backgroundColor:"rgba(255, 255, 255, 0.95)"},children:Object(a.b)(wi,{})})})};function Ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ki=function(e){Object(d.a)(n,e);var t=Ai(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showBlockModal:!1},e.handleLoad=function(){var t,n=e.state.showBlockModal,a=e.props,r=a.question.id,i=a.loadItems,o=a.isFetching,c=a.isDrained,s=a.items,l=a.resource,u=void 0===l?"answers":l,d=Number(null===(t=e.props.modalShowCondition)||void 0===t?void 0:t.insertIndex)||10;if(!c&&!o){if(s.length>=+d&&n)return;i(r,u,{limit:5})}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.question.id,a=t.isDrained,r=t.items,i=t.loadItems,o=t.getShowConditions,c=t.getActiveDays;if(t.hasBlockLogin){var s=Ce.a.get("blockShow"),l=(new Date).getTime();(!s||fi.a.duration((new Date).getTime()-s).asDays()>30)&&Promise.all([o(),c()]).then((function(t){var n,a,r,i,o=null===(n=t[0].payload)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.activeDays;+(null===(r=t[1].payload)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.num)>=+o&&(e.setState({showBlockModal:!0}),Ce.a.set("blockShow",l))}))}!a&&r.length<5&&i(n,"answers",{offset:r.length,limit:5})}},{key:"render",value:function(){var e,t=this,n=this.state.showBlockModal,r=this.props,i=r.adverts,o=r.isBot,c=r.isFetching,s=r.isDrained,l=r.items,u=r.question,d=Number(null===(e=this.props.modalShowCondition)||void 0===e?void 0:e.insertIndex)||10,h=n?l.slice(0,d):l,f=u.relationship,p=f.canCollapseAnswers,b=f.canStickAnswers,m=u.hasPublishingDraft,v=[0].concat(Object(Yt.a)(Object.keys(i||{}).map(Number).sort((function(e,t){return e-t})))),g=n?v.filter((function(e){return e<d})):v,O={canCollapse:p,canStick:b,hasPublishingDraft:m};return Object(a.c)("div",{children:[Object(a.b)(Ta.b,{onRef:function(e){t.listEl=e},isLocal:!0,isLoading:c,isDrained:s,onLoad:this.handleLoad,placeholder:Object(a.b)(Ta.a,{className:"List-item"}),children:o?h.map((function(e,t){return Yr(Object.assign({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},O))})):Object(le.b)(2,bi()(g.map((function(e,t){var r,o=g[t+1],c=(o?h.slice(e,o):h.slice(e)).map((function(r,i){var o=e+i+t;return o===d&&n?Object(a.b)("div",{style:{height:254,overflow:"hidden"},children:Yr(Object.assign({item:r,itemProp:0===o?"acceptedAnswer":"suggestedAnswer",dataZaIndex:o},O))}):Yr(Object.assign({item:r,itemProp:0===o?"acceptedAnswer":"suggestedAnswer",dataZaIndex:o},O))}));return o?[].concat(Object(Yt.a)(c),[(r=i[o],r?Object(a.b)(qr,{data:r}):null)]):c}))))}),h.length>d-1&&n&&Object(a.b)(Ci,{})]})}}]),n}(p.Component),Si=Object(I.compose)(Object(g.connect)((function(e,t){var n=Vr(e,{id:t.question.id,resource:"answers"}),a=n.isFetching,r=n.isDrained,i=n.ids,o=r||a?i:i.slice(0,Math.max(5,i.length-5)),c=Object(D.b)(e);return{isBot:e.env.userAgent.isBot,isFetching:a,hasBlockLogin:!("1"!==Object(H.a)(e,"PC_blockLogin")||Object(H.d)(e)||c&&"guest"!==c.userType),modalShowCondition:e.question.modalShowCondition,isDrained:r,items:Jr(o,e.entities.answers).filter((function(e){return e&&!e.isDelete})),adverts:Object(T.c)(e)}}),{loadItems:T.R,getShowConditions:T.x,getActiveDays:T.p}))(ki);function Ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Ei=function(e){Object(d.a)(n,e);var t=Ri(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handlePaginationClick=function(t){e.props.router.push("".concat(location.pathname,"?page=").concat(t))},e.handleHiddenAnswersLoad=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si.b,a=e.props,r=a.question.id,i=a.loadItems;i(r,"hiddenAnswers",{offset:t,limit:n})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,a=e.isDrained,r=e.items,i=e.loadItems;!a&&r.length<si.b&&i(t,"hiddenAnswers",{offset:Object(Ur.c)(n)+r.length,limit:si.b-r.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,i=e.isCurrentLoaded,o=e.page,c=e.items,s=e.total,l=e.question;return Object(a.b)(ci.a,{isFetching:t,isDrained:o>=s?n:i,isNextLoaded:r,page:o,total:s,placeholder:Object(a.b)(Ta.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleHiddenAnswersLoad,children:Wr(c,l)})}}]),n}(p.PureComponent),Ni=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n=t.page,a=Vr(e,{id:t.question.id,resource:"hiddenAnswers"}),r=a.isFetching,i=a.isDrained,o=a.ids,c=Object(Ur.d)(n,o,si.b);return Object.assign(Object.assign({isFetching:r,isDrained:i},c),{},{items:Jr(c.items,e.entities.answers).filter((function(e){return!e.isDelete}))})}),{loadItems:T.R}))(Ei);function Ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Ti=function(e){Object(d.a)(n,e);var t=Ii(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,a=t.relationship.isAuthor,r=e.resource,i=e.router;"collapsedAnswers"!==r||a||i.push("/question/".concat(n))}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,r=e.question,i=r.questionType,o=r.answerCount,c=r.reviewInfo.tips,s=r.isVisible,l=e.location;if(e.isMuteSpecial||!s)return Object(a.b)(Xn.d,{className:"Answers-none",children:Object(a.c)($r.k,{children:[Object(a.b)($r.b,{}),Object(a.b)("div",{children:"回答暂时无法查看"})]})});if("commercial"!==i&&!o){if(c)return null;var u=n.status||{},d=u.isClose,h=u.isLocked,f=u.isSuggest;return d||h||f?null:Object(a.b)(Xn.d,{className:"Answers-none",children:Object(a.c)($r.k,{children:[Object(a.b)($r.b,{}),Object(a.c)("div",{children:["暂时还没有回答，开始",Object(a.b)(ft,{preset:"plain",className:"QuestionAnswers-answerLink",children:"写第一个回答"})]})]})})}return Object(a.b)("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1",children:Object(a.c)(oi,{question:n,resource:t,children:["updatedAnswers"===t&&Object(a.b)(di,{question:n,page:Number(l.query.page)||1}),"answers"===t&&Object(a.b)(Si,{question:n}),"hiddenAnswers"===t&&Object(a.b)(Ni,{question:n,page:Number(l.query.page)||1})]})})}}]),n}(p.PureComponent),Bi=Object(I.compose)(Object(A.b)({module:"ContentList"}),r.withRouter,Object(g.connect)((function(e,t){return{isMuteSpecial:Object(T.E)(t.question)}})))(Ti),xi=n(1479),Qi=n(830),Mi=n(1e3),_i=n(1665),Di=n(1700),Pi=n(1664),qi=n(1706);function Li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var zi=function(e){Object(d.a)(n,e);var t=Li(n);function n(){var e,a;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=t.call.apply(t,[this].concat(i))).state={topicBiosModalShown:!1,activeTabKey:"video_answer"===(null===(e=a.props.draft)||void 0===e?void 0:e.draftType)?_i.a.videoAnswer:_i.a.textAnswer,showAttention:!1},a.answerFormRef=Object(p.createRef)(),a.videoAnswerTabRef=Object(p.createRef)(),a.handleSubmit=function(e){var t=a.props,n=t.currentUser,r=t.question.id,i=t.addAnswer,o=t.scheduledPublish,c=t.validateScheduledPublish,s=t.loadDraft;if(e.publishAt){var l=o(r,e);return l.then((function(){a.context.endAddAnswer(),s(r)})),l}var u=function(){return i(r,e)};return n.autoSendingCreations?c(r).then(u,(function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return ot.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(u,(function(){}))})):u()},a.focus=function(){a.answerFormRef.current.focus()},a.handleToggleAnonymous=function(){var e=a.context.toggleAnonymous,t=a.props,n=t.showNotification,r=t.question.relationship.isAnonymous,i=t.isOffice;if(r||!a.answerFormRef.current.hasVideo()){if(r||!a.answerFormRef.current.hasMCNLinkCard())return!r&&a.answerFormRef.current.hasADLinkCard()?a.answerFormRef.current.hasFeeConsultCard()?n("不能使用匿名身份插入付费咨询卡片","red"):void n("不能使用匿名身份插入推荐卡片","red"):void(!r&&a.answerFormRef.current.hasCommercialReport()&&i?n("已经进行商业声明的内容不能启用匿名","red"):e());n("不能使用匿名身份推荐商品","red")}else n("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red")},a.handleTopicBiosModalShown=function(){return a.setState({topicBiosModalShown:!0})},a.handleTopicBiosModalHide=function(){return a.setState({topicBiosModalShown:!1})},a.handleTabChange=function(e){var t=a.state,n=t.activeTabKey,r=t.showAttention;if(e!==n){var i=a.props,o=i.question.relationship.isAnonymous,c=i.showNotification;if(e===_i.a.videoAnswer){if(r&&a.setState({showAttention:!1}),o)return void c("视频回答不支持匿名","red");a.answerFormRef.current.hasEditorContent()&&(Ce.a.get("answerContentSync")||(c("图文回答内容已同步至视频描述"),Ce.a.set("answerContentSync",!0)))}a.setState({activeTabKey:e})}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.question.id;(0,t.getBio)(n),this.props.answering&&setTimeout(this.focus),Ce.a.get("videoAnswerGuided")||this.state.activeTabKey===_i.a.videoAnswer||(this.setState({showAttention:!0}),this.animateTimerId=setTimeout((function(){e.setState({showAttention:!1}),Ce.a.set("videoAnswerGuided",!0)}),5e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.animateTimerId)}},{key:"componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"renderBio",value:function(){var e=this.props,t=e.currentUser,n=e.questionBio;return n.bio&&"headline"!==n.type?Object(a.b)("span",{className:"AnswerAdd-bio",children:n.bio}):t.headline?Object(a.b)(Pt.a,{className:"AnswerAdd-bio",inline:!0,html:(n||{}).bio||t.headline}):null}},{key:"renderAuthor",value:function(){var e=this.props,t=e.currentUser,n=e.question.relationship.isAnonymous,r=e.question;return n?Object(a.b)(Ae.a,{className:"AnswerAdd-info",noLink:!0,author:sn.h}):t&&t.isOrg?Object(a.b)(Ae.a,{className:"AnswerAdd-info",noLink:!0,author:t}):Object(a.c)(Ae.a,{className:"AnswerAdd-info",noLink:!0,author:t,children:[this.renderBio(),Object(a.b)(Mi.a,{className:"AnswerAdd-topicBiosButton",text:"编辑话题经验",onClick:this.handleTopicBiosModalShown}),Object(a.b)(qi.a,{shown:this.state.topicBiosModalShown,question:r,onClose:this.handleTopicBiosModalHide})]})}},{key:"render",value:function(){var e,t=this.state,n=t.activeTabKey,r=t.showAttention,i=this.props.question;return Object(a.c)("div",{className:"AnswerAdd",css:{position:"relative"},children:[Object(a.c)(Re.Flex,{justifyContent:"space-between",css:function(e){return{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}}},children:[Object(a.b)(_i.b,{ref:this.videoAnswerTabRef,activeTabKey:n,onChange:this.handleTabChange}),Object(a.b)(Pi.a,{handleClick:null===(e=this.answerFormRef.current)||void 0===e?void 0:e.toggleFullscreen})]}),Object(a.b)(je.a,{placement:"bottom",isOpen:r,target:this.videoAnswerTabRef.current,children:"Web 也可以发布视频回答了"}),Object(a.b)(Di.a,{activeTabKey:n,handleTabChange:this.handleTabChange,handleToggleAnonymous:this.handleToggleAnonymous,imperativeRef:this.answerFormRef,question:i,onSubmit:this.handleSubmit})]})}}]),n}(p.Component);zi.contextTypes={toggleAnonymous:v.a.func.isRequired,endAddAnswer:v.a.func};var Ui=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n=e.question.bio,a=e.topic.bios,r=e.answers.newAnswer,i=e.entities.drafts,o=void 0===i?{}:i,c=t.question.id,s=(n[c]||{result:{type:"headline"}}).result;return"topic"===s.type&&(s.bio=a[s.topic.id]||s.bio),{currentUser:Object(D.b)(e),questionBio:s,newAnswer:r,allowCommercialAnonymousAnswer:"show"===Object(H.a)(e,"gue_anonymous"),isOffice:Object(H.e)(e),draft:o["question_".concat(c)]}}),{showNotification:L.h,addAnswer:q.a,scheduledPublish:q.B,validateScheduledPublish:q.M,loadDraft:T.Q,getBio:T.q}))(zi);function Fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Hi=function(e){Object(d.a)(n,e);var t=Fi(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,a=n.id,r=n.relationship.myAnswer,i=void 0===r?{}:r,o=t.router,c=e.question,s=c.id,l=c.relationship.myAnswer,u=void 0===l?{}:l;a===s&&i.answerId!==u.answerId&&(oe.a.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),o.push("/question/".concat(a,"/answer/").concat(u.answerId)),Ce.a.set("answer::justPublished",!0))}},{key:"render",value:function(){if(!this.context.currentUser)return null;var e=this.props,t=e.question,n=e.question,r=n.relationship.myAnswer,i=n.isNormal,o=n.status,c=(o=void 0===o?{}:o).isClose,s=o.isLocked,l=o.isSuggest,u=n.hasPublishingDraft,d=e.answering;return r?null:l?Object(a.c)("div",{className:"QuestionAnswers-answerTip",children:["被建议修改的问题不允许添加新的回答。",Object(a.b)(ut.a,{preset:"plain",to:"/question/21290061",children:"问题为什么会被建议修改？"})]}):s?Object(a.c)("div",{className:"QuestionAnswers-answerTip",children:["该问题目前已经被锁定，无法添加新答案。",Object(a.b)(ut.a,{preset:"plain",to:"/question/19604313",children:"问题为什么会被锁定？"})]}):c?Object(a.c)("div",{className:"QuestionAnswers-answerTip",children:["被关闭的问题不允许添加新的回答。",Object(a.b)(ut.a,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？",icon:Qi.a})]}):u?Object(a.b)(Xn.d,{className:"QuestionAnswers-answerTipCard",children:"你创建的回答正在发布中…"}):i?Object(a.b)(xi.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div",children:d&&Object(a.c)(Xn.d,{className:"QuestionAnswers-answerAdd",id:"js-answerAddCard",children:[Object(a.b)("a",{name:"draft"}),Object(a.b)(Ui,{question:t,answering:d})]})}):null}}]),n}(p.PureComponent);Hi.contextTypes={currentUser:v.a.object};var Vi=Object(r.withRouter)(Hi),Yi=["className","children"];function Wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Gi=function(e){Object(d.a)(n,e);var t=Wi(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=Object(Se.default)(e,Yi);return Object(a.b)("div",Object.assign(Object.assign({},r),{},{className:pe()("QuestionMainDivider",t),children:Object(a.b)("span",{className:"QuestionMainDivider-inner",children:n})}))}}]),n}(p.Component);function Ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Ki=function(e){Object(d.a)(n,e);var t=Ji(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={opened:!1},e.handleLoad=function(){var t=e.props,n=t.question.id;return(0,t.loadItems)(n,"collapsedAnswers")},e.handleOpen=function(){e.handleLoad(),e.setState({opened:!0})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.items,i=e.question,o=e.question,c=o.collapsedAnswerCount,s=o.questionType,l=this.state.opened,u="org"===s,d="".concat(Object(Ee.formatNumber)(c)," 个回答被").concat(u?"隐藏":"折叠"),h=Object(a.b)(ut.a,{preset:"plain",to:u?"/org-intro#org-question":"/question/20120168",target:"_blank",children:"为什么？"});return l?Object(a.c)(Xn.d,{children:[Object(a.c)(Gi,{children:[d,"（",h,"）"]}),Object(a.c)(wr.b,{children:[Wr(r,i),n&&Object(a.b)(Ta.a,{className:"List-item"})]}),!t&&!n&&Object(a.b)(Cr.a,{onClick:this.handleLoad,children:"更多"})]}):Object(a.c)("div",{className:"CollapsedAnswers-bar",style:{},children:[Object(a.b)(U.c,{preset:"plain",onClick:this.handleOpen,children:d}),"（",h,"）"]})}}]),n}(p.Component);Ki.contextTypes={currentUser:v.a.object};var Zi=Object(g.connect)((function(e,t){var n=Vr(e,{id:t.question.id,resource:"collapsedAnswers"}),a=n.isFetching,r=n.isDrained,i=n.ids;return{isFetching:a,isDrained:r,items:Jr(i,e.entities.answers)}}),{loadItems:T.R})(Ki),Xi=n(1011),$i=n(1015),eo=n(977),to=n(952),no=n(124);function ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ro=function(e){Object(d.a)(n,e);var t=ao(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,r=e.answerCount,i=e.followerCount,o="/question/".concat(t);return Object(a.c)("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(a.b)("meta",{itemProp:"name",content:n}),Object(a.b)("meta",{itemProp:"url",content:"https://www.zhihu.com".concat(o)}),Object(a.b)("meta",{itemProp:"answerCount",content:r}),Object(a.b)("meta",{itemProp:"zhihu:followerCount",content:i}),Object(a.b)(ut.a,{preset:"plain",to:o,target:"_blank",children:n})," ",Object(Ee.formatNumber)(r)," 个回答"]})}}]),n}(p.Component),io=Object(A.b)((function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}}))(ro);function oo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var co=function(e){Object(d.a)(n,e);var t=oo(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.loadSimilarQuestions)(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,a=t.loadSimilarQuestions,r=e.question.id;n!==r&&a(r)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(a.c)(Xn.d,{css:{borderRadius:"0 0 2px 2px"},role:"complementary","aria-label":"相关问题",children:[Object(a.b)(Xn.b,{className:"SimilarQuestions-title",children:"相关问题"}),Object(a.b)(Xn.c,{className:"SimilarQuestions-list",children:e.map((function(e){return Object(a.b)(io,{question:e},e.id)}))})]}):null}}]),n}(p.Component),so=Object(I.compose)(Object(g.connect)((function(e,t){return{items:e.question.similarQuestions[t.question.id]}}),{loadSimilarQuestions:T.bb}),Object(A.b)({module:"RelatedQuestions"}))(co),lo=n(7),uo=n(1458);function ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var fo=function(e){Object(d.a)(n,e);var t=ho(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={hideDescription:!1},e.handleRef=function(t){e.title=t},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,r=e.description,i=e.meta,o=e.imageUrl,c=this.state.hideDescription;return Object(a.c)(ut.a,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank",children:[Object(a.b)("img",{className:"RelatedCommodities-image",src:Object(Ne.imgUrl)(o,{quality:90,size:"250x0"}),alt:"live"}),Object(a.c)("div",{className:"RelatedCommodities-content",children:[Object(a.b)("div",{className:pe()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":c}),style:{},ref:this.handleRef,"data-tooltip":n,children:n}),c||Object(a.b)("div",{className:"RelatedCommodities-description",children:r}),Object(a.b)("div",{className:"RelatedCommodities-meta",children:i})]})]})}}]),n}(p.Component),po=n(1320);function bo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var mo=function(e){Object(d.a)(n,e);var t=bo(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleListen=function(e){var t="".concat(e.target.closest("a").href,"?extra_auto_play=1");e.preventDefault(),e.stopPropagation(),oe.a.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,r=e.reviewScore,i=e.seats,o=(e.startsAt,e.speaker.member),c=o.name,s=o.avatarUrl;return Object(a.b)(fo,{link:"/lives/".concat(t),imageUrl:s,title:n,description:c,meta:Object(a.c)("div",{className:"RelatedCommodities-scoreWrapper",children:[Object(a.b)(po.a,{score:r}),Boolean(i&&i.taken)&&"".concat(i.taken," 人参与"),!1]})});case"remix_album":case"podcast":case"remix":var l=e.id,u=e.artwork,d=e.title,h=e.author,f=(h=void 0===h?{}:h).user,p=e.trackCount,b="/remix/albums/".concat(l);return Object(a.b)(fo,{link:b,imageUrl:u,title:d,description:f&&f.name,meta:Object(a.c)("div",{className:"RelatedCommodities-remixMeta",children:[Object(a.c)("div",{children:["共 ",Object(Ee.formatNumber)(p)," 节课"]}),Object(a.b)(U.c,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain",children:"试听"})]})});case"special":var m=e.id,v=e.subject,g=e.liveCount,O=e.liveMemberCount,j=e.speakers,y=e.artworkMobile,w=j.slice(0,2).map((function(e){return e.member.name})).join("、");return Object(a.b)(fo,{link:"/lives/specials/".concat(m),imageUrl:y,title:v,description:"".concat(w).concat(j.length>=2?" 等":""),meta:"".concat(Object(Ee.formatNumber)(g)," 场 Live, ").concat(Object(Ee.formatNumber)(O)," 次参与")});case"book":var C=e.id,A=e.title,k=e.cover,S=e.authorName,R=e.readCount;return Object(a.b)(fo,{link:"/pub/book/".concat(C),imageUrl:k,title:A,description:S,meta:Object(a.c)("div",{className:"RelatedCommodities-bookMeta",children:["".concat(Object(Ee.formatNumber)(R)," 人读过"),Object(a.c)("span",{className:"RelatedCommodities-bookRead",children:[Object(a.b)(uo.a,{width:13,height:14,center:!0}),"阅读"]})]})});default:return null}}}]),n}(p.Component),vo=Object(A.b)((function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var a="special"===t.type?"LiveAlbum":Object(lo.pascalize)(t.type);return{module:"".concat(a,"Item"),index:n,content:Object.assign({type:a,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}}))(mo);function go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Oo=function(e){Object(d.a)(n,e);var t=go(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,a=t.loadRelatedCommodities,r=e.question.id;n!==r&&a(r)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(a.c)(Xn.d,{children:[Object(a.b)(Xn.b,{className:"RelatedCommodities-title",children:"相关推荐"}),Object(a.b)(Xn.c,{className:"RelatedCommodities-list",children:e.slice(0,3).map((function(e){return Object(a.b)(vo,{item:e},e.id)}))})]}):null}}]),n}(p.Component),jo=Object(I.compose)(Object(g.connect)((function(e,t){var n=e.question.relatedCommodities[t.question.id];return{attachedInfo:(n||[]).attachedInfo,items:n}}),{loadRelatedCommodities:T.ab}),Object(A.b)((function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:"相关推荐"}})))(Oo),yo=n(1673),wo=n(1051);function Co(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Ao=function(e){Object(d.a)(n,e);var t=Co(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).goToBrand=function(){var t=e.props.brand.target;t&&(location.href="/org/".concat(t.urlToken))},e}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,a=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&a(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,r=t.name,i=t.target,o=t.isPuQuestion,c=e.brandMember,s=this.context.currentUser,l=o?"关于大咖":"关于品牌";return Object(a.c)(Xn.d,{className:pe()({MobileBrandQuestionAuthor:!1}),children:[Object(a.b)(Xn.b,{className:"BrandQuestionAuthor-header",children:Object(a.b)("span",{className:"BrandQuestionAuthor-headerText",children:l})}),Object(a.c)(Xn.c,{className:pe()("BrandQuestionAuthor",i&&"is-clickable"),onClick:this.goToBrand,children:[Object(a.b)("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),Object(a.c)("div",{className:"BrandQuestionAuthor-content",children:[Object(a.c)("div",{className:"BrandQuestionAuthor-name",children:[r,i&&i.urlToken&&Object(a.b)(me.c,{css:{marginLeft:3},badge:i.badge})]}),i&&i.headline&&Object(a.b)("div",{className:"BrandQuestionAuthor-intro",children:i.headline})]})]}),c&&c.id&&s&&s.id!==c.id&&Object(a.b)(wo.a,{className:"BrandQuestionAuthor-buttons",user:c})]})}}]),n}(p.Component);Ao.contextTypes={currentUser:v.a.object};var ko=Object(g.connect)((function(e){var t=e.entities,n=e.question.brand,a={};return n&&n.target&&n.target.urlToken&&(a=t.users[n.target.urlToken]||{}),{brand:n,brandMember:a}}),{loadBrand:T.I,loadProfile:no.h})(Ao);function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}function Ro(e){var t=e.text,n=e.from,r=e.score;return Object(a.c)("span",{children:[n||t,r&&Object(a.b)("strong",{children:r})]})}var Eo=function(e){Object(d.a)(n,e);var t=So(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"renderCardImage",value:function(){var e=this.props.meta,t=e.avatar,n=e.title;return t?Object(a.b)($n.a,{className:pe()("QuestionSidebarTopicMeta-cardImage"),src:t,alt:n}):null}},{key:"renderGoodsCard",value:function(){var e=this.props.meta.title;return Object(a.c)("div",{className:"QuestionSidebarTopicMeta-cardMain QuestionSidebarTopicMeta-goods",children:[this.renderCardImage(),Object(a.b)("div",{className:"QuestionSidebarTopicMeta-cardContent",children:Object(a.b)("h3",{className:"QuestionSidebarTopicMeta-cardTitle",children:e})})]})}},{key:"renderGeneralCard",value:function(){var e=this.props.meta,t=e.title,n=e.description1,r=e.description2,i=function(e){var t=e.scores,n=void 0===t?[]:t,a=e.tags,r=void 0===a?[]:a;return n.length>0?n:r.length>0?r:[]}(e),o=i.length?i.map((function(e,t){return Object(a.b)(Ro,Object.assign({},e),t)})):r;return Object(a.c)("div",{className:"QuestionSidebarTopicMeta-cardMain",children:[this.renderCardImage(),Object(a.c)("div",{className:"QuestionSidebarTopicMeta-cardContent",children:[Object(a.b)("h3",{className:"QuestionSidebarTopicMeta-cardTitle",children:t}),n&&Object(a.b)("div",{className:"QuestionSidebarTopicMeta-cardDesc",children:n}),o&&Object(a.b)("div",{className:"QuestionSidebarTopicMeta-cardScore",children:o})]})]})}},{key:"renderCard",value:function(){return"n_goods"===this.props.meta.category?this.renderGoodsCard():this.renderGeneralCard()}},{key:"renderModule",value:function(){var e=this.props,t=e.meta,n=e.excerpt,r=e.metaCardDisplay,i=t.summary||n;return Object(a.c)(Xn.d,{children:[this.renderCard(),"normal"===r&&Object(a.c)("div",{className:"QuestionSidebarTopicMeta-cardMore",children:[i&&Object(a.b)("div",{className:"QuestionSidebarTopicMeta-cardMoreInner",dangerouslySetInnerHTML:{__html:i}}),Object(a.c)("div",{className:"QuestionSidebarTopicMeta-cardLink",children:["查看更多",Object(a.b)(ar.a,{center:!0})]})]})]})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.meta,r=e.metaCardDisplay;if(!n||"none"===r)return null;var i=n.category;return Object(a.b)(A.a,{module:"TopicItem",moduleName:i,card:{content:Object.assign(Object.assign({type:"Topic"},Object(ea.a)("topic",t)),{},{sub_type:"MetaCard"})},trackCardShow:!0,children:Object(a.b)("a",{href:"/topic/".concat(t),target:"_blank",rel:"noopener noreferrer",children:this.renderModule()})})}}]),n}(p.PureComponent);function No(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}Eo.propTypes={id:v.a.string.isRequired,excerpt:v.a.string,meta:v.a.shape({category:v.a.string,avatar:v.a.string,title:v.a.string,description1:v.a.string,description2:v.a.string,summary:v.a.string,scores:v.a.arrayOf(v.a.shape({url:v.a.string,score:v.a.string,from:v.a.string})),tags:v.a.arrayOf(v.a.shape({text:v.a.string}))}).isRequired,metaCardDisplay:v.a.oneOf(["normal","none"])};var Io=function(e){Object(d.a)(n,e);var t=No(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id,n=e.items,a=e.loadQuestionMetaTopics;n||a(t)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.questionId;if(!t||!t.length)return null;var r=t.filter((function(e){return e&&e.meta}));if(!r||r.length<1)return null;var i=r[0],o=i.vote,c=i.isVote,s="normal";return o&&c&&(s="none"),Object(a.b)("div",{className:"QuestionSidebarTopicMeta",children:Object(a.b)(Eo,Object.assign(Object.assign({metaCardDisplay:s},i),{},{questionId:n}))})}}]),n}(p.Component),To=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n=t.params;return{questionId:n.id,items:Object(T.db)(e,{id:n.id})}}),{loadQuestionMetaTopics:T.X}),Object(B.a)(null))(Io),Bo=n(257),xo=Object(I.compose)(Object(B.a)(null),Object(Bo.b)(),Object(g.connect)(null,{getReadingMembership:T.w}))((function(e){var t=e.getReadingMembership,n=e.isLogin,r=Object(p.useState)(!1),o=Object(i.a)(r,2),c=o[0],s=o[1],l=Object(p.useState)(!1),u=Object(i.a)(l,2),d=u[0],h=u[1];Object(p.useEffect)((function(){n&&t().then((function(e){var t=e.payload;h(t.isHaveRight)})).catch((function(){}))}),[t,n]);var f=function(){s(!c)};return d&&Object(a.c)(a.a,{children:[Object(a.c)(Xn.d,{className:"ReadingMembership",onClick:f,children:[Object(a.c)("div",{className:"ReadingMembership-banner",children:[Object(a.b)("div",{children:"领取读书会会员体验卡"}),Object(a.c)("div",{children:["海量电子书免费读 ",Object(a.b)(ar.a,{size:22})]})]}),Object(a.b)("img",{src:"https://pic3.zhimg.com/80/v2-ba02e89d92407e3e2491a27af5ace660_hd.jpeg",alt:""})]}),Object(a.b)(Ht.b,{className:"ReadingMembership-modal",onClose:f,children:c&&Object(a.c)("div",{className:"ReadingMembership-content",children:[Object(a.b)("img",{src:"https://pic2.zhimg.com/80/v2-8f8b9ff43e407c160bfc2d6352c662b6_hd.jpeg",alt:""}),Object(a.c)("div",{className:"ReadingMembership-title",children:[Object(a.b)("div",{children:"登录知乎 App 领取"}),Object(a.b)("div",{children:"读书会会员 7 天体验卡"})]}),Object(a.c)("div",{className:"ReadingMembership-qrcode",children:[Object(a.b)("div",{children:"知乎读书会会员，海量电子书免费读"}),Object(a.b)("img",{src:"https://pic2.zhimg.com/80/v2-e3a03af184c11dc3526218de74977fd5_hd.png",alt:"知乎二维码"}),Object(a.b)("div",{children:"扫码下载知乎 App"})]})]})})]})}));function Qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Mo=function(e){Object(d.a)(n,e);var t=Qo(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onHeightChange=function(){e.dynamicSticky&&e.dynamicSticky.check()},e}return Object(u.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,a=t.questionType,r=e.loadBrand;"commercial"===a&&r(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,a=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&a(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,i=r.id,o=r.questionType,c=t.brand;return Object(a.c)(to.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:sn.i+10,ref:function(t){e.dynamicSticky=t},children:["commercial"===o&&Object(a.b)(yo.a,{questionId:i,pageType:"question",onLoad:this.onHeightChange}),"commercial"===o&&c&&Object(a.b)(ko,{brand:c}),"commercial"!==o&&Object(a.b)($i.a,{type:"question",getSidebar:function(){return e.sidebar}}),"normal"===o&&Object(a.b)("div",{className:"Card",children:Object(a.b)(Xi.a,{isMobile:!1,id:"question/".concat(i),location:"new_question_up",query:{question_token:i},onHeightChange:this.onHeightChange})}),Object(a.b)(To,{}),Object(a.b)(xo,{}),Object(a.b)(ga,{id:i,question:n,position:"right"}),"normal"===o&&Object(a.b)(so,{question:n,onLoad:this.onHeightChange}),"normal"===o&&Object(a.b)(jo,{question:n,onLoad:this.onHeightChange}),"normal"===o&&Object(a.b)("div",{className:"Card",children:Object(a.b)(Xi.a,{isMobile:!1,id:"question/".concat(i),location:"new_question_down_sticky",query:{question_token:i},delay:500,onHeightChange:this.onHeightChange})}),"commercial"===o&&Object(a.b)($i.a,{type:"question",getSidebar:function(){return e.sidebar}}),Object(a.b)(eo.a,{})]})}}]),n}(p.Component),_o=Object(I.compose)(Object(B.a)(null),Object(A.b)({module:"RightSideBar"}),Object(g.connect)((function(e){return{brand:e.question.brand}}),{loadBrand:T.I,loadProfile:no.h}))(Mo);function Do(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Po=function(e){Object(d.a)(n,e);var t=Do(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.questionType,i=n.collapsedAnswerCount,o=n.answerCount,c=n.isNormal,s=n.status,l=(s=void 0===s?{}:s).isLocked,u=e.question,d=e.location,h=e.answering,f=e.invitationShowCount,p=e.isDrained,b=e.isMuteSpecial,m=e.isMuteFreeze,v="updatedAnswers"===t||p,g="commercial"!==r&&!o;return Object(a.c)("div",{children:[Object(a.b)(Vi,{question:u,answering:h}),Object(a.b)(yr,{question:u}),Boolean(f)&&!b&&!m&&Object(a.b)(Lt.a,{expandCount:f,question:u}),Object(a.b)(Bi,{resource:t,question:u,location:d}),c&&!l&&"updatedAnswers"!==t&&p&&!g&&Object(a.b)(A.a,{module:"BottomBar",children:Object(a.b)(Xn.d,{children:Object(a.b)(ft,{className:"QuestionAnswers-answerButton",size:"spread"})})}),v&&i>0&&!b&&Object(a.b)(Zi,{question:u})]})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,r=e.notificationId,i=e.location;return Object(a.c)("div",{className:"Question-main",children:[Object(a.b)("div",{className:"Question-mainColumn",children:n?Object(a.b)(Xr,{location:i,question:t,id:r}):this.renderAnswers()}),Object(a.b)(le.a,{children:Object(a.b)(_o,{question:t})})]})}}]),n}(p.PureComponent);Po.fetchData=function(e){var t=e.params.id,n=e.route.resource,a=e.location.query,r=a.group_id,i=a.page,o=a.qc,c=e.dispatch,s=e.getState;if(!o&&r)return c(Object(T.S)(r));var l=s(),u=l.env.userAgent,d=Object(H.d)(l),h=5;return u.isBot?h=20:d&&(h=4),c(Object(T.R)(t,n,{offset:Object(Ur.c)(Number(i)||1),limit:h}))};var qo=Object(g.connect)((function(e,t){var n=t.params.id,a=t.route.resource,r=t.location.query,i=r.group_id,o=r.qc,c=e.currentUser,s=!o&&i,l=Vr(e,{id:n,resource:a}).isDrained,u=Object(T.eb)(e,{id:n}),d=u.answerCount,h=u.relationship.isAnonymous;return{isNormalNotification:s,notificationId:i,resource:a,question:u,isDrained:l,invitationShowCount:c&&!h&&d<4?d?5:3:0,isBot:e.env.userAgent.isBot,isHuman:Object(H.c)(e),currentUser:Object(D.b)(e),canOia:Object(H.d)(e),shouldOia:Object(H.h)(e),shouldSpecialOia:Object(H.i)(e),referer:Object(H.g)(e),isMuteSpecial:Object(T.E)(u),isMuteFreeze:Object(T.D)(u),ua:Object(H.l)(e),draft:Object(T.n)(e,{id:n})}}))(Po),Lo=n(1089),zo=n(218),Uo=n(138);function Fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Ho=function(e){Object(d.a)(n,e);var t=Fo(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={contentRef:null},e.contentRef=Object(p.createRef)(),e.handleCloseComment=function(){var t=e.props,n=t.location,a=n.pathname,r=n.search,i=t.byComment,o=t.router;i&&o.replace({pathname:a,search:r})},e.handleCloseEditing=function(){var t=e.props,n=t.location,a=n.pathname,r=n.query,i=n.hash,o=t.router;"#draft"===i&&o.replace({pathname:a,query:r})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.loadContentRightsNotification;this.context.currentUser&&Object(ce.c)("answer",t,ce.a),this.setState({contentRef:this.contentRef.current}),Ce.a.get("answer::justPublished")&&(Ce.a.delete("answer::justPublished"),n("answer",t))}},{key:"render",value:function(){var e,t=this.props,n=t.question,r=n.id,i=n.relationship,o=i.canCollapseAnswers,c=i.canStickAnswers,s=n.hasPublishingDraft,l=t.answer,u=t.location.hash,d=t.isSearchSpecialSource,h=t.hasLoadedDraft;return(null==l||null===(e=l.question)||void 0===e?void 0:e.id)!==r||l.isDelete?Object(a.b)(Lo.a,{to:"/question/".concat(r)}):Object(a.b)(Xn.d,{className:"AnswerCard",children:Object(a.b)("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0,children:Object(a.b)(zo.d.Provider,{value:this.state.contentRef,children:Object(a.b)(zr.a,{relatedTo:"answer",answer:l,byComment:Object(mn.a)(u),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:o,canStick:c,editing:h&&"#draft"===u,editable:!0,canAbstract:!0,expanded:d||!0,hasPublishingDraft:s,itemProp:"mainEntityOfPage",showReviewingLabel:!0,isSearchSpecialSource:d})})})})}}]),n}(p.Component);Ho.contextTypes={currentUser:v.a.object};var Vo=Object(I.compose)(r.withRouter,Object(g.connect)((function(e,t){var n,a,r=e.question,i=(r=void 0===r?{}:r).draftStatus,o=t.answer;return{hasLoadedDraft:!1===(null==i||null===(n=i[null==o||null===(a=o.question)||void 0===a?void 0:a.id])||void 0===n?void 0:n.loading)}}),{loadAnswer:q.o,loadContentRightsNotification:Uo.Y}))(Ho);function Yo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Wo=function(e){Object(d.a)(n,e);var t=Yo(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,a=e.isDrained,r=e.items;n!==t&&!a&&r.length<2&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id,n=e.loadItems;return n(t,"answers",{limit:3})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,r=e.isWechat;return Boolean(n.length)&&Object(a.b)(Xn.d,{className:"MoreAnswers",children:Object(a.b)(wr.b,{title:"更多回答","data-zop-feedlist":!0,children:n.map((function(e){return Object(a.b)(Lr.a,{children:Object(a.b)(zr.a,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!r})},e.id)}))})})}}]),n}(p.Component),Go=Object(g.connect)((function(e,t){var n=t.question.id,a=t.answerId,r=e.entities.answers,i=e.question.answers[n]||{ids:[],isDrained:!1},o=i.ids;return{isDrained:i.isDrained,items:o.filter((function(e){return e!==Number(a)})).slice(0,2).map((function(e){return r[e]})),isWechat:e.env.userAgent.Wechat}}),{loadAnswer:q.o,loadItems:T.R})(Wo),Jo=n(1170),Ko=n(996),Zo=n(2584),Xo=n(101);function $o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ec=function(e){Object(d.a)(n,e);var t=$o(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?Object(a.c)("div",{className:"AnswerAuthor-item",children:[Object(a.b)("span",{className:"AnswerAuthor-item-icon",children:Object(a.b)(Zo.a,{text:!0,center:!0})}),Object(a.b)("div",{className:"AnswerAuthor-item-value",children:Object(a.c)(Ko.CJKSpace,{children:[t.slice(0,3).map((function(e,t){return Object(a.c)("span",{children:[0!==t&&"、",Object(a.b)(qt.a,{user:e,noBadge:!0,noHoverCard:!0,children:e.name})]},e.urlToken)})),"也关注了",sn.N[n.gender]]})})]}):null}}]),n}(p.Component);ec.propTypes={author:v.a.object.isRequired};var tc=Object(I.compose)(Object(g.connect)((function(e,t){var n=t.author;return Object.assign({currentUser:Object(D.b)(e)},n&&function(e,t){var n=t.urlToken||t.id,a=e.people.mutualsByUser[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:a.isDrained,isFetching:a.isFetching,items:a.ids.map((function(t){var n=Object(Xo.c)(e,{id:t});return n.code?null:n})).filter(Boolean)}}(e,{urlToken:n.urlToken}))}),{loadItems:no.f}),Object(Xt.a)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}}))(ec),nc=n(1059),ac=n(989);function rc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var ic=function(e){return e&&void 0!==e.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==e.badge};var oc=function(e){Object(d.a)(n,e);var t=rc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,a=e.isDrained;t&&(a||n(t))}},{key:"render",value:function(){var e,t=this.props,n=t.user,r=t.isSelf;if(!n)return null;var i=n.urlToken,o=n.isOrg,c=n.headline,s=n.badge,l=n.badgeV2,u=n.answerCount,d=n.articlesCount,h=n.followerCount,f=me.e(l||s),p=f.identity,b=f.bestAnswerer,m=f.baike,v=o?"org":"people";return Object(a.c)(Xn.d,{className:"AnswerAuthor",role:"complementary","aria-label":"关于作者",children:[Object(a.b)(Xn.b,{className:"AnswerAuthor-title",children:"关于作者"}),Object(a.b)(Xn.c,{children:Object(a.c)("div",{className:"AnswerAuthor-user",children:[Object(a.b)("div",{className:"AnswerAuthor-user-avatar",children:Object(a.b)(nc.a,{user:n,avatarProps:{size:60},noHoverCard:!0})}),Object(a.c)("div",{className:"AnswerAuthor-user-content",children:[Object(a.b)("div",{className:"AnswerAuthor-user-name",children:Object(a.b)(ac.a,{user:n,noBadge:!0,noHoverCard:!0})}),c&&Object(a.b)("div",{className:"AnswerAuthor-user-headline",children:Object(a.b)(Pt.a,{html:c})})]})]})}),Object(a.c)(Xn.c,{children:[p&&Object(a.c)("div",{className:"AnswerAuthor-item",children:[Object(a.b)("a",{className:"AnswerAuthor-item-icon",href:"/account/verification/intro",target:"_blank",children:Object(a.b)(me.a,{center:!0,size:19})}),Object(a.b)("div",{className:"AnswerAuthor-item-value",children:p.slice(0,2).map((function(e){return e.description})).join("，")})]}),Boolean(null==b||null===(e=b.topics)||void 0===e?void 0:e.length)&&Object(a.c)("div",{className:"AnswerAuthor-item",children:[Object(a.b)("span",{className:"AnswerAuthor-item-icon",children:Object(a.b)(me.b,{center:!0,size:19})}),Object(a.c)("div",{children:[Object(a.b)(Jo.a,{topics:b.topics,user:n,noHoverCard:!0}),"的优秀答主"]})]}),Boolean(m)&&Object(a.c)("div",{className:"AnswerAuthor-item",children:[Object(a.b)("span",{className:"AnswerAuthor-item-icon",children:Object(a.b)(me.d,{center:!0,size:19})}),Object(a.b)("div",{children:m.description})]}),n&&!r&&Object(a.b)(tc,{author:n})]}),i&&Object(a.c)(Xn.c,{children:[Object(a.b)("div",{className:"AnswerAuthor-counts",children:Object(a.c)(Vt.a,{children:[Object(a.b)(Vt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(i,"/answers"),name:"回答",value:u,"data-za-detail-view-element_name":"Answer"}),Object(a.b)(Vt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(i,"/posts"),name:"文章",value:d,"data-za-detail-view-element_name":"Post"}),Object(a.b)(Vt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(i,"/followers"),name:"关注者",value:h,"data-za-detail-view-element_name":"Follower"})]})}),!r&&Object(a.b)(wo.a,{className:"AnswerAuthor-buttons",user:n})]})]})}}]),n}(p.Component),cc=Object(g.connect)((function(e,t){var n=t.answer,a=n.author,r=n.author.urlToken,i=e.entities.users,o=r?i[r]:a;return{currentUser:Object(D.b)(e),isDrained:ic(o),user:o,isSelf:Object(D.i)(e,o)}}),{loadProfile:no.h})(oc),sc=n(839),lc=n(1118);function uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var dc=function(e){Object(d.a)(n,e);var t=uc(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerFavlists)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,i=e.isDrained;return Object(a.c)("div",{className:"AnswerFavlists",children:[Object(a.b)("div",{className:"AnswerFavlists-header",children:Object(a.c)("div",{className:"AnswerFavlists-title",children:["被收藏 ",Object(Ee.formatNumber)(n)," 次"]})}),!(i&&!t.length)&&Object(a.b)(Ta.b,{className:"AnswerFavlists-list",isLocal:!0,isLoading:r,isDrained:i,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(a.b)(Ta.a,{className:"AnswerFavlists-item",small:!0}),children:t.map((function(e){var t=e.id,n=e.type,r=e.creator,i=e.isFollowing,o=e.answerCount,c=e.followerCount;return Object(a.b)(wr.a,{children:Object(a.b)(lc.a,{favlist:e,action:Object(a.b)(pt.a,{preset:"primary",id:t,type:n,isFollowing:i}),status:Object(a.c)(sc.d,{children:[Object(a.c)("span",{children:["由"," ",Object(a.b)(qt.a,{user:r,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"]}),Object(a.c)("span",{children:[Object(Ee.formatNumber)(o)," 条内容"]}),Object(a.c)("span",{children:[Object(Ee.formatNumber)(c)," 人关注"]})]})})},t)}))})]})}}]),n}(p.Component),hc=Object(I.compose)(Object(g.connect)((function(e,t){var n=t.answer.id,a=e.entities.favlists,r=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:r.ids.map((function(e){return a[e]})),count:r.totals,isFetching:r.isFetching,isDrained:r.isDrained}}),{loadAnswerFavlists:q.s}),Object(A.b)({module:"CollectionList"}))(dc),fc=n(939);function pc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var bc=function(e){Object(d.a)(n,e);var t=pc(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerCopyrightApplicants)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,i=e.isDrained;return Object(a.c)("div",{className:"AnswerCopyrightApplicants",children:[Object(a.b)("div",{className:"AnswerCopyrightApplicants-header",children:Object(a.c)("div",{className:"AnswerCopyrightApplicants-title",children:["授权转载 ",Object(Ee.formatNumber)(n)," 次"]})}),!(i&&!t.length)&&Object(a.b)(Ta.b,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:r,isDrained:i,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(a.b)(Ta.a,{className:"AnswerCopyrightApplicants-item",small:!0}),children:t.map((function(e){var t=e.applier,n=e.accountType,r=e.accountUsername,i=e.createdAt;return Object(a.b)("div",{className:"AnswerCopyrightApplicants-item",children:Object(a.b)(fc.a,{user:t,meta:"".concat(n," ").concat(r),status:null,action:Object(a.c)("div",{className:"AnswerCopyrightApplicants-time",children:["申请于 ",Object(k.toDateString)(i)]})})},"".concat(t.name,".").concat(i))}))})]})}}]),n}(p.Component),mc=Object(g.connect)((function(e,t){var n=t.answer.id,a=e.entities.copyrightApplicants,r=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:r.ids.map((function(e){return a[e]})),count:r.totals,isFetching:r.isFetching,isDrained:r.isDrained}}),{loadAnswerCopyrightApplicants:q.r})(bc);function vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var gc=function(e){Object(d.a)(n,e);var t=vc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,r=e.accountUsername,i=e.createdAt;return Object(a.c)("div",{className:"AnswerInfo-copyright-applicant",children:[Object(a.b)(qt.a,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",r]},"".concat(t.name,".").concat(i))}}]),n}(p.Component);function Oc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var jc=function(e){Object(d.a)(n,e);var t=Oc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return Object(a.b)(Xn.c,{className:"AnswerInfo-copyright-applicants",children:e.map((function(e,t){return Object(a.b)(gc,{copyrightApplicant:e},t)}))},"content")}}]),n}(p.Component);function yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var wc=function(e){Object(d.a)(n,e);var t=yc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.favlist,t=e.id,n=e.title,r=e.followerCount,i=e.creator;return Object(a.c)("div",{className:"AnswerInfo-favlist",children:[Object(a.b)("div",{className:"AnswerInfo-favlist-title",children:Object(a.b)(ut.a,{preset:"plain",a:!0,to:"/collection/".concat(t),target:"_blank","data-za-detail-view-element_name":"Collection",title:n,children:n})}),Object(a.c)("div",{className:"AnswerInfo-favlist-author",children:[Object(a.b)(qt.a,{user:i,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"]}),Object(a.c)("div",{className:"AnswerInfo-favlist-followers",children:[Object(Ee.formatNumber)(r)," 人关注"]})]},t)}}]),n}(p.Component),Cc=Object(A.b)((function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}}))(wc);function Ac(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var kc=function(e){Object(d.a)(n,e);var t=Ac(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.favlists;return Object(a.b)(Xn.c,{className:"AnswerInfo-favlists",children:e.map((function(e){return Object(a.b)(Cc,{favlist:e},e.id)}))},"content")}}]),n}(p.Component),Sc=Object(A.b)({module:"CollectionList"})(kc);function Rc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Ec=function(e){Object(d.a)(n,e);var t=Rc(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={copyrightApplicantsModalShown:!1,favlistsModalShown:!1},e.handleCopyrightApplicantsModalShow=function(){oe.a.trackEvent(Object(it.a)(e),{action:"Click",element:"Button",name:"转载授权"}),e.setState({copyrightApplicantsModalShown:!0})},e.handleCopyrightApplicantsModalHide=function(){e.setState({copyrightApplicantsModalShown:!1})},e.handleFavlistsModalShow=function(){oe.a.trackEvent(Object(it.a)(e),{action:"Click",element:"Button",name:"被收藏"}),e.setState({favlistsModalShown:!0})},e.handleFavlistsModalClose=function(){e.setState({favlistsModalShown:!1})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,a=e.favlists,r=e.loadAnswerCopyrightApplicants,i=e.loadAnswerFavlists;n.length||a.length||(r(t),i(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,r=e.copyrightApplicantCount,i=e.favlists,o=e.favlistCount,c=this.state,s=c.favlistsModalShown,l=c.copyrightApplicantsModalShown;return n.length||i.length?Object(a.c)(Xn.d,{role:"complementary","aria-label":"更多回答信息",children:[Boolean(n.length)&&[Object(a.c)(Xn.b,{className:"AnswerInfo-title",children:["授权转载"," ",Object(a.b)(U.c,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow,children:Object(Ee.formatNumber)(r)})," ","次"]},"header"),Object(a.b)(jc,{copyrightApplicants:n.slice(0,5)},"content")],Boolean(i.length)&&[Object(a.c)(Xn.b,{className:"AnswerInfo-title",children:["被收藏"," ",Object(a.b)(U.c,{preset:"plain",onClick:this.handleFavlistsModalShow,children:Object(Ee.formatNumber)(o)})," ","次"]},"header"),Object(a.b)(Sc,{favlists:i.slice(0,5)},"content")],Object(a.b)(Ht.b,{size:"fullPage",onClose:this.handleFavlistsModalClose,children:s&&Object(a.b)(hc,{answer:t})}),Object(a.b)(Ht.b,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide,children:l&&Object(a.b)(mc,{answer:t})})]}):null}}]),n}(p.Component),Nc=Object(g.connect)((function(e,t){var n=t.answer.id,a=e.entities,r=a.copyrightApplicants,i=a.favlists,o=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},c=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:o.ids.map((function(e){return r[e]})),copyrightApplicantCount:o.totals,favlists:c.ids.map((function(e){return i[e]})),favlistCount:c.totals}}),{loadAnswerCopyrightApplicants:q.r,loadAnswerFavlists:q.s})(Ec);function Ic(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Tc=function(e){Object(d.a)(n,e);var t=Ic(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onHeightChange=function(){e.dynamicSticky&&e.dynamicSticky.check()},e}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,i=r.id,o=r.questionType,c=t.answer,s=Object(q.n)(c)||Object(q.l)(c);return Object(a.c)(to.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:sn.i+10,ref:function(t){e.dynamicSticky=t},children:[Object(a.b)($i.a,{type:"question",getSidebar:function(){return e.sidebar}}),s||"normal"===o&&437329650!==i&&Object(a.b)("div",{className:"Question-sideColumnAdContainer",children:Object(a.b)(Xi.a,{isMobile:!1,id:"question/".concat(i,"/answer/").concat(c.id),location:"new_answer_up",query:{question_token:i,answer_token:c.id},onHeightChange:this.onHeightChange})}),"commercial"===o&&Object(a.b)(yo.a,{questionId:i}),c.author&&Object(a.b)(cc,{answer:c,onLoad:this.onHeightChange}),Object(a.b)(To,{}),Object(a.b)(Nc,{answer:c,onLoad:this.onHeightChange}),Object(a.b)(xo,{}),Object(a.b)(ga,{id:i,question:n,position:"right"}),s||"normal"===o&&Object(a.b)(so,{question:n,onLoad:this.onHeightChange}),s||"normal"===o&&Object(a.b)(jo,{answer:c,question:n,onLoad:this.onHeightChange}),s||"normal"===o&&437329650!==i&&Object(a.b)("div",{children:Object(a.b)(Xi.a,{isMobile:!1,id:"question/".concat(i,"/answer/").concat(c.id),location:"new_answer_down_sticky",query:{question_token:i,answer_token:c.id},delay:1e3,onHeightChange:this.onHeightChange})}),Object(a.b)(eo.a,{})]})}}]),n}(p.Component),Bc=Object(I.compose)(Object(B.a)(null),Object(A.b)((function(e){var t=e.answer;return{module:"RightSideBar",content:Object.assign({},t.author&&{member_hash_id:t.author.id})}})))(Tc);function xc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Qc=function(e){Object(d.a)(n,e);var t=xc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.itemNum,r=e.questionType;e.bottom;return Object(a.b)(Xn.d,{className:pe()("ViewAll",{"ViewAll--bottom":!1}),children:Object(a.b)(Cr.a,{className:"ViewAll-QuestionMainAction",to:t,"data-za-detail-view-element_name":"ViewAll",style:{},children:"commercial"===r?"查看 ".concat(Object(Ee.formatNumber)(n)," 个品牌推荐的回答"):"查看全部 ".concat(Object(Ee.formatNumber)(n)," 个回答")})})}}]),n}(p.Component),Mc=Object(A.b)((function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}}))(Qc),_c=n(1222),Dc=Object.assign;var Pc=function(e){return b.a.createElement(Be.a,Dc({width:"43",height:"50",fill:"none",viewBox:"0 0 43 50"},e),b.a.createElement("path",{fill:"#121212",d:"M23.376 45.237c-1.567 0-3.133.012-4.698 0a1.701 1.701 0 00-1.133.386 507.16 507.16 0 01-4.493 3.517 3.959 3.959 0 01-.694.449 1.305 1.305 0 01-1.792-1.537c.239-.737.477-1.47.744-2.192.158-.42.153-.597-.384-.68-1.963-.3-3.672-1.093-4.879-2.756a7.614 7.614 0 01-1.272-2.983c-.098-.477-.238-.455-.651-.317-.625.212-.783.568-.601 1.16.041.155.057.316.047.477a.988.988 0 01-.806 1.03.954.954 0 01-1.162-.589c-.115-.257-.189-.417-.527-.408a1.009 1.009 0 01-1.003-.701c-.188-.463.015-.828.337-1.112.238-.22.238-.356.067-.625a1.023 1.023 0 01.238-1.432.98.98 0 011.377.203c.293.348.542.344.966.227 1.315-.365 1.974-1.088 1.99-2.534.015-1.239.346-2.467.494-3.706.158-1.314-.1-2.61-.258-3.905-.205-1.67-.477-3.34-.742-4.992-.136-.89.44-1.462 1.325-1.312 1.119.186 1.104.183 1.255-.955.224-1.689.45-3.376.715-5.058a1.102 1.102 0 00-.522-1.243C5.336 12.284 4.34 10.273 3.93 7.954c-.462-2.57.65-4.554 2.53-6.175C8.34.156 10.609-.166 12.993.068a11.67 11.67 0 013.884 1.028 5.311 5.311 0 012.147 1.728c.303.436.645.541 1.138.539 4.362-.017 8.721 0 13.08 0 1.776 0 3.415.413 4.813 1.563 2.04 1.67 2.784 3.87 2.558 6.442-.009.08-.023.16-.04.239-.178.954-.21 1.655.715 2.479a4.5 4.5 0 01.386 6.15 13.421 13.421 0 01-2.2 2.246 1.322 1.322 0 00-.548.928c-.604 4.355-1.267 8.7-1.814 13.06-.539 4.327-3.407 7.65-7.566 8.59-.876.169-1.768.235-2.66.198H23.38l-.003-.021z"}),b.a.createElement("path",{fill:"#FEFEFE",d:"M12.394 47.606c.441-1.293.809-2.417 1.21-3.526.136-.377 0-.442-.335-.444-.715 0-1.431-.019-2.147-.07-1.346-.095-2.458-.698-3.412-1.624a1.357 1.357 0 01-.425-1.105c.046-.93.062-1.863.062-2.794a.614.614 0 01.492-.692c.513-.148 1.014-.338 1.517-.517.442-.156.642-.478.509-.929-.144-.477-.537-.532-.955-.41-.322.09-.64.21-.954.31-.403.13-.601 0-.592-.446.02-.89 0-1.782.024-2.675.05-2.944-.33-5.85-.775-8.751-.02-.117-.043-.239-.055-.351-.046-.535.086-.659.606-.53 1.095.267 2.2.504 3.278.833 1.67.51 3.329.365 4.975-.1 1.97-.559 3.798-1.473 5.64-2.343a1.038 1.038 0 00.604-.955c.072-1.047.16-2.095.238-3.14.048-.61.184-.715.747-.477 1.625.628 3.252 1.25 4.865 1.909a3.12 3.12 0 002.195.074c1.73-.558 3.348-1.413 5.018-2.114.745-.306.768-.306 1.074.458.532 1.322 1.038 2.653 1.603 3.963.191.444.079.695-.265.954a37.672 37.672 0 01-4.576 2.976c-.833.463-.883.568-.716 1.517.838 4.57 1.217 9.189 1.556 13.813a1.209 1.209 0 01-.44 1.085c-1.631 1.494-3.552 2.148-5.752 2.148-3.101-.029-6.184 0-9.276 0a1.432 1.432 0 00-1 .374c-1.436 1.179-2.93 2.317-4.538 3.58z"}),b.a.createElement("path",{fill:"#06F",d:"M32.376 15.823a3.172 3.172 0 00-.04-.366c-.284-1.171.035-2.087 1.026-2.834.584-.441.61-.926.293-1.403s-.78-.573-1.45-.239c-.24.122-.299.072-.356-.157a1.583 1.583 0 00-.212-.477.936.936 0 00-1.14-.408.995.995 0 00-.693 1.062c.023.211.06.42.112.627-.365-.05-.69-.239-1.05-.086a.99.99 0 00-.675.759.869.869 0 00.415.973c.392.239.802.427 1.215.62a.548.548 0 01.394.52c.023.655.076 1.308.133 1.957a.46.46 0 01-.327.542 2.832 2.832 0 01-2.343.05c-1.894-.8-3.817-1.517-5.743-2.26-.97-.376-1.536-.028-1.63 1.005-.114 1.262-.238 2.524-.312 3.791a.809.809 0 01-.51.78c-1.797.83-3.594 1.67-5.56 2.031a6.441 6.441 0 01-2.708-.06c-.752-.176-1.494-.398-2.248-.555-.36-.075-.439-.24-.39-.568.28-1.922.552-3.843.813-5.765.043-.322.183-.418.477-.336.424.112.871.104 1.29-.024.492-.132.82.045 1.163.365a8.126 8.126 0 003.209 1.849c.828.239 1.243-.11 1.08-.954-.142-.738-.262-1.482-.443-2.212a1 1 0 01.334-1.093 17.656 17.656 0 002.758-3.34c.821-1.272 1.265-2.642.954-4.171-.083-.418.063-.506.451-.506 4.18.012 8.363 0 12.544.012 1.708 0 3.242.477 4.435 1.782 1.29 1.42 1.484 3.102 1.336 4.94-.095 1.176-.522 1.791-1.732 2.147-1.489.434-2.878 1.21-4.309 1.837-.17.1-.363.157-.56.165z"}),b.a.createElement("path",{fill:"#FEFEFE",d:"M14.94 15.307c-.871-.3-1.477-.87-2.088-1.431-.318-.291-.685-.477-1.129-.392-1.88.404-3.219-.587-4.4-1.806-1.479-1.53-2.2-3.426-1.892-5.538.33-2.25 2.699-4.328 4.99-4.56 1.838-.206 3.7.034 5.425.702 2.83 1.107 3.775 3.844 2.207 6.442a15.454 15.454 0 01-3.102 3.656.992.992 0 00-.367 1.143c.153.56.231 1.147.356 1.784z"}),b.a.createElement("path",{fill:"#06F",d:"M35.01 38.244a128.668 128.668 0 00-.763-7.824 60.35 60.35 0 00-.527-3.464.584.584 0 01.324-.716c.842-.52 1.67-1.062 2.51-1.59.146-.09.296-.295.463-.197.167.098.088.36.064.544-.226 1.652-.455 3.299-.687 4.939-.362 2.507-.73 5.014-1.105 7.523a1.38 1.38 0 01-.279.785z"}),b.a.createElement("path",{fill:"#B7B7B6",d:"M37.792 17.19c-.238-.239-.353-.392-.303-.6 0-.03.13-.073.139-.061a.98.98 0 01.164.66z"}),b.a.createElement("path",{fill:"#121212",d:"M20.92 27.309c.025.954-.488 1.479-1.43 1.5-.943.022-1.633-.615-1.64-1.56-.007-.945.697-1.53 1.804-1.546.9-.012 1.231.42 1.267 1.606z"}),b.a.createElement("path",{fill:"#444",d:"M11.938 5.575c.172-.137.35-.265.537-.382a.804.804 0 011.178.294c.378.652.654 1.358.816 2.094.1.38-.176.432-.43.492-.252.06-.522.112-.6-.265-.094-.444-.172-.895-.308-1.329-.079-.255-.131-.656-.563-.518-.396.124-.477.416-.31.802.183.44.312.897.491 1.336.217.535-.2.623-.518.728-.317.105-.749.339-.93-.239a33.209 33.209 0 01-.897-3.567c-.098-.477.26-.553.584-.651.325-.098.575-.045.673.348.072.289.074.6.277.857zM9.266 9.09l.954-.356c.191-.067.356-.048.442.165a.32.32 0 01-.047.376.322.322 0 01-.11.077 9.983 9.983 0 01-2.172.775c-.446.093-.675-.238-.525-.715.22-.697.477-1.38.733-2.09-.332-.077-.616.095-.912.166-.186.046-.358.074-.453-.143a.354.354 0 01.179-.5c.67-.302 1.4-.445 2.133-.42.415.018.551.338.422.737-.196.591-.398 1.188-.644 1.927zm6.461-1.544c-.289.043-.458-.096-.55-.39-.15-.477-.238-.954-.355-1.43-.152-.597.208-.74.626-.862.46-.136.57.212.684.537.115.324.253.715.377 1.059.25.704-.002 1.064-.782 1.086z"}),b.a.createElement("path",{fill:"#4A4B4A",d:"M15.037 3.055a.77.77 0 01.75.77.728.728 0 01-.779.745.716.716 0 01-.741-.751c.028-.485.324-.707.77-.764z"}))},qc=Object.assign;var Lc=function(e){return b.a.createElement(Be.a,qc({width:"14",height:"14",fill:"none",viewBox:"0 0 14 14"},e),b.a.createElement("mask",{id:"id-628033106-a",width:"14",height:"14",x:"0",y:"0",maskUnits:"userSpaceOnUse"},b.a.createElement("path",{fill:"#fff",d:"M.001.014h13.985V14H.001V.014z",fillRule:"evenodd",clipRule:"evenodd"})),b.a.createElement("g",{mask:"url(#id-628033106-a)"},b.a.createElement("path",{fill:"#121212",d:"M2.543 8.278a.636.636 0 010 1.272h-.636A1.907 1.907 0 010 7.643V1.92C0 .868.854.014 1.907.014H7.63c1.053 0 1.907.854 1.907 1.907v.636a.636.636 0 01-1.271 0V1.92a.636.636 0 00-.636-.636H1.907a.636.636 0 00-.636.636v5.722c0 .35.285.635.636.635h.636zm3.814-3.814h5.722c1.053 0 1.907.854 1.907 1.907v5.722A1.907 1.907 0 0112.08 14H6.357a1.907 1.907 0 01-1.907-1.907V6.37c0-1.053.854-1.907 1.907-1.907zm0 1.271a.636.636 0 00-.635.636v5.722c0 .35.284.636.635.636h5.722a.636.636 0 00.636-.636V6.37a.636.636 0 00-.636-.636H6.357z",fillRule:"evenodd",clipRule:"evenodd"})))},zc=Object.assign;var Uc=function(e){return b.a.createElement(Be.a,zc({width:"15",height:"14",fill:"none",viewBox:"0 0 15 14"},e),b.a.createElement("path",{fill:"#121212",d:"M3.55 14c-.106 0-.159 0-.265-.053a.583.583 0 01-.318-.53v-2.225H.954A.95.95 0 010 10.238V.965A.95.95 0 01.954.01h12.982a.95.95 0 01.954.954v9.273a.95.95 0 01-.954.954H7.418l-3.497 2.702c-.106.053-.212.106-.37.106zm-2.49-3.921h2.437c.318 0 .53.212.53.53v1.854l2.914-2.225c.106-.053.212-.106.318-.106h6.518V1.124H1.06v8.955z",fillRule:"evenodd",clipRule:"evenodd"}),b.a.createElement("path",{fill:"#121212",d:"M3.709 4.515h7.948v-1.06H3.71v1.06zm0 3.18h4.239v-1.06H3.709v1.06z",fillRule:"evenodd",clipRule:"evenodd"}))},Fc=Object.assign;var Hc=function(e){return b.a.createElement(Be.a,Fc({width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},e),b.a.createElement("mask",{id:"id-95574191-a",width:"16",height:"16",x:"0",y:"0",maskUnits:"userSpaceOnUse"},b.a.createElement("path",{fill:"#fff",d:"M.001.016h15.983V16H.001V.016z",fillRule:"evenodd",clipRule:"evenodd"})),b.a.createElement("g",{mask:"url(#id-95574191-a)"},b.a.createElement("path",{fill:"#121212",d:"M7.992.016C3.585.016 0 3.6 0 8.008a7.96 7.96 0 001.344 4.435.521.521 0 00.867-.58 6.915 6.915 0 01-1.169-3.855 6.958 6.958 0 016.95-6.95 6.958 6.958 0 016.95 6.95 6.958 6.958 0 01-6.95 6.95 6.917 6.917 0 01-3.865-1.175.522.522 0 00-.58.866A7.956 7.956 0 007.992 16c4.407 0 7.992-3.585 7.992-7.992S12.4.016 7.992.016zM5.046 8.368c-.221 0-.332-.096-.332-.29V7.29c0-.216.111-.323.332-.323h2.167a4.28 4.28 0 01-.394 1.401H5.046zm3.14-1.401h2.746a.47.47 0 01.28.071c.058.041.086.125.086.252v.845c0 .155-.12.233-.366.233H7.873a8.4 8.4 0 00.314-1.401zm-2.964 3.316c-.386.266-.945.508-1.677.727v.822c.301-.032.542-.069.722-.11a4.708 4.708 0 001.63-.774c.558-.409 1.07-.976 1.54-1.701h.712v1.615c0 .33.098.572.294.727.178.143.404.214.68.214h3.206V10.9H9.426c-.126 0-.218-.023-.275-.07-.054-.045-.079-.142-.076-.29l.005-1.293h2.166a.98.98 0 00.703-.261c.155-.149.233-.376.233-.68V7.03c0-.311-.085-.545-.256-.704-.105-.098-.268-.172-.49-.223l.252-.58c.073-.168.11-.308.11-.422a.823.823 0 00-.276-.608c-.187-.187-.444-.28-.77-.28h-5.14l.137-.47h-.893c-.161.449-.327.778-.498.987-.206.257-.447.412-.723.466v.907a2.96 2.96 0 00.908-.404 3 3 0 00.622-.608h5.221c.188 0 .304.013.352.038.073.038.109.092.109.162s-.03.175-.095.318l-.21.46H5.09c-.478 0-.805.083-.983.248-.187.177-.28.43-.28.76V8.26c0 .491.202.804.607.94.096.032.288.048.576.048h1.287c-.37.46-.728.805-1.074 1.036z",fillRule:"evenodd",clipRule:"evenodd"})))};function Vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var Yc=function(e){Object(d.a)(n,e);var t=Vc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,a=e.loadAnswer,r=e.currentUser,i=e.checkIfCanConvertToVessay;t||a(n),Object(_c.a)(r,null==t?void 0:t.author)&&i(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,a=e.loadAnswer;n!==t&&a(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,r=e.question,i=e.question,o=i.id,c=i.answerCount,s=i.questionType,l=e.location,u=e.isMuteSpecial,d=(e.currentUser||{}).userType;return!t.relationship.isAuthor&&t.visibleOnlyToAuthor?Object(a.b)(N,{}):Object(a.c)("div",{className:"Question-main",children:[Object(a.b)(y.a,{meta:Object(M.a)(t,r.topics)}),Object(a.b)(zo.b,{selector:[".ViewAll-QuestionMainAction",".QuestionAnswer-content",".List-item"].join(","),children:Object(a.c)("div",{className:"Question-mainColumn","data-zop-questionanswerlist":!0,children:[("guest"===d||!d)&&Object(a.c)("div",{className:"Question-mainColumnLogin",children:[Object(a.b)("div",{className:"Question-mainColumnLoginImg",children:Object(a.b)(Pc,{})}),Object(a.c)("div",{className:"Question-mainColumnLoginContent",children:[Object(a.b)("div",{className:"Question-mainColumnLoginTitle",children:"登录后你可以"}),Object(a.c)("div",{className:"Question-mainColumnLoginDes",children:[Object(a.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(a.b)(Lc,{}),"不限量看优质回答"]}),Object(a.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(a.b)(Uc,{}),"私信答主深度交流"]}),Object(a.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(a.b)(Hc,{}),"精彩内容一键收藏"]})]})]}),Object(a.b)("div",{className:"Question-mainColumnLoginRightButton",children:Object(a.b)(z.b,{loginButton:Object(a.b)(U.c,{className:"Question-mainColumnLoginButton",children:"登录"})})})]}),Object(q.n)(t)||Object(q.l)(t)||c>0&&!u&&Object(a.b)(Mc,{itemNum:c,to:"/question/".concat(o),questionType:s}),Object(a.b)(Vo,{question:r,location:l,answer:t}),Object(q.n)(t)||Object(q.l)(t)||Object(a.b)(Go,{question:r,answerId:n}),c>0&&!u&&Object(a.b)(Mc,{itemNum:c,to:"/question/".concat(o),questionType:s})]})}),Object(a.b)(le.a,{children:Object(a.b)(Bc,{question:r,answer:t})})]})}}]),n}(p.Component);Yc.fetchData=function(e){var t=e.dispatch,n=e.params.answerId;return t(Object(q.o)(n))};var Wc=Object(g.connect)((function(e,t){var n=t.params,a=n.id,r=n.answerId,i=Object(T.eb)(e,{id:a}),o=Object(q.c)(e,{id:r}),c=Object(D.b)(e),s=(i||{}).relationship||{myAnswer:{isDelete:!1}};return{question:i,isOffice:Object(H.e)(e),answer:o&&Object.assign(Object.assign({},o),{},{isDelete:(o.relationship||{}).isAuthor&&(s.myAnswer||{}).isDeleted}),isMuteSpecial:Object(T.E)(i),currentUser:c}}),{loadAnswer:q.o,checkIfCanConvertToVessay:q.f})(Yc);t.default=Object(a.c)(r.Route,{children:[Object(a.b)(r.Route,{path:"waiting",component:_a,name:"QuestionWaiting",authRequired:!0,zaPageShowId:5541}),Object(a.b)(r.Route,{path:"later",component:Wa,name:"QuestionLater",authRequired:!0,zaPageShowId:5371}),Object(a.b)(r.Route,{path:"invited",component:er,name:"QuestionInvited",authRequired:!0,zaPageShowId:5543}),Object(a.c)(r.Route,{path:":id",component:Ia,name:"Question",children:[Object(a.c)(r.Route,{children:[Object(a.b)(r.IndexRoute,{component:qo,entity:"answers",resource:"answers",name:"QuestionPage",zaPageShowId:3378}),Object(a.b)(r.Route,{path:"answers/hidden",component:qo,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),Object(a.b)(r.Route,{path:"answers/updated",component:qo,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),Object(a.b)(r.Redirect,{from:"answers/created",to:"answers/updated"})]}),Object(a.b)(r.Route,{path:"answer/:answerId",component:Wc,name:"AnswerPage",zaPageShowId:2012}),Object(a.b)(r.Redirect,{from:"noti-answers",to:"."})]})]})},859:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n(1),r=n(2),i=Object(r.createContext)({}),o=function(e){var t=e.handleChangeType,n=e.setState,r=e.handleChange,o=e.testPhoneNo,c=e.handleSendDigits,s=e.continueActionRef,l=e.captchaV2Ref,u=e.captchaNeeded,d=e.selectClassName,h=e.captchaV2;return Object(a.b)(i.Provider,{value:{handleChangeType:t,handleChange:r,testPhoneNo:o,handleSendDigits:c,selectClassName:d,setState:n,continueActionRef:s,captchaV2Ref:l,captchaNeeded:u,captchaV2:h},children:e.children})};t.c=i},869:function(e,t,n){"use strict";var a=n(0),r=n(32),i=n(13),o=n(14),c=n(15),s=n(17),l=n(9),u=n(1),d=n(3),h=n.n(d),f=n(2),p=n(11),b=n.n(p),m=n(76),v=n.n(m),g=n(139),O=n(868),j=["className","inputClassName","errorMessageClassName"];function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var w=function(e){Object(c.a)(n,e);var t=y(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleErrorHide=function(){e.getValidationMessage()&&e.setState({errorMaskShown:!1},(function(){e.clearValidations({errorMaskShown:!0},(function(){return e.inputEl.focus()}))}))},e.handleKeyUp=function(t){8!==t.keyCode&&9!==t.keyCode||e.clearValidations()},e.handleChange=function(t){var n=t.target.value,a=e.props.onChange;e.setValue(n),"function"==typeof a&&a(n)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;e&&this.setValue(e),this.setState({errorMaskShown:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.manualValidateError,a=t.type,r=t.smsType,i=e.manualValidateError,o=e.type,c=e.defaultValue,s=e.smsType;!n&&i||"string"==typeof n&&n!==i?this.addManualValidation(i):n&&!i&&this.clearValidations({errorMaskShown:!0}),a===o&&r===s||(this.setValue(c),this.clearValidations({errorMaskShown:!0}))}},{key:"render",value:function(){var e,t=this,n=v()(this.props,["validations","defaultValue","onChange","smsType","manualValidateError","dispatch"]),i=n.className,o=n.inputClassName,c=n.errorMessageClassName,s=Object(r.default)(n,j),l=(this.state||{}).errorMaskShown,d=this.getValue(),h=this.getValidationMessage();return Object(u.c)("div",{className:b()("SignFlowInput",i),children:[Object(u.b)(g.a,Object.assign({onRef:function(e){t.inputEl=e},value:d,onChange:this.handleChange,onKeyUp:this.handleKeyUp,onClick:this.handleErrorHide,onBlur:function(){return t.validate()},className:o},s)),Object(u.b)("div",{className:b()("SignFlowInput-errorMask",this.getValidationClassName(),(e={},Object(a.a)(e,c,h),Object(a.a)(e,"SignFlowInput-requiredErrorMask",!d),Object(a.a)(e,"SignFlowInput-errorMask--hidden",!h||!l),e)),role:"button",tabIndex:0,onClick:this.handleErrorHide,children:h})]})}}]),n}(f.Component);w.propTypes={inputClassName:h.a.string,errorMessageClassName:h.a.string,manualValidateError:h.a.node};t.a=Object(O.a)()(w)},883:function(e,t,n){"use strict";var a=n(32),r=n(13),i=n(14),o=n(15),c=n(17),s=n(9),l=n(1),u=n(3),d=n.n(u),h=n(2),f=n(24),p=n(185),b=n(76),m=n.n(b),v=n(859),g=n(228),O=n(869),j=n(42),y=n(812);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}h.Component;var C=["supportedCountries","onChange","defaultPhoneNo","type","defaultSelectedCountry","supportedCountriesShown","placeholderPrefix","getPlaceholder"];function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var k=function(e){Object(o.a)(n,e);var t=A(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={selectedCountry:null},e.handleSelect=function(t,n){var a=e.props,r=a.supportedCountries,i=a.onSelect,o=r[n];e.setState({selectedCountry:o}),i(o)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.supportedCountries,n=e.getSupportedCountries;t&&t.length||n()}},{key:"render",value:function(){var e=m()(this.props,["getSupportedCountries","onSelect"]),t=e.supportedCountries,n=e.onChange,r=e.defaultPhoneNo,i=e.type,o=e.defaultSelectedCountry,c=e.supportedCountriesShown,s=e.placeholderPrefix,u=void 0===s?"":s,d=e.getPlaceholder,h=Object(a.default)(e,C),f=this.context,b=this.state.selectedCountry||o,v=b.name,g=b.code,j=Boolean(c&&t&&t.length);return Object(l.c)("div",{className:"SignFlow-account",children:[j&&Object(l.c)(l.a,{children:[Object(l.b)("div",{className:"SignFlow-supportedCountriesSelectContainer",children:Boolean(t)&&Boolean(t.length)&&Object(l.b)(p.b,{plain:!0,targetClassName:f.selectClassName,text:"".concat(v," ").concat(g),onChange:this.handleSelect,children:t.map((function(e,t){var n=e.name,a=e.code;return Object(l.b)(p.a,{value:"".concat(n," ").concat(a)},t)}))})}),Object(l.b)("span",{className:"SignFlow-accountSeperator",children:" "})]}),Object(l.b)(O.a,Object.assign({className:"SignFlow-accountInputContainer",name:"register"===i?"phoneNo":"username",inputClassName:"SignFlow-accountInput",placeholder:d(i,u),onChange:n,defaultValue:r,validations:[{type:"required",message:d(i,"请输入")}],type:"digits"===i||"register"===i?"tel":"text"},h))]})}}]),n}(h.Component);k.propTypes={defaultPhoneNo:d.a.string,defaultSelectedCountry:d.a.object,supportedCountries:d.a.array,onSelect:d.a.func,onChange:d.a.func,getSupportedCountries:d.a.func,type:d.a.oneOf(["register","digits","password"]).isRequired,supportedCountriesShown:d.a.bool,placeholderPrefix:d.a.string,getPlaceholder:d.a.func},k.defaultProps={defaultPhoneNo:"",defaultSelectedCountry:{name:"中国",code:"+86"},supportedCountriesShown:!0,getPlaceholder:function(e,t){var n="digits"===e||"register"===e?"手机号":"手机号或邮箱";return"".concat(t).concat(n)}},k.contextType=v.a;t.a=Object(f.connect)((function(e){return{supportedCountries:e.sms.supportedCountries}}),{getSupportedCountries:g.b})(k)},890:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(32),r=n(13),i=n(14),o=n(15),c=n(17),s=n(9),l=n(1),u=n(3),d=n.n(u),h=n(2),f=n(31),p=n(2576),b=n(2577),m=n(76),v=n.n(m),g=n(869),O=["switchDisabled","placeholderPrefix"];function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var y=function(e){Object(o.a)(n,e);var t=j(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleSwitchPasswordInputType=function(){a.setState((function(e){return{inputType:"password"===e.inputType?"text":"password"}}))},a.handleChange=function(e){a.state.hasValue!==Boolean(e)&&a.setState({hasValue:Boolean(e)}),a.props.onChange(e)},a.state={hasValue:Boolean(e.defaultValue),inputType:e.defaultType},a}return Object(i.a)(n,[{key:"render",value:function(){var e=v()(this.props,["onChange","defaultType"]),t=e.switchDisabled,n=e.placeholderPrefix,r=Object(a.default)(e,O),i=this.state,o=i.inputType,c=i.hasValue;return Object(l.c)("div",{className:"SignFlow-password",children:[Object(l.b)(g.a,Object.assign({name:"password",inputClassName:"password"===o&&c?"SignFlow-passwordInput":"",type:o,placeholder:"".concat(n||"","密码"),onChange:this.handleChange,errorMessageClassName:"SignFlow-passwordErrorMask",validations:[{type:"required",message:"请输入密码",className:"SignFlow-requiredPasswordErrorMask"}]},r)),!t&&Object(l.b)(f.c,{className:"SignFlow-switchPassword",tabIndex:-1,preset:"plain",onClick:this.handleSwitchPasswordInputType,icon:"password"===o?p.a:b.a})]})}}]),n}(h.Component);y.propTypes={onChange:d.a.func.isRequired,switchDisabled:d.a.bool,defaultType:d.a.string},y.defaultProps={defaultType:"password"}},891:function(e,t,n){"use strict";var a=n(32),r=n(13),i=n(14),o=n(15),c=n(17),s=n(9),l=n(1),u=n(3),d=n.n(u),h=n(2),f=n(869),p=["onChange","validations"];function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=b(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.validations,r=Object(a.default)(e,p);return Object(l.b)(f.a,Object.assign({className:"SignFlow-username",onChange:t,validations:n||[{type:"required",message:"请输入用户名"}]},r))}}]),n}(h.Component);m.propTypes={onChange:d.a.func.isRequired};t.a=m},894:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(36),r=n.n(a),i=n(2),o=n.n(i);function c(e){return o.a.createElement("svg",r()({},e,{viewBox:"0 0 24 24"}),o.a.createElement("path",{d:"M9.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L10.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L13 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))}},895:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(36),r=n.n(a),i=n(2),o=n.n(i);function c(e){return o.a.createElement("svg",r()({viewBox:"0 0 24 24"},e),o.a.createElement("path",{d:"M13.491 10.488s-.012-5.387 0-5.998c-.037-1.987-3.035-1.987-2.997 0-.038 1.912 0 5.998 0 5.998H4.499c-1.999.01-1.999 3.009 0 3.009s5.995-.01 5.995-.01v5.999c0 2.019 3.006 2.019 2.997 0-.01-2.019 0-5.998 0-5.998s3.996.009 6.004.009c2.008 0 2.008-3-.01-3.009h-5.994z",fillRule:"evenodd"}))}},896:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(36),r=n.n(a),i=n(2),o=n.n(i);function c(e){return o.a.createElement("svg",r()({viewBox:"0 0 12 12"},e),o.a.createElement("path",{fillRule:"evenodd",d:"M3 2L2 3l3 3-3 3 1 1 3-3 3 3 1-1-3-3 3-3-1-1-3 3"}))}},897:function(e,t,n){e.exports=n.p+"assets/sidebar-download-qrcode.7caef4dd.png"},904:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(32),r=n(13),i=n(14),o=n(15),c=n(17),s=n(9),l=n(1),u=n(2),d=n(3),h=n.n(d),f=n(872),p=n(218),b=["containerClassName","selector"];function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(o.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,r=Object(a.default)(e,b);return Object(l.b)(p.b,{className:t,selector:n,children:Object(l.b)(f.b,Object.assign({},r))})}}]),n}(u.Component);v.propTypes={containerClassName:h.a.string,selector:h.a.string},v.defaultProps={selector:".List-item"};var g=v},925:function(e,t,n){"use strict";var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(2),h=n.n(d),f=n(24),p=n(125),b=n(4),m=n(11),v=n.n(m),g=n(819),O=n(31),j=n(869),y=n(136),w=Object.assign;var C=function(e){return h.a.createElement(y.a,w({viewBox:"0 0 8 8"},e),h.a.createElement("path",{d:"M7.755 1.434A.839.839 0 007.75.248.837.837 0 006.565.244L4 2.81 1.434.245A.839.839 0 00.248.248c-.33.33-.33.86-.004 1.186L2.81 4 .246 6.566A.839.839 0 00.25 7.752c.33.33.86.33 1.185.004L4 5.19l2.566 2.565a.839.839 0 001.186-.004c.33-.33.33-.86.004-1.185L5.19 4l2.565-2.566z",fillRule:"evenodd"}))},A=Object.assign;var k=function(e){return h.a.createElement(y.a,A({viewBox:"0 0 20 20"},e),h.a.createElement("circle",{cx:"83",cy:"111",r:"10",transform:"translate(-73 -101)"}))};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var R=function(e){Object(i.a)(n,e);var t=S(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={hovered:!0},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e}return Object(r.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.props.position!==e.position&&this.handleMouseLeave()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.position!==e.position||this.state.hovered!==t.hovered}},{key:"render",value:function(){var e=this.props,t=e.position,n=e.onUnMark,a=this.state.hovered,r=a?C:k;return Object(s.c)(O.c,{className:"ChineseCaptchaPoint",style:t,onClick:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,preset:"plain",children:[Object(s.b)(k,{className:v()("ChineseCaptchaPoint-backIcon",{"ChineseCaptchaPoint-backIcon--hovered":a}),fill:a?"#0f88eb":"#aad9ff",width:20,height:20}),Object(s.b)(r,{className:v()("ChineseCaptchaPoint-frontIcon",{"ChineseCaptchaPoint-frontIcon--hovered":a}),fill:a?"#ffffff":"#0f88eb",width:a?8:12,height:a?8:12})]})}}]),n}(d.Component);R.propTypes={onUnMark:u.a.func.isRequired,position:u.a.object.isRequired};var E=R;function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var I="最多只能选择 ".concat(7," 个点"),T=function(e){Object(i.a)(n,e);var t=N(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={markPositionsArray:[],isClient:!1},e.updateSize=function(){if(e.chineseCaptchaImg){var t=e.chineseCaptchaImg.getBoundingClientRect();e.chineseImgWidth=t.width,e.chineseImgHeight=t.height}},e.handleMarkPoint=function(t){if(e.chineseCaptchaImg){var n=e.state.markPositionsArray,a=e.props.onValidation;if(n.length>=7)a({validationMessage:I});else{var r=t.pageX,i=t.pageY;e.updateSize();var o=e.chineseCaptchaImg.getBoundingClientRect(),c=o.top,s=o.left,l=i-c-window.pageYOffset-10,u=r-s-window.pageXOffset-10,d=[].concat(Object(b.a)(n),[{top:l,left:u+60+16}]);e.updateMarkPoint(d)}}},e.handleUnMarkPoint=function(t){var n=Object(b.a)(e.state.markPositionsArray);n.splice(t,1),e.updateMarkPoint(n)},e.updateMarkPoint=function(t){e.setState({markPositionsArray:t},(function(){e.props.onUpdateInput(e.parseMarkPositionsArrayToInputValue(t))}))},e.parseMarkPositionsArrayToInputValue=function(t){return JSON.stringify({img_size:[e.chineseImgWidth,e.chineseImgHeight],input_points:t.map((function(e){var t=e.top;return[e.left+10-60-16,t+10]}))})},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({isClient:!0}),this.updateSize()}},{key:"componentWillReceiveProps",value:function(e){this.props.url!==e.url&&this.props.isChinese&&this.setState({markPositionsArray:[]})}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.url!==e.url||this.props.validationMessage!==e.validationMessage||this.props.isShown!==e.isShown||this.props.className!==e.className||this.state.markPositionsArray!==t.markPositionsArray}},{key:"renderCaptcha",value:function(){var e=this,t=this.props,n=t.url,a=t.isChinese,r=t.onRefresh;return n?Object(s.c)("div",{className:a?"Captcha-chineseContainer":"Captcha-englishContainer",children:[Object(s.b)("img",{"data-tooltip":"看不清楚？换一张",className:a?"Captcha-chineseImg":"Captcha-englishImg",src:n,alt:"图形验证码",onClick:a?this.handleMarkPoint:r,ref:a&&function(t){e.chineseCaptchaImg=t}}),a?this.state.markPositionsArray.map((function(t,n){return Object(s.b)(E,{onUnMark:function(){return e.handleUnMarkPoint(n)},position:t},n)})):null]}):null}},{key:"render",value:function(){var e=this.props,t=e.isChinese,n=e.validationMessage,a=e.className,r=e.onUpdateInput,i=e.validations,o=e.isShown,c=e.onRefresh,l=this.state.isClient,u=this.renderCaptcha();return Object(s.b)("div",{className:v()("Captcha",a,{"Captcha-chinese":t&&l}),style:o?{}:{width:"0",height:"0",opacity:"0",overflow:"hidden",margin:"0",padding:"0",border:"0"},children:t?Object(s.c)("div",{children:[Object(s.c)("div",{className:"Captcha-chineseOperator",children:[Object(s.b)("span",{className:v()("Captcha-info",{"Captcha-error":Boolean(n)}),children:n||"请点击图中倒立的文字"}),Object(s.b)(O.c,{className:"Captcha-chineseRefreshButton",preset:"plain",onClick:c,children:Object(s.b)(g.a,{size:20})})]}),u]}):Object(s.c)("div",{children:[Object(s.b)(j.a,{name:"captcha",type:"text",errorMessageClassName:"Captcha-errorMessage",placeholder:"验证码",onChange:r,validations:o?i:[],manualValidateError:n,tabIndex:o?0:-1}),Object(s.b)("span",{className:"Captcha-englishImage",children:u})]})})}}]),n}(d.Component);T.propTypes={isChinese:u.a.bool,url:u.a.string,validationMessage:u.a.string,onValidation:u.a.func,onRefresh:u.a.func.isRequired,onUpdateInput:u.a.func.isRequired,isShown:u.a.bool,validations:u.a.array},T.defaultProps={isChinese:!1,isShown:!1,validations:[{type:"required",message:"请填写验证码",className:"Captcha-requiredErrorMessage"}]};var B=T;function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var Q=function(e){Object(i.a)(n,e);var t=x(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={validationMessage:""},e.handleValidation=function(t){var n=t.message,a=t.needsRefresh;n&&e.setState({validationMessage:n});var r=e.props,i=r.captchaNeeded,o=r.checkIfCaptchaNeeded,c=r.requestForCaptcha;!i&&a?o(e.lang):a&&c(e.lang)},e.handleRefresh=function(){e.props.requestForCaptcha(e.lang)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.isChinese,a=e.checkIfCaptchaNeeded;this.lang=n?"cn":"en",this.type="register"===t?"register":"login",a(this.lang)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.validationResult,a=void 0===n?{}:n,r=t.captchaNeeded,i=t.requestForCaptcha,o=e.validationResult,c=void 0===o?{}:o,s=e.captchaNeeded;!r&&s&&i(this.lang),a.timestamp!==c.timestamp&&this.handleValidation(c)}},{key:"componentWillUnmount",value:function(){this.props.resetCaptchaInfo()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.isChinese,a=e.onUpdateInput,r=e.className,i=e.captchaBase64String,o=e.isShown,c=this.state.validationMessage,l="digitsLogin"!==t?B.defaultProps.validations:[];return Object(s.b)(B,{className:r,isShown:o,isChinese:n,url:"data:image/jpg;base64,".concat(i),validationMessage:c,onRefresh:this.handleRefresh,onValidation:this.handleValidation,validations:l,onUpdateInput:a})}}]),n}(d.Component);Q.propTypes={canCaptchaShown:u.a.bool,isChinese:u.a.bool,type:u.a.oneOf(["login","digitsLogin","register"]).isRequired,validationResult:u.a.object,captchaNeeded:u.a.bool,captchaBase64String:u.a.string,onUpdateInput:u.a.func,checkIfCaptchaNeeded:u.a.func,requestForCaptcha:u.a.func},Q.defaultProps={canCaptchaShown:!1,isChinese:!1};var M=Object(f.connect)((function(e,t){var n=e.captcha,a=n.captchaNeeded,r=n.captchaBase64String,i=t.canCaptchaShown;return{isShown:Boolean(i&&a&&r),captchaNeeded:a,captchaBase64String:r}}),{checkIfCaptchaNeeded:p.c,requestForCaptcha:p.f,resetCaptchaInfo:p.h})(Q);t.a=M},935:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(36),r=n.n(a),i=n(2),o=n.n(i);function c(e){return o.a.createElement("svg",r()({viewBox:"0 0 24 19",width:"24",height:"18",fill:"#e6eaee"},e),o.a.createElement("path",{fillRule:"evenodd",d:"M12.8 2.5c4.4 0 9.4 15.6 9.4 16H0S2.8 6 6 6.4c1.2 0 1.8 5.8 1.8 5.8s2.5-9.5 5-9.8zm7.8 3c-2 0-3-1.2-3-2.7 0-1.6 1.5-2.8 3-2.8 1.6 0 2.8 1.2 2.8 2.8 0 1.5-1.2 2.7-2.8 2.7z"}))}},936:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n.n(a);function i(e){return r.a.createElement("svg",{width:"12",height:"10",viewBox:"0 0 12 10",style:e.style},r.a.createElement("mask",{id:"ViewIcon","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"12",height:"10"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.8C12 2.56 8.72727 0 6 0C3.27273 0 0 2.56 0 4.8C0 7.04 3.27273 9.6 6 9.6C8.72727 9.6 12 7.04 12 4.8ZM3.79994 4.8C3.79994 3.58497 4.78491 2.6 5.99994 2.6C7.21496 2.6 8.19994 3.58497 8.19994 4.8C8.19994 6.01502 7.21496 7 5.99994 7C4.78491 7 3.79994 6.01502 3.79994 4.8Z",fill:"black"})),r.a.createElement("g",{mask:"url(#ViewIcon)"},r.a.createElement("rect",{x:"-2",y:"-2.8",width:"16",height:"16",fill:"#8590A6"})))}},937:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n.n(a);function i(e){return r.a.createElement("svg",{width:"9",height:"11",viewBox:"0 0 9 11",style:e.style},r.a.createElement("path",{d:"M0 1C0 0.447715 0.447715 0 1 0H8C8.55228 0 9 0.447715 9 1V9.13148C9 9.93018 8.10985 10.4066 7.4453 9.96353L5.0547 8.3698C4.7188 8.14587 4.2812 8.14587 3.9453 8.3698L1.5547 9.96353C0.890146 10.4066 0 9.93018 0 9.13148V1Z",fill:"#8590A6"}))}},938:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n.n(a);function i(e){return r.a.createElement("svg",{width:"10",height:"12",viewBox:"0 0 10 12",style:e.style},r.a.createElement("mask",{id:"UpdateTimeIcon","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"10",height:"12"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.0456 3.17377C9.79834 2.8189 10.1837 1.94914 9.91402 1.14002C9.62296 0.266822 8.67913 -0.205091 7.80593 0.0859764L4.50803 1.18527C4.40079 1.21835 4.29816 1.26195 4.20137 1.31488C3.97216 1.43959 3.78091 1.6137 3.63673 1.81892C3.50452 2.00645 3.41003 2.22248 3.3643 2.45598C3.32608 2.64908 3.32175 2.85082 3.35567 3.0525C3.38728 3.24338 3.45134 3.42332 3.54198 3.58645C3.6623 3.80402 3.82732 3.98694 4.02117 4.1273C4.21884 4.27093 4.44931 4.37218 4.69922 4.4177C4.80621 4.43741 4.91575 4.44673 5.02636 4.44494C5.3467 4.45005 5.65899 4.5474 5.9257 4.7256C6.19977 4.90873 6.41338 5.16901 6.53952 5.47354L8.07925 4.83577L6.53952 5.47355C6.66566 5.77808 6.69866 6.11317 6.63436 6.43646L8.26893 6.7616L6.63436 6.43646C6.57005 6.75975 6.41132 7.05671 6.17825 7.28978C5.94517 7.52286 5.64821 7.68159 5.32492 7.7459L5.65006 9.38047L5.32492 7.7459C5.00164 7.8102 4.66654 7.7772 4.36201 7.65106L3.72423 9.19079L4.36201 7.65106C4.05748 7.52492 3.79719 7.3113 3.61406 7.03723C3.43093 6.76316 3.33319 6.44094 3.33319 6.11132C3.33319 5.19089 2.58703 4.44473 1.66659 4.44473C0.74616 4.44473 0 5.19089 0 6.11132C0 7.10019 0.293232 8.06684 0.842616 8.88906C1.392 9.71127 2.17286 10.3521 3.08645 10.7305C4.00004 11.1089 5.00533 11.208 5.97519 11.015C6.94506 10.8221 7.83593 10.3459 8.53517 9.64671C9.2344 8.94747 9.71058 8.0566 9.9035 7.08673C10.0964 6.11687 9.99741 5.11158 9.61899 4.19799C9.46794 3.83334 9.2751 3.48985 9.0456 3.17377Z",fill:"black"})),r.a.createElement("g",{mask:"url(#UpdateTimeIcon)"},r.a.createElement("rect",{x:"-3.88873",y:"-2.77719",width:"17.777",height:"17.777",fill:"#8590A6"})))}},945:function(e,t,n){"use strict";var a=n(1),r=n(11),i=n.n(r),o=n(123),c=n(2590),s=n(585),l=n(377),u=n(182),d=n(31),h=n(30),f=n(247),p=n.n(f),b=n(376),m=n(94),v=n(104),g=n(839);t.a=function(e){var t,n,r=e.question,f=e.question,O=f.id,j=f.title,y=f.answerCount,w=f.followerCount,C=f.updatedTime,A=f.created,k=e.headerInfo,S=e.showTime,R=e.extraFooterInfo,E=e.renderItem,N=e.enableIgnore,I=e.handleIgnoreQuestion,T=void 0===I?p.a:I,B=e.zaId,x=(B=void 0===B?{}:B).titleClick,Q=B.writeAnswer,M=B.cardShow,_=B.ignoreQuestion,D=e.className,P=e.button,q=e.titleLink,L=e.zaContent,z=e.isNewZa,U=Object(m.i)().trackEvent;if(E)return E(r);var F="/question/".concat(O),H="https://www.zhihu.com/question/".concat(O),V=k?Object(a.c)(o.Flex,{mb:12,color:"GBL05A",alignItems:"center",css:{fontSize:"15px"},children:[Object(a.b)("img",{alt:"",className:i()("QuestionItem-head--avatar",{"QuestionItem-head--avatarCircle":"circle"===(null===(t=k.avatar)||void 0===t?void 0:t.shape)}),src:null===(n=k.avatar)||void 0===n?void 0:n.url}),Object(a.b)("div",{className:"QuestionItem-head--reason",children:k.reason}),k.extra&&Object(a.b)("div",{className:"QuestionItem-head--extra",children:k.extra})]}):null,Y=Object(a.b)("div",{className:"QuestionItem-title",children:Object(a.b)("a",Object.assign(Object.assign(Object.assign({href:q||F,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-name":"Title"},x&&{"data-za-detail-view-id":x}),z&&{onClick:function(){U({eventType:"Click",action:"OpenUrl",elementLocation:{type:"Card"}},{link:{url:q||F}})}}),{},{children:j}))});return Object(a.b)(b.a,{module:"QuestionItem",content:L||{type:"Question",token:String(O)},trackCardShow:Boolean(M),view:{id:M},children:Object(a.c)("div",{className:i()("QuestionItem",D),children:[V,Object(a.b)(g.e,{data:r,link:q||F,lastreadTouchable:!1,title:Y,children:Object(a.c)(o.Flex,{mt:20,children:[P||Object(a.b)(v.a,{className:"QuestionItem-footer--writeAnswerButton",icon:c.a,label:"写回答",href:"".concat(H,"#write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){Q&&h.a.trackEvent(e.target,{id:Q,action:"OpenUrl"}),z&&U({eventType:"Click",action:"OpenUrl",elementLocation:{type:"Button",text:"写回答"}},{link:{url:"".concat(H,"#write")}})}}),Object(a.b)(o.Box,{ml:16,children:Object(a.b)(g.d,{children:R||["".concat(Object(l.formatNumber)(y)," 回答"),"".concat(Object(l.formatNumber)(w)," 关注"),S&&"".concat(Object(u.toRelativeString)(C||A))]})})]})}),N&&Object(a.b)(d.c,{className:"QuestionItem-ignoreButton",preset:"plain","data-tooltip":"不感兴趣","data-tooltip-preset":"white","data-tooltip-classname":"QuestionItem-ignoreButtonTooltip",color:"GBL07A",icon:s.a,onClick:function(e){T(O),h.a.trackEvent(e.target,{id:_,action:"Click"}),z&&U({eventType:"Click",elementLocation:{type:"Button",text:"不感兴趣"}})}})]})})}},947:function(e,t,n){"use strict";var a=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;t.a=function(e){return a.test(e)}},951:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(36),r=n.n(a),i=n(888),o=n.n(i),c=n(2),s=n.n(c),l=n(11),u=n.n(l),d=n(894),h=n(895),f={close:n(896).a,triangle:d.a,add:h.a};function p(e){var t=e.className,n=e.name,a=o()(e,["className","name"]),i=f[n];return i?s.a.createElement(i,r()({className:u()("Icon Icon--".concat(n),t)},a)):null}},966:function(e,t,n){"use strict";var a,r=n(837),i=n(32),o=n(13),c=n(14),s=n(15),l=n(17),u=n(9),d=n(1),h=n(3),f=n.n(h),p=n(2),b=n(1016),m=n(984),v=n(869),g=["countDownEvent","countDownEndEvent","startAtOnce","interceptTime","isEmail","reStartTime","smsType"];function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var j=function(e){Object(s.a)(n,e);var t=O(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.countDownEvent,o=t.countDownEndEvent,c=t.startAtOnce,s=t.interceptTime,l=t.isEmail,u=t.reStartTime,h=t.smsType,f=Object(i.default)(t,g);return e=l?"邮箱":"voice"===h?"语音":"短信",Object(d.c)("div",{className:"SignFlow SignFlow-smsInputContainer",children:[Object(d.b)(v.a,Object.assign({name:"digits",className:"SignFlow-smsInput",type:"number",smsType:h,errorMessageClassName:"SignFlow-smsInputErrorMessage",placeholder:"输入 6 位".concat(e,"验证码"),validations:[{type:"required",message:"请输入".concat(e,"验证码"),className:"SignFlow-smsInputRequiredErrorMask"}]},f)),Object(d.b)(b.a,{className:"SignFlow-smsInputButton",preset:"plain",initialText:"获取".concat(e,"验证码"),resetText:"重新获取".concat(e,"验证码"),countingText:Object(m.a)(a||(a=Object(r.a)([""," 秒后可重发"])),"count"),startAtOnce:c,event:n,countDownEndEvent:o,interceptTime:s,reStartTime:u})]})}}]),n}(p.Component);j.propTypes={countDownEvent:f.a.func.isRequired,startAtOnce:f.a.bool,interceptTime:f.a.number,reStartTime:f.a.number,isEmail:f.a.bool,countDownEndEvent:f.a.func,smsType:f.a.string},j.defaultProps={startAtOnce:!1,isEmail:!1};t.a=j},981:function(e,t,n){"use strict";var a=n(0),r=n(13),i=n(14),o=n(15),c=n(17),s=n(9),l=n(1),u=n(2),d=n(18),h=n(24),f=n(31),p=n(257),b=n(401),m=n(125),v=n(868),g=n(883),O=n(890),j=n(891),y=n(925);n(985);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var C={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},A=function(e){Object(o.a)(n,e);var t=w(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",fullname:"",captcha:"",customErrorInputMap:Object.assign({},C)},e.handleChange=function(t){return function(n){e.setState(Object(a.a)({},t,n))}},e.runBeforeCheckCaptcha=function(t){var n=e.state.captcha,a=e.props,r=a.captchaNeeded,i=a.checkCaptcha;if(!e.captchaValidated&&r)return n?void i(n).then((function(n){n.payload.success&&(e.captchaValidated=!0,t())})):void e.setState({validationResult:{message:"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},e.handleSubmit=function(){e.runBeforeCheckCaptcha((function(){var t=e.props,n=t.validateAndRegister;(0,t.resetRegisterValidateResult)();var a=e.state;n({source:"com.zhihu.web",registerType:"email",email:a.email,password:a.password,fullname:a.fullname})}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.isLogin&&(location.href="https://www.zhihu.com/logout?next=/email-register")}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.captchaValidationMessage,a=t.registerConfirmSucceeded,r=e.captchaValidationMessage,i=e.registerConfirmSucceeded;!a&&i&&(location.href="/"),!n&&r&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:r,needsRefresh:Boolean(r),timestamp:Date.now()}})}},{key:"render",value:function(){var e=this.state.validationResult,t=this.props.registerValidateErrors,n=t.email,a=(n=void 0===n?{}:n).message,r=t.fullname,i=(r=void 0===r?{}:r).message,o=t.password,c=(o=void 0===o?{}:o).message;return Object(l.c)(v.b,{className:"SignContainer-content EmailRegister",onSubmit:this.handleSubmit,children:[Object(l.b)(j.a,{onChange:this.handleChange("fullname"),name:"fullname",placeholder:"用户名",manualValidateError:i}),Object(l.b)(g.a,{type:"register",placeholder:"输入邮箱",onChange:this.handleChange("email"),manualValidateError:a,supportedCountriesShown:!1}),Object(l.b)(O.a,{onChange:this.handleChange("password"),manualValidateError:c}),Object(l.b)(y.a,{className:"SignFlow-captchaContainer Register-captcha",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:!0,onUpdateInput:this.handleChange("captcha"),validationResult:e}),Object(l.b)(f.c,{className:"EmailRegister-submitButton",preset:"primary",color:"blue",type:"submit",children:"注册"})]})}}]),n}(u.Component);t.a=Object(d.compose)(Object(p.b)(),Object(h.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register;return{captchaNeeded:n,registerValidateErrors:r.registerValidateErrors,captchaValidationMessage:a,registerConfirmSucceeded:r.registerConfirmSucceeded}}),{checkCaptcha:m.b,validateAndRegister:b.f,resetRegisterValidateResult:b.d}))(A)},984:function(e,t,n){"use strict";function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var i=a[a.length-1]||{};return n.reduce((function(t,n,r){return t.concat(Number.isInteger(n)&&a[n]||i[n],e[r+1])}),[e[0]]).join("")}}n.d(t,"a",(function(){return a}))},985:function(e,t,n){},986:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))};function r(e){var t=[];return e.reduce((function(e,n){return e.then((function(){return n().then((function(e){t.push(e)}))}))}),Promise.resolve()).then((function(){return t}))}},993:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(43),n(838),n(58),n(867),n(48),n(64),n(7),n(950);var a=n(842);n(887);var r=function(e){var t=e.adjson,n=e.style,r=e.template,i=e.data,o=Object(a.e)(t,"ads[0]",{}),c=Object(a.e)(t,"ads",[]),s=Object(a.e)(o,"creatives[0]",{}),l=Object(a.e)(o,"creatives",[]),u=!!n&&n.toLocaleLowerCase().indexOf("download")>-1;return{ad:o,ads:c,creatives:l,creative:s,style:n,isDownload:u,template:r,oldAd:i.ad}}},994:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return v}));var a=n(867),r=n.n(a),i=n(888),o=n.n(i),c=n(7),s=n(842),l=n(950);function u(e){var t=e.oldData,n=e.adjson;if("{}"!==JSON.stringify(n))return l.h[Object(s.e)(n,"ads[0].style")];var a,r,i=Object(s.e)(t.ad,"creatives[0].appPromotionUrl");return"".concat((a=Object(s.e)(t,"ad.adVerb"),r={singlePu:"PROMOTE_SMALL_IMAGE_CARD_PU",single:"PROMOTE_SMALL_IMAGE_CARD",word:"PROMOTE_WORD",multiple:"PROMOTE_MULTI_IMAGES_CARD"},Object.keys(r).find((function(e){return r[e]===a})))).concat(i?"Download":"")}function d(e){var t=e.oldData,n=e.adjson;return"{}"!==JSON.stringify(n)?l.e[Object(s.e)(n,"ads[0].style")]:l.f[Object(s.e)(t,"ad.style")]}function h(e){var t,n,a=e.oldData,r=e.adjson;return"{}"!==JSON.stringify(r)?l.i[Object(s.e)(r,"ads[0].style")]:(t=Object(s.e)(a,"ad.adVerb"),n={small:"PROMOTE_SUBJECT_CARD_SMALL_IMAGE",multiple:"PROMOTE_SUBJECT_CARD_MULTI_IMAGE"},Object.keys(n).find((function(e){return n[e]===t})))}function f(e){var t=e.oldData,n=e.adjson;return"{}"!==JSON.stringify(n)?Object(s.e)(n,"ads[0].experimentInfo"):Object(s.e)(t,"ad.experimentInfo")}function p(e){var t=e.oldData,n=e.adjson;return"{}"!==JSON.stringify(n)?Object(s.e)(n,"ads[0].webExperiment"):Object(s.e)(t,"ad.webExperiment")}function b(e){var t=e.ad,n=e.related,a=(t.partyId,t.creatives),i=t.downloadSilent,c=void 0!==i&&i,l=t.isNewWebview,u=void 0!==l&&l,d=t.isSpeeding,h=t.cdnMap,f=t.displayAdvertisingTag,p=o()(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag"]),b=Object(s.e)(a[0],"canvas"),m={displayAdvertisingTag:f,downloadSilent:c,isNewWebview:u,isCdnSpeeding:d,cdnMap:h},v=a.map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.voteupCount,a=t.commentCount,i=t.followerCount,c=t.answerCount,l=e.landingUrl,u=e.appPromotionUrl,d=e.deepUrl,h=e.packageName,f=e.title,p=e.nativeUrl,b=void 0===p?"":p,m=e.window,v=e.imageRatioExtra,g=e.brand,O=void 0===g?{}:g,j=e.thumbnailExtraInfo,y=e.cta,w=(y=void 0===y?{}:y).value,C=void 0===w?"":w,A=e.description,k=e.protoInfo,S=e.image,R=e.gallery,E=void 0===R?[]:R,N=e.thirdSdkInfo,I=e.showNum,T=void 0===I?{}:I,B=e.recommend,x=o()(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend"]),Q=Object(s.e)(k,"contentType"),M=O.name,_=O.logo,D=Object(s.e)(E,"length")>=2?E.map((function(e){return e.url})):[S],P=E&&E.map((function(e){return{image:e.url,desc:e.description}})),q=r()({landingUrl:l,appPromotionUrl:u,deepUrl:d,packageName:h,title:f,nativeUrl:b,window:m,imageRatioExtra:v,desc:A,cta:C,imgs:D,brandName:M,brandLogo:_,recommend:B,gallery:E,galleries:P},x),L=r()({contentType:Q,voteupNum:n,commentNum:a,followNum:i,answerNum:c},T),z={asset:q,protoInfo:L,videoInfo:j,thirdSdkInfo:N};return z}(e,n)}));return r()({},p,{canvas:b,creatives:v,expand:m})}function m(e){var t=e.type,n=e.oldData,a=e.adjson;switch(t){case"large":case"intext":return d({oldData:n,adjson:a});case"subject":return h({oldData:n,adjson:a});case"bonus":case"pccard":return function(e){var t=e.adjson;if("{}"!==JSON.stringify(t))return l.i[Object(s.e)(t,"ads[0].style")]}({adjson:a});case"mfeed":return function(e){var t=e.oldData,n=e.adjson;return"{}"!==JSON.stringify(n)?l.g[Object(s.e)(n,"ads[0].style")]:{PROMOTE_SMALL_IMAGE_CARD:"small",PROMOTE_MULTI_IMAGES_CARD:"multiple",PROMOTE_WORD:"word",PROMOTE_URL_CARD:"large",PROMOTE_CARD:"small"}[Object(s.e)(t,"ad.adVerb")]}({oldData:n,adjson:a});default:return u({oldData:n,adjson:a})}}function v(e,t){if(["large","intext","recommend"].includes(t)&&function(e){return!e||!(e.ad||e.adjson)}(e))return null;var n=Object(c.camelizeKeys)(e),a=Object(s.e)(e,"adjson"),i=Object(c.camelizeKeys)(Object(s.x)(a)),o=m({type:t,oldData:n,adjson:i}),l=f({oldData:n,adjson:i}),u=p({oldData:n,adjson:i});return{data:n,adjson:a?function(e,t){return{ads:e.ads.map((function(e){return r()({adjsonStr:t},e)}))}}(i,a):function(e,t){var n=e.related,a=void 0===n?{}:n,i=e.adList,o=e.ad;return{ads:(i||[{ad:o}]).map((function(e){var n=e.ad;return r()({adjsonStr:t},b({ad:n,related:a}))}))}}(n,a),style:o,experimentInfo:l,webExperiment:u}}},995:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(42);function r(e){var t=e.split(" ")[0].split("-"),n=Object(a.a)(t,3),r=n[0],i=n[1],o=n[2],c=e.split(" ")[1].split(":"),s=Object(a.a)(c,2),l=s[0],u=s[1];return new Date(r,i-1,o,l,u)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;var n=r(e.startTime),a=r(e.endTime),i=Date.now(),o=i>n.getTime()&&i<a.getTime(),c=t&&"1"===e.officePreview,s=o||c;return s}},999:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(13),r=n(14),i=n(15),o=n(17),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(2),h=n(1128),f=n(12),p=n(5);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var m=function(e){Object(i.a)(n,e);var t=b(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.page,a=e.prePage,r=e.onLoad,i=e.isNextLoaded;t||r(Object(p.c)(n),a),i||r(Object(p.c)(n+1),a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isFetching,n=e.isDrained,a=e.isNextLoaded,r=e.page,i=e.prePage,o=e.onLoad,c=e.total;n||t||o(Object(p.c)(r),i),!a&&r<c&&r!==this.props.page&&o(Object(p.c)(r+1),i)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.total,a=e.page,r=e.onPaginationClick,i=e.isFetching,o=e.placeholder;return Object(s.c)("div",{children:[t,i&&o,n>1&&Object(s.b)(h.a,{current:a,total:n,clickCallback:r})]})}}]),n}(d.Component);m.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,onLoad:u.a.func.isRequired,total:u.a.number,page:u.a.number,prePage:u.a.number,placeholder:u.a.node,onPaginationClick:u.a.func.isRequired,isNextLoaded:u.a.bool},m.defaultProps={prePage:f.b,page:1}}}]);
//# sourceMappingURL=main.question-routes.41ff254f912664c40cc2.js.map